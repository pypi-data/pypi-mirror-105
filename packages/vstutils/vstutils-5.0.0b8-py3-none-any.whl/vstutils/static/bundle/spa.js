window.spa=function(e){function t(t){for(var s,i,a=t[0],l=t[1],c=t[2],u=0,g=[];u<a.length;u++)i=a[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&g.push(o[i][0]),o[i]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);for(f&&f(t);g.length;)g.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],s=!0,a=1;a<n.length;a++){var l=n[a];0!==o[l]&&(s=!1)}s&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var s={},o={5:0},r=[];function i(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=s,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/static/bundle/";var a=window.webpackJsonp_name_=window.webpackJsonp_name_||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var f=l;return r.push([306,0,2,4,1]),n()}({296:function(e,t,n){var s=n(4),o=n(297);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1};s(o,r);e.exports=o.locals||{}},297:function(e,t,n){(t=n(5)(!1)).push([e.i,".ansi-black-fg{color:#000000}.ansi-red-fg{color:#ff6060}.ansi-green-fg{color:#60ff60}.ansi-yellow-fg{color:#ffff36}.ansi-blue-fg{color:#6060ff}.ansi-magenta-fg{color:#ff36ff}.ansi-cyan-fg{color:#36ffff}.ansi-white-fg{color:#ececec}.ansi-bright-black-fg{color:#363636}.ansi-bright-red-fg{color:#ff8080}.ansi-bright-green-fg{color:#80ff80}.ansi-bright-yellow-fg{color:#ffff80}.ansi-bright-blue-fg{color:#8080ff}.ansi-bright-magenta-fg{color:#ff80ff}.ansi-bright-cyan-fg{color:#80ffff}.ansi-bright-white-fg{color:#ffffff}.ansi-black-bg{background-color:#000000}.ansi-red-bg{background-color:#ff6060}.ansi-green-bg{background-color:#60ff60}.ansi-yellow-bg{background-color:#ffff36}.ansi-blue-bg{background-color:#6060ff}.ansi-magenta-bg{background-color:#ff36ff}.ansi-cyan-bg{background-color:#36ffff}.ansi-white-bg{background-color:#ececec}.ansi-bright-black-bg{background-color:#363636}.ansi-bright-red-bg{background-color:#ff8080}.ansi-bright-green-bg{background-color:#80ff80}.ansi-bright-yellow-bg{background-color:#ffff80}.ansi-bright-blue-bg{background-color:#8080ff}.ansi-bright-magenta-bg{background-color:#ff80ff}.ansi-bright-cyan-bg{background-color:#80ffff}.ansi-bright-white-bg{background-color:#ffffff}\n",""]),e.exports=t},306:function(e,t,n){"use strict";n.r(t),n.d(t,"TabSignal",(function(){return y.a})),n.d(t,"signals",(function(){return C.a})),n.d(t,"colors",(function(){return s})),n.d(t,"ComponentsRegistrator",(function(){return c.a})),n.d(t,"globalComponentsRegistrator",(function(){return c.b})),n.d(t,"AppRoot",(function(){return g.a})),n.d(t,"utils",(function(){return u})),n.d(t,"guiCustomizer",(function(){return U})),n.d(t,"setupVue",(function(){return q})),n.d(t,"popUp",(function(){return f})),n.d(t,"fields",(function(){return D})),n.d(t,"components",(function(){return Q})),n.d(t,"models",(function(){return b})),n.d(t,"querySet",(function(){return m})),n.d(t,"views",(function(){return h})),n.d(t,"store",(function(){return d})),n.d(t,"router",(function(){return w})),n.d(t,"api",(function(){return l})),n.d(t,"users",(function(){return B})),n.d(t,"App",(function(){return $}));var s={};n.r(s),n.d(s,"AnsiUp",(function(){return I.a})),n.d(s,"ansiToHTML",(function(){return F}));var o=n(8),r=n(60),i=n(143),a=n.n(i),l=n(12),c=n(9),f=n(6),u=n(0),g=n(55),p=n(145);var h=n(30),d=n(25),b=n(31),w=n(54),m=n(35),v=n(61),y=n.n(v),C=n(7),k=(n(13),n(270),n(271),n(273),n(275),n(138),n(15)),R=n.n(k),M=(n(279),n(76)),_=n.n(M),T=n(75),S=n.n(T),j=n(21),x=n.n(j),A=(n(280),n(56)),O=n.n(A),L=(n(282),n(78)),V=n.n(L),P=(n(81),n(82),n(83)),I=n.n(P);n(296);const E=new I.a;function F(e){return E.ansi_to_html(e).replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")}E.use_classes=!0;var U=n(142),q=n(139),D=n(22),Q=n(141),B=n(66);n(140);window.SELECT2_THEME="bootstrap",n(276),n(277),window.moment=R.a,window.md5=_.a,window.Visibility=S.a,window.IMask=x.a,window.iziToast=O.a,window.autoComplete=V.a;const N=(e,t)=>{if(0===e)return 0;const n=e>10&&e<20,s=e%10==1;return t<4?!n&&s?1:2:!n&&s?1:!n&&e%10>=2&&e%10<=4||t<4?2:3};class $ extends class{constructor(e,t){this.config=e,this.schema=e.schema,this.router=null,this.cache=t,this.api=l.apiConnector.initConfiguration(e),this.translationsManager=new p.a(l.apiConnector,t),this.centrifugoClient=function(e,t){if(!e)return null;const n=new a.a(new URL("connection/websocket",e).toString());return t&&n.setToken(t),n}(this.schema.info["x-centrifugo-address"],this.schema.info["x-centrifugo-token"]),this.error_handler=new f.ErrorHandler,this.languages=null,this.translations=null,this.rawUser=null,this.user=null,this.global_components=c.b,this.appRootComponent=g.a,this.initLanguage=u.guiLocalSettings.get("lang")||Object(u.getCookie)("lang")||"en"}afterInitialDataBeforeMount(){}async start(){this.centrifugoClient&&this.centrifugoClient.connect();const[e,t,n]=await Promise.all([this.translationsManager.getLanguages(),this.translationsManager.getTranslations(this.initLanguage),this.api.loadUser()]);this.languages=e,this.translations={[this.initLanguage]:t},this.rawUser=n,this.afterInitialDataBeforeMount();const s=this.views.get("/user/").objects,o=s.getModelClass(u.RequestTypes.RETRIEVE);this.user=new o(this.rawUser,s),this.global_components.registerAll(),this.prepare()}changeAppRootComponent(e){this.appRootComponent=e}resetAppRootComponent(){this.appRootComponent=g.a}prepare(){}}{constructor(e,t,n,s){super(e,t),this.fieldsClasses=n,this.modelsClasses=s,this.views=null,this.modelsResolver=null,this.qsResolver=null,this.application=null}afterInitialDataBeforeMount(){this.prepareFieldsClasses(),new b.ModelConstructor(l.openapi_dictionary,this.config.schema,this.fieldsClasses,this.modelsClasses).generateModels(),this.modelsResolver=new b.ModelsResolver(this.modelsClasses,this.fieldsClasses,this.config.schema),this.views=new h.ViewConstructor(l.openapi_dictionary,this.modelsClasses,this.fieldsClasses).generateViews(this.config.schema),this.viewsTree=new h.ViewsTree(this.views),this.qsResolver=new m.QuerySetsResolver(this.viewsTree),this.setNestedViewsQuerysets(),this.prepareViewsModelsFields()}prepareFieldsClasses(){for(const e of this.fieldsClasses.values())e.app=this}prepareViewsModelsFields(){for(const[e,t]of this.views){if(!t.objects)continue;const n=new Set(Object.values(t.objects.models).flatMap(e=>Array.isArray(e)?e:[e]));for(const t of n)if(t)for(const n of t.fields.values())n.prepareFieldForView(e)}}setNestedViewsQuerysets(){for(const e of this.views.values())if(e instanceof h.PageNewView&&e.nestedAllowAppend){const t=e.listView,n=t.objects.getResponseModelClass(u.RequestTypes.LIST).name;try{t.nestedQueryset=this.qsResolver.findQuerySetForNested(n,t.path)}catch(n){console.warn(n),e.nestedAllowAppend=!1,t.actions.delete("add")}}}setLanguage(e){return this._prefetchTranslation(e).then(e=>(this.application.$i18n.locale=e,u.guiLocalSettings.set("lang",e),C.a.emit("app.language.changed",{lang:e}),document.documentElement.setAttribute("lang",e),e))}_prefetchTranslation(e){return Object.values(this.languages).map(e=>e.code).includes(e)?this.translations[e]?Promise.resolve(e):this.translationsManager.getTranslations(e).then(t=>(this.translations={...this.translations,[e]:t},this.application.$i18n.setLocaleMessage(e,t),e)).catch(e=>{throw e}):Promise.reject(!1)}prepare(){C.a.emit("app.beforeInit",{app:this});let e=new d.StoreConstructor(this,this.config.isDebug);C.a.emit("app.beforeInitStore",{storeConstructor:e});let t=new w.RouterConstructor(this.views,w.mixins.routesComponentsTemplates,w.mixins.customRoutesComponentsTemplates);C.a.emit("app.beforeInitRouter",{routerConstructor:t}),this.router=t.getRouter();let n=new r.a({locale:this.initLanguage,messages:this.translations,silentTranslationWarn:!0,formatFallbackMessages:!0,pluralizationRules:{ru:N}});o.default.prototype.$app=this,this.application=new o.default({mixins:[this.appRootComponent],propsData:{info:this.config.schema.info,x_menu:this.config.schema.info["x-menu"],x_docs:this.config.schema.info["x-docs"]},router:this.router,store:e.getStore(),i18n:n}),C.a.emit("app.afterInit",{app:this})}mount(){this.application.$mount("#RealBody")}}window.App=$}});