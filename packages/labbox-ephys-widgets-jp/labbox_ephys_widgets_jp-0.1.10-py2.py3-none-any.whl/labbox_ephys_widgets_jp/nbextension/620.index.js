(self.webpackChunklabbox_ephys_widgets_jp=self.webpackChunklabbox_ephys_widgets_jp||[]).push([[620],{71866:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(83334),s=n(53167),l=n(69297),r=n.n(l);const c=({job:e,message:t="",width:n=200,height:l=200})=>e?r().createElement(i.Z,{display:"flex",width:n,height:l},r().createElement(i.Z,{m:"auto"},"running"===e.status?r().createElement("span",null,"[",t,"] ",r().createElement(s.Z,null)):"error"===e.status?r().createElement("span",null,"Error: ",e.error_message," [",t,"]"):"pending"===e.status?r().createElement("span",null,t):r().createElement("span",null,"[",t,"] ",e.status))):r().createElement("div",null,"No job")},90667:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(81459),s=n(95898),l=n(69297),r=n.n(l),c=n(95849),o=n(10051);const a=({sorting:e,selection:t,curation:n,selectionDispatch:a,unitComponent:d})=>{const[u,h]=(0,l.useState)(30),p=(0,o.D)(e.sortingObject,e.recordingObject),g=t.visibleUnitIds;let m=(p?p.unit_ids:[]).filter((e=>!g||g.includes(e))).filter((e=>!t.applyMerges||(0,c.GI)(e,n))),b=!1;m.length>u&&(m=m.slice(0,u),b=!0);const E=(0,l.useCallback)((e=>{const t=Number(e.currentTarget.dataset.unitId);a({type:"UnitClicked",unitId:t,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey})}),[a]);return r().createElement(i.Z,{container:!0},m.map((e=>{var n;return r().createElement(i.Z,{key:e,item:!0},r().createElement("div",{className:"plotWrapperStyle"},r().createElement("div",{"data-unit-id":e,className:(null===(n=t.selectedUnitIds)||void 0===n?void 0:n.includes(e))?"plotSelectedStyle":"plotUnselectedStyle",onClick:E},r().createElement("div",{className:"plotUnitLabel"},r().createElement("div",null,"Unit ",e)),d(e))))})),b&&r().createElement("div",{className:"plotWrapperStyle"},r().createElement("div",{className:"plotWrapperStyleButton"},r().createElement(s.Z,{onClick:()=>{h(u+60)}},"Show more units"))))}},3527:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(69297),s=n.n(i),l=n(31315),r=n.n(l);const c=e=>{var t,n,l;const{width:c,height:o,initialPosition:a,onChange:d,adjustable:u=!0,positionFromRight:h=!1}=e,[p,g]=(0,i.useState)(a);if(!e.children)throw Error("Unexpected: no props.children");let m,b;if(Array.isArray(e.children)){const t=e.children.filter((e=>void 0!==e));m=t[0],b=t[1]||null}else m=e.children,b=null;if(!b)return s().createElement(m.type,Object.assign({},m.props,{width:c,height:o}));const E=h?c-p:p,y=u?null!==(t=e.gripThickness)&&void 0!==t?t:10:0,v=u?null!==(n=e.gripInnerThickness)&&void 0!==n?n:4:0,j=u?null!==(l=e.gripMargin)&&void 0!==l?l:2:0,w=E-y/2-j,f=c-w-y-2*j;let O={top:0,left:0,width:c,height:o},I={left:0,top:0,width:w,height:o,zIndex:0,overflowY:"auto",overflowX:"hidden"},k={left:w+y+2*j,top:0,width:f,height:o,zIndex:0,overflowY:"auto",overflowX:"hidden"},C={left:0,top:0,width:y+2*j,height:o,backgroundColor:"transparent",cursor:"col-resize",zIndex:9998},S={left:j,top:0,width:y,height:o,background:"rgb(230, 230, 230)",cursor:"col-resize"},Z={top:0,left:(y-v)/2,width:v,height:o,background:"gray",cursor:"col-resize"};return s().createElement("div",{className:"splitter",style:Object.assign(Object.assign({},O),{position:"relative"})},s().createElement("div",{key:"child1",style:Object.assign(Object.assign({},I),{position:"absolute"}),className:"SplitterChild"},s().createElement(m.type,Object.assign({},m.props,{width:w,height:o}))),u&&s().createElement(r(),{key:"drag",position:{x:E-y/2-j,y:0},axis:"x",onDrag:(e,t)=>{},onStop:(e,t)=>((e,t)=>{const n=t.x;if(n===E)return;const i=h?c-n:n;g(i),d&&d(i)})(0,t)},s().createElement("div",{style:Object.assign(Object.assign({},C),{position:"absolute"})},s().createElement("div",{style:Object.assign(Object.assign({},S),{position:"absolute"})},s().createElement("div",{style:Object.assign(Object.assign({},Z),{position:"absolute"})})))),s().createElement("div",{key:"child2",style:Object.assign(Object.assign({},k),{position:"absolute"}),className:"SplitterChild"},s().createElement(b.type,Object.assign({},b.props,{width:f,height:o}))))}},1620:(e,t,n)=>{"use strict";n.r(t),n.d(t,{activate:()=>j});var i=n(72792),s=n(69297),l=n.n(s),r=n(90667),c=n(5443),o=n(45810),a=n(71866),d=n(95849);const u=(0,c.zy)({maxSimultaneous:6}),h=({sorting:e,unitId1:t,unitId2:n,selection:i,curation:s,selectionDispatch:r,width:h,height:p})=>{const{result:g,job:m}=(0,c.lG)("createjob_fetch_correlogram_plot_data",{sorting_object:e.sortingObject,unit_x:(0,d.kN)(t,s,i.applyMerges),unit_y:void 0!==n?(0,d.kN)(n,s,i.applyMerges):null},{useClientCache:!1,calculationPool:u});if(!g)return l().createElement(a.Z,{job:m,width:h,height:p});const b=g.bins.map(((e,t)=>({x:e,y:g.bin_counts[t]})));return l().createElement("div",{className:"App"},l().createElement(o.dp,{margin:30,height:p,width:h},l().createElement(o.XQ,{data:b,barWidth:1}),l().createElement(o.Kc,null),l().createElement(o.B2,null)),l().createElement("div",{style:{textAlign:"center",fontSize:"12px"}},"dt (msec)"))},p=({sorting:e,selection:t,curation:n,selectionDispatch:i})=>{const c=(0,s.useMemo)((()=>s=>l().createElement(h,Object.assign({},{sorting:e,unitId1:s,selection:t,curation:n,selectionDispatch:i},{width:180,height:180}))),[e,t,i]);return l().createElement(r.Z,{sorting:e,selection:t,curation:n,selectionDispatch:i,unitComponent:c})};var g=n(3527),m=n(86729),b=n(81459);const E=({sorting:e,selection:t,selectionDispatch:n,unitIds:i,unitPairComponent:s})=>l().createElement(b.Z,{container:!0,spacing:0},i.map((e=>l().createElement(b.Z,{container:!0,key:e},i.map((t=>l().createElement(b.Z,{key:t,item:!0},l().createElement("div",{className:"plotWrapperStyle"},l().createElement("div",{"data-unit-id1":e,"data-unit-id2":t},l().createElement("div",{className:"plotUnitLabel"},l().createElement("div",null,"Units ",e," vs ",t)),s(e,t)))))))))),y=({sorting:e,selection:t,curation:n,selectionDispatch:i,unitIds:r,width:c,height:o})=>{const a=r.length||1,d=Math.min(220,(c-10*(a+1))/a),u=d,p=(0,s.useMemo)((()=>(s,r)=>l().createElement(h,{sorting:e,selection:t,selectionDispatch:i,curation:n,unitId1:s,unitId2:r,width:d,height:u})),[e,t,i,d,u]);return l().createElement(E,{sorting:e,selection:t,selectionDispatch:i,unitIds:r,unitPairComponent:p})},v=({sorting:e,selection:t,curation:n,selectionDispatch:i,width:r,height:c})=>{const[o,a]=((e,t)=>{const[n,i]=(0,s.useState)([]);return[(0,s.useMemo)((()=>Object.assign(Object.assign({},e),{selectedUnitIds:n})),[n,e]),(0,s.useMemo)((()=>e=>{"SetSelectedUnitIds"===e.type?i(e.selectedUnitIds):t(e)}),[t])]})(t,i);return l().createElement(g.Z,{width:r||600,height:c||900,initialPosition:200},l().createElement(m.Z,{sorting:e,selection:o,selectionDispatch:a,curation:n}),l().createElement(y,Object.assign({sorting:e,selection:o,selectionDispatch:a,curation:n,unitIds:o.selectedUnitIds||[]},{width:0,height:0})))};function j(e){e.registerPlugin({type:"SortingView",name:"Autocorrelograms",label:"Autocorrelograms",priority:50,component:p,icon:l().createElement(i.Z,null),singleton:!0}),e.registerPlugin({type:"SortingView",name:"CrossCorrelograms",label:"Cross-Correlograms",component:v,icon:l().createElement(i.Z,null),singleton:!1})}},86729:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(69297),s=n.n(i),l=n(10051),r=n(95849),c=n(3940);const o=({sorting:e,selection:t,selectionDispatch:n,curation:i})=>{const o=(0,l.D)(e.sortingObject,e.recordingObject);if(!o)return s().createElement("div",null,"No sorting info");const a=((null==o?void 0:o.unit_ids)||[]).filter((e=>!t.applyMerges||(0,r.GI)(e,i)));return s().createElement(c.Z,Object.assign({units:a},{selection:t,selectionDispatch:n,sorting:e,curation:i}))}}}]);