(self.webpackChunklabbox_ephys_widgets_jp=self.webpackChunklabbox_ephys_widgets_jp||[]).push([[486],{45792:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(60352),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".NiceTable .MuiTableCell-root {\n    padding-top: 5px;\n    padding-bottom: 5px;\n    padding-left: 5px;\n    padding-right: 5px;\n}\n\n.NiceTable .MuiIconButton-root {\n    padding: 1px;\n}",""]);const o=i},7756:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(60352),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".link-button {\n  background-color: transparent;\n  border: none;\n  cursor: pointer;\n  text-decoration: underline;\n  display: inline;\n  margin: 0;\n  padding: 0;\n}\n\n.link-button:hover,\n.link-button:focus {\ntext-decoration: none;\n}",""]);const o=i},65350:(e,t,n)=>{"use strict";n.d(t,{N:()=>g});var r=n(50460),i=n(83711),o=n(63514);const s={electrodeBoxes:[],radius:0,pixelRadius:0,dragRegion:null,draggedElectrodeIds:[],hoveredElectrodeId:null},l={border:"rgb(30, 30, 30)",base:"rgb(0, 0, 255)",selected:"rgb(196, 196, 128)",hover:"rgb(128, 128, 255)",selectedHover:"rgb(200, 200, 196)",dragged:"rgb(0, 0, 196)",draggedSelected:"rgb(180, 180, 150)",dragRect:"rgba(196, 196, 196, 0.5)",textLight:"rgb(228, 228, 228)",textDark:"rgb(32, 32, 32)"},c=(e,t)=>{if(e.type!==r.II.Release)return;const{selectionDispatch:n,electrodeOpts:o}=t.getProps();if(o.disableSelection)return;const s=t.getState();if(null===s)return;const l=s.electrodeBoxes.filter((t=>(0,i.Xz)(e.point,[t.x,t.y],s.radius))).map((e=>e.id));if(0===l.length)return void(e.modifiers.ctrl||e.modifiers.shift||s.dragRegion||n({type:"SetSelectedElectrodeIds",selectedElectrodeIds:[]}));const c=l[0],a=t.getProps().selection.selectedElectrodeIds||[];n({type:"SetSelectedElectrodeIds",selectedElectrodeIds:e.modifiers.ctrl?a.includes(c)?a.filter((e=>e!==c)):[...a,c]:e.modifiers.shift?[...a,c]:[c]}),t.scheduleRepaint()},a=(e,t)=>{if(e.type!==r.II.Move)return;const n=t.getState();if(null===n)return;const o=n.electrodeBoxes.filter((t=>(0,i.Xz)(e.point,[t.x,t.y],n.radius))).map((e=>e.id));t.setState(Object.assign(Object.assign({},n),{hoveredElectrodeId:0===o.length?null:o[0]})),t.scheduleRepaint()},d=(e,t)=>{var n,r,o;const s=e.getState(),{selectionDispatch:l,electrodeOpts:c}=e.getProps();if(c.disableSelection)return;if(null===s)return;const a=null!==(n=s.electrodeBoxes.filter((e=>(0,i.Qv)(e.rect,t.dragRect))))&&void 0!==n?n:[];t.released?(l({type:"SetSelectedElectrodeIds",selectedElectrodeIds:[...t.shift&&null!==(o=null===(r=e.getProps())||void 0===r?void 0:r.selection.selectedElectrodeIds)&&void 0!==o?o:[],...a.map((e=>e.id))]}),e.setState(Object.assign(Object.assign({},s),{dragRegion:null,draggedElectrodeIds:[]}))):e.setState(Object.assign(Object.assign({},s),{dragRegion:t.dragRect,draggedElectrodeIds:a.map((e=>e.id))})),e.scheduleRepaint()},g=()=>new r.Fw(((e,t,n)=>{var r,i;const o=t.electrodeOpts,s=o.colors||l,c=o.showLabels;e.wipe();const a=n.pixelRadius>5;for(let l of n.electrodeBoxes){const d=!o.disableSelection&&((null===(r=t.selection.selectedElectrodeIds)||void 0===r?void 0:r.includes(l.id))||!1),g=!o.disableSelection&&n.hoveredElectrodeId===l.id,u=!o.disableSelection&&((null===(i=n.draggedElectrodeIds)||void 0===i?void 0:i.includes(l.id))||!1),m=d?u?s.draggedSelected:s.selectedHover:u?s.dragged:g?s.hover:s.base,p=t.layoutMode;if("geom"===p?(e.fillEllipse(l.rect,{color:m}),e.drawEllipse(l.rect,{color:s.border})):"vertical"===p&&e.drawLine(l.rect.xmin,(l.rect.ymin+l.rect.ymax)/2,l.rect.xmax,(l.rect.ymin+l.rect.ymax)/2,{color:s.border}),a){const t=[s.selected,s.draggedSelected,s.hover,s.selectedHover].includes(m)?s.textDark:s.textLight;c&&e.drawText({rect:l.rect,alignment:{Horizontal:"AlignCenter",Vertical:"AlignCenter"},font:{pixelSize:n.pixelRadius,family:"Arial"},pen:{color:t},brush:{color:t},text:l.label})}}n.dragRegion&&e.fillRect(n.dragRegion,{color:s.dragRect})}),((e,t)=>{const n=e.getState(),{width:r,height:i,electrodeLocations:s,electrodeIds:l,layoutMode:c}=t,{electrodeBoxes:a,transform:d,radius:g,pixelRadius:u}=(0,o.Z)({width:r,height:i,electrodeLocations:s,electrodeIds:l,layoutMode:c,maxElectrodePixelRadius:t.electrodeOpts.maxElectrodePixelRadius});e.setTransformMatrix(d),e.setState(Object.assign(Object.assign({},n),{electrodeBoxes:a,radius:g,pixelRadius:u})),e.scheduleRepaint()}),s,{discreteMouseEventHandlers:[c,a],dragHandlers:[d]})},63514:(e,t,n)=>{"use strict";n.d(t,{g:()=>d,Z:()=>g});var r=n(59739),i=n(24059),o=n(83711),s=n(89382);const l=new Map,c=e=>{const t=JSON.stringify(e),n=l.get(t);if(void 0!==n)return n;let i=Number.MAX_VALUE;e.forEach((t=>{e.forEach((e=>{const n=(0,r.KOy)([t[0]-e[0],t[1]-e[1]]);0!==n&&(i=Math.min(i,n))}))}));const o=.45*i;return l.set(t,o),o},a=(e,t)=>({xmin:(0,s.Gt)(e.map((e=>e[0])))-t,xmax:(0,s.lR)(e.map((e=>e[0])))+t,ymin:(0,s.Gt)(e.map((e=>e[1])))-t,ymax:(0,s.lR)(e.map((e=>e[1])))+t}),d=e=>{const t=c(e),n=a(e,t);return(0,o.dz)(n)/(0,o.Cr)(n)},g=e=>{const{width:t,height:n,electrodeLocations:r,electrodeIds:l,layoutMode:d}=e;if("vertical"===d)return(({width:e,height:t,electrodeIds:n})=>{const r=n.length,o=(0,i.As)((n=>[10+n[0]*(e-20),10+n[1]*(t-20)]));return{electrodeBoxes:n.map(((e,t)=>{const n=(.5+t)/(r+1),o={xmin:0,xmax:1,ymin:n-.5/(r+1),ymax:n+.5/(r+1)},s=(0,i.As)((e=>[o.xmin+e[0]*(o.xmax-o.xmin),o.ymin+e[1]*(o.ymax-o.ymin)]));return{label:e+"",id:e,x:.5,y:n,rect:o,transform:s}})),transform:o,radius:1/(r+1),pixelRadius:(t-20)/(r+1)}})({width:t,height:n,electrodeIds:l});const g=(e=>{const t=(0,s.Gt)(e.map((e=>e[0]))),n=(0,s.lR)(e.map((e=>e[0]))),r=(0,s.Gt)(e.map((e=>e[1]))),i=(0,s.lR)(e.map((e=>e[1])));return t===n&&r===i?e.map(((e,t)=>[t,0])):e})(r),u=t-20,m=n-20,p=u/m,b=c(g);let h,E=a(g,b),_=(0,o.dz)(E)/(0,o.Cr)(E),f=g;_>1!=p>1&&(f=g.map((e=>[e[1],-e[0]])),E={xmin:E.ymin,xmax:E.ymax,ymin:-E.xmax,ymax:-E.xmin},_=(0,o.dz)(E)/(0,o.Cr)(E)),h=_>p?u/(0,o.dz)(E):m/(0,o.Cr)(E),e.maxElectrodePixelRadius&&b*h>e.maxElectrodePixelRadius&&(h/=b*h/e.maxElectrodePixelRadius);const y=(t-(0,o.dz)(E)*h)/2,k=(n-(0,o.Cr)(E)*h)/2,w=(0,i.As)((e=>[y+(e[0]-E.xmin)*h,k+(e[1]-E.ymin)*h])),x=f.map(((e,t)=>{const n=e[0],r=e[1],s=(0,o.jU)([n,r],b,b),c=(0,i.As)((e=>[s.xmin+e[0]*(s.xmax-s.xmin),s.ymin+e[1]*(s.ymax-s.ymin)]));return{label:l[t]+"",id:l[t],x:n,y:r,rect:s,transform:c}})),I=(0,o.ur)(w,[b,0])[0];return{electrodeBoxes:x,transform:w,radius:b,pixelRadius:I}}},6750:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(66395),i=n(31397),o=n(15891),s=n(69297),l=n.n(s);const c=e=>l().createElement(r.Z,{TransitionProps:{unmountOnExit:void 0===e.unmountOnExit||e.unmountOnExit},defaultExpanded:e.defaultExpanded},l().createElement(i.Z,null,e.icon&&l().createElement("span",{style:{paddingRight:10}},e.icon),l().createElement("span",{style:{paddingTop:3}},e.label)),l().createElement(o.Z,null,l().createElement("div",{style:{width:"100%"}},e.children)))},20864:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(69297),i=n.n(r);const o=({color:e,onClick:t,children:n})=>{let r={color:e||"gray",cursor:"pointer",textDecoration:"underline"};return i().createElement("span",{style:r,onClick:t},n)}},93055:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d}),n(239);var r=n(69297),i=n.n(r),o=n(74788),s=n.n(o),l=n(85232),c=n(12919);const a=({value:e,language:t})=>i().createElement(l.Z,{language:t,style:c.Z},e),d=({source:e,substitute:t})=>{const n=t?((e,t)=>{let n=e;for(let e in t)n=n.split(`{${e}}`).join(t[e]||"");return n})(e,t):e;return i().createElement("div",{className:"markdown-body"},i().createElement(s(),{source:n,renderers:{code:a}}))}},67539:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(22682),i=n(37450),o=n(2197),s=n(92378),l=n(62198),c=n(12930),a=n(39110),d=n(23801),g=n(816),u=n(69297),m=n.n(u),p=n(93379),b=n.n(p),h=n(45792);b()(h.Z,{insert:"head",singleton:!1}),h.Z.locals;const E=({title:e,rowKey:t,onDeleteRow:n})=>{const r=(0,u.useCallback)((()=>{n&&n(t)}),[n,t]);return m().createElement(a.Z,{title:e,onClick:r},m().createElement(d.Z,null))},_=({title:e,rowKey:t,onConfirmDeleteRow:n})=>{const r=(0,u.useCallback)((()=>{n&&n(t,!0)}),[n,t]),i=(0,u.useCallback)((()=>{n&&n(t,!1)}),[n,t]);return m().createElement("span",null,"Confirm delete?",m().createElement(a.Z,{title:e,onClick:r},m().createElement(d.Z,null)),m().createElement(a.Z,{title:"Cancel",onClick:i},"âœ–"))},f=({title:e,rowKey:t,onEditRow:n})=>m().createElement(a.Z,{title:e,onClick:()=>n&&n(t)},m().createElement(g.Z,null)),y=({rows:e,columns:t,onDeleteRow:n,deleteRowLabel:a,onEditRow:d,editRowLabel:g,selectionMode:p="none",selectedRowKeys:b={},onSelectedRowKeysChanged:h})=>{const y=(0,u.useMemo)((()=>{const e={};return Object.keys(b).forEach((t=>{e[t]=b[t]})),e}),[b]),[k,w]=(0,u.useState)(null),x=(0,u.useCallback)((e=>{h&&("single"===p?e in y&&y[e]?h([]):h([e+""]):"multiple"===p&&h(Object.keys(y).filter((t=>t!=e&&y[t])).concat(y[e]?[]:[e.toString()])))}),[h,p,y]),I=(0,u.useCallback)((e=>{w(e)}),[]),R=(0,u.useCallback)(((e,t)=>{t&&n&&n(e),w(null)}),[n]),v=(0,u.useCallback)((e=>{d&&d(e)}),[d]);return m().createElement(r.Z,{className:"NiceTable"},m().createElement(i.Z,null,m().createElement(o.Z,null,m().createElement(s.Z,{key:"_first",style:{width:0}}),t.map((e=>m().createElement(s.Z,{key:e.key},m().createElement("span",null,e.label)))))),m().createElement(l.Z,null,e.map((e=>m().createElement(o.Z,{key:e.key},m().createElement(s.Z,null,n&&(k===e.key?m().createElement(_,{title:a||"",onConfirmDeleteRow:R,rowKey:e.key}):m().createElement(E,{title:a||"",onDeleteRow:I,rowKey:e.key})),d&&m().createElement(f,{title:g||"",onEditRow:v,rowKey:e.key}),"none"!==p&&m().createElement(c.Z,{checked:y[e.key]||!1,onClick:()=>x(e.key)})),t.map((t=>{return m().createElement(s.Z,{key:t.key},m().createElement("span",null,0==(n=e.columnValues[t.key])?n:n?"object"==typeof n?n.element?n.element:n.text||"":n:""));var n})))))))}},3527:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(69297),i=n.n(r),o=n(31315),s=n.n(o);const l=e=>{var t,n,o;const{width:l,height:c,initialPosition:a,onChange:d,adjustable:g=!0,positionFromRight:u=!1}=e,[m,p]=(0,r.useState)(a);if(!e.children)throw Error("Unexpected: no props.children");let b,h;if(Array.isArray(e.children)){const t=e.children.filter((e=>void 0!==e));b=t[0],h=t[1]||null}else b=e.children,h=null;if(!h)return i().createElement(b.type,Object.assign({},b.props,{width:l,height:c}));const E=u?l-m:m,_=g?null!==(t=e.gripThickness)&&void 0!==t?t:10:0,f=g?null!==(n=e.gripInnerThickness)&&void 0!==n?n:4:0,y=g?null!==(o=e.gripMargin)&&void 0!==o?o:2:0,k=E-_/2-y,w=l-k-_-2*y;let x={top:0,left:0,width:l,height:c},I={left:0,top:0,width:k,height:c,zIndex:0,overflowY:"auto",overflowX:"hidden"},R={left:k+_+2*y,top:0,width:w,height:c,zIndex:0,overflowY:"auto",overflowX:"hidden"},v={left:0,top:0,width:_+2*y,height:c,backgroundColor:"transparent",cursor:"col-resize",zIndex:9998},j={left:y,top:0,width:_,height:c,background:"rgb(230, 230, 230)",cursor:"col-resize"},O={top:0,left:(_-f)/2,width:f,height:c,background:"gray",cursor:"col-resize"};return i().createElement("div",{className:"splitter",style:Object.assign(Object.assign({},x),{position:"relative"})},i().createElement("div",{key:"child1",style:Object.assign(Object.assign({},I),{position:"absolute"}),className:"SplitterChild"},i().createElement(b.type,Object.assign({},b.props,{width:k,height:c}))),g&&i().createElement(s(),{key:"drag",position:{x:E-_/2-y,y:0},axis:"x",onDrag:(e,t)=>{},onStop:(e,t)=>((e,t)=>{const n=t.x;if(n===E)return;const r=u?l-n:n;p(r),d&&d(r)})(0,t)},i().createElement("div",{style:Object.assign(Object.assign({},v),{position:"absolute"})},i().createElement("div",{style:Object.assign(Object.assign({},j),{position:"absolute"})},i().createElement("div",{style:Object.assign(Object.assign({},O),{position:"absolute"})})))),i().createElement("div",{key:"child2",style:Object.assign(Object.assign({},R),{position:"absolute"}),className:"SplitterChild"},i().createElement(h.type,Object.assign({},h.props,{width:w,height:c}))))}},15743:(e,t,n)=>{"use strict";n.d(t,{F0:()=>o,ZL:()=>s});var r=n(5443),i=n(69297);const o=e=>{const{result:t}=(0,r.lG)(e?"createjob_get_recording_info":"",{recording_object:e},{useClientCache:!0});return t},s=e=>{const t=(0,i.useContext)(r.Zo),n=(0,i.useRef)({}),[,o]=(0,i.useState)(0),s={};return e.forEach((e=>{const r=e.recordingId;if(!n.current[r]){const i=t.createHitherJob("createjob_get_recording_info",{recording_object:e.recordingObject},{useClientCache:!0});n.current[r]=i,i.wait().then((()=>{o((e=>e+1))})).catch((()=>{o((e=>e+1))}))}n.current[r].result&&(s[r]=n.current[r].result)})),s}},10051:(e,t,n)=>{"use strict";n.d(t,{D:()=>o,h:()=>s});var r=n(5443),i=n(69297);const o=(e,t)=>{const{result:n}=(0,r.lG)(e?"createjob_get_sorting_info":"",{sorting_object:e,recording_object:t},{useClientCache:!0});return n},s=e=>{const t=(0,i.useContext)(r.Zo),n=(0,i.useRef)({}),[,o]=(0,i.useState)(0),s={};return e.forEach((e=>{const r=e.sortingId;if(!n.current[r]){const i=t.createHitherJob("createjob_get_sorting_info",{recording_object:e.recordingObject,sorting_object:e.sortingObject},{useClientCache:!0});n.current[r]=i,i.wait().then((()=>{o((e=>e+1))})).catch((()=>{o((e=>e+1))}))}n.current[r].result&&(s[r]=n.current[r].result)})),s}},13344:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(69297),i=n.n(r),o=n(65350),s=n(24059),l=n(50460);const c=e=>{const t=(0,r.useMemo)((()=>({layoutMode:"geom",electrodeIds:e.electrodes.map((e=>e.id)),electrodeLocations:e.electrodes.map((e=>[e.x,e.y])),width:e.width,height:e.height,selection:e.selection,selectionDispatch:e.selectionDispatch,electrodeOpts:{showLabels:!0,maxElectrodePixelRadius:25},noiseLevel:0,samplingFrequency:0})),[e]),n=(0,l.sJ)(o.N,t),c=(0,l.jU)([n]);return i().createElement(s.ZP,Object.assign({key:"electrodeGeometryCanvas",layers:c},{width:e.width,height:e.height}))}},95849:(e,t,n)=>{"use strict";n.d(t,{kN:()=>a,GI:()=>d,CC:()=>c,Zl:()=>s,_S:()=>b,SF:()=>g,fG:()=>E,fB:()=>h,Sd:()=>p,FO:()=>_});var r=n(5443),i=n(69297);const o=(e,t)=>{if(e.min<=t&&t<e.max)return e;const n=e.max-e.min,r=Math.max(0,Math.floor(t-n/2));return{min:r,max:r+n}},s=(e,t)=>{var n,r,i,s;if("SetRecordingSelection"===t.type)return Object.assign({},t.recordingSelection);if("SetSelectedElectrodeIds"===t.type)return Object.assign(Object.assign({},e),{selectedElectrodeIds:t.selectedElectrodeIds.filter((t=>!e.visibleElectrodeIds||e.visibleElectrodeIds.includes(t)))});if("SetVisibleElectrodeIds"===t.type)return Object.assign(Object.assign({},e),{visibleElectrodeIds:t.visibleElectrodeIds,selectedElectrodeIds:e.selectedElectrodeIds?e.selectedElectrodeIds.filter((e=>t.visibleElectrodeIds.includes(e))):void 0});if("SetCurrentTimepoint"===t.type)return Object.assign(Object.assign({},e),{currentTimepoint:t.currentTimepoint||void 0,timeRange:t.ensureInRange&&e.timeRange&&null!==t.currentTimepoint?o(e.timeRange,t.currentTimepoint):e.timeRange});if("SetTimeRange"===t.type)return Object.assign(Object.assign({},e),{timeRange:t.timeRange});if("ZoomTimeRange"===t.type){const i=9e6,o=e.currentTimepoint,s=e.timeRange;if(!s)return e;const c=null!==(n=t.direction)&&void 0!==n?n:"in",a=null!==(r=t.factor)&&void 0!==r?r:1.4,d="out"===c?1/a:a;if((s.max-s.min)/d>i)return e;let g;g=void 0===o||o<s.min?s.min:o>s.max?s.max:o;const u=l(s,d,g);return Object.assign(Object.assign({},e),{timeRange:u})}if("SetAmpScaleFactor"===t.type)return Object.assign(Object.assign({},e),{ampScaleFactor:t.ampScaleFactor});if("ScaleAmpScaleFactor"===t.type){const n=null!==(i=t.direction)&&void 0!==i?i:"up",r=null!==(s=t.multiplier)&&void 0!==s?s:1.4,o="down"===n?1/r:r;return Object.assign(Object.assign({},e),{ampScaleFactor:(e.ampScaleFactor||1)*o})}return"SetCurrentTimepointVelocity"===t.type?Object.assign(Object.assign({},e),{animation:Object.assign(Object.assign({},e.animation||{}),{currentTimepointVelocity:t.velocity})}):"SetWaveformsMode"===t.type?Object.assign(Object.assign({},e),{waveformsMode:t.waveformsMode}):"Set"===t.type?t.state:e},l=(e,t,n)=>{const r=n+(e.min-n)/t,i=n+(e.max-n)/t;return{min:Math.floor(r),max:Math.floor(i)}},c=(e,t)=>((t||{}).mergeGroups||[]).filter((t=>t.includes(e)))[0]||null,a=(e,t,n)=>n&&c(e,t)||e,d=(e,t)=>{const n=c(e,t);return!n||Math.min(...n)===e},g=(e,t)=>"SetSelection"===t.type?t.selection:"SetSelectedUnitIds"===t.type?Object.assign(Object.assign({},e),{selectedUnitIds:t.selectedUnitIds.filter((t=>{var n;return!e.visibleUnitIds||(null===(n=e.visibleUnitIds)||void 0===n?void 0:n.includes(t))}))}):"SetVisibleUnitIds"===t.type?Object.assign(Object.assign({},e),{selectedUnitIds:e.selectedUnitIds?e.selectedUnitIds.filter((e=>{var n;return null===(n=t.visibleUnitIds)||void 0===n?void 0:n.includes(e)})):void 0,visibleUnitIds:t.visibleUnitIds}):"UnitClicked"===t.type?((e,t)=>{const n=t.unitId;return t.ctrlKey?(e.selectedUnitIds||[]).includes(n)?Object.assign(Object.assign({},e),{selectedUnitIds:(e.selectedUnitIds||[]).filter((e=>e!==n))}):Object.assign(Object.assign({},e),{selectedUnitIds:[...e.selectedUnitIds||[],n]}):Object.assign(Object.assign({},e),{selectedUnitIds:[n]})})(e,t):"Set"===t.type?t.state:"ToggleApplyMerges"===t.type?u(Object.assign(Object.assign({},e),{applyMerges:!e.applyMerges}),t.curation):s(e,t),u=(e,t)=>e.applyMerges&&t?Object.assign(Object.assign({},e),{selectedUnitIds:e.selectedUnitIds?e.selectedUnitIds.filter((e=>d(e,t))):void 0}):e,m=e=>e.filter((e=>!e.disabled&&!e.development)),p=e=>m(e).filter((e=>"SortingView"===e.type)).map((e=>e)),b=e=>m(e).filter((e=>"RecordingView"===e.type)).map((e=>e)),h=e=>m(e).filter((e=>"SortingUnitView"===e.type)).map((e=>e)),E=e=>m(e).filter((e=>"SortingUnitMetric"===e.type)).map((e=>e)),_=()=>{const e=(0,r._m)();return(0,i.useMemo)((()=>e.filter((e=>"WorkspaceView"===e.type)).map((e=>e))),[e])}},46470:(e,t,n)=>{"use strict";n.d(t,{x:()=>r});const r=e=>{if(!e)return{feedUri:void 0,feedId:void 0};if(!e.startsWith("workspace://"))return{feedUri:void 0,feedId:void 0};const t=e.split("?")[0].split("/")[2]||void 0;return t?{feedId:t,feedUri:`feed://${t}`}:{feedUri:void 0,feedId:void 0}}},6425:(e,t,n)=>{"use strict";n.d(t,{j:()=>r,Z:()=>l});const r=(e,t)=>{if("SET_CURATION"===t.type)return t.curation;if("ADD_UNIT_LABEL"===t.type){const n=t.unitId+"",r=(e.labelsByUnit||{})[n]||[];return r.includes(t.label)?e:Object.assign(Object.assign({},e),{labelsByUnit:Object.assign(Object.assign({},e.labelsByUnit),{[n]:[...r,t.label].sort()})})}if("REMOVE_UNIT_LABEL"===t.type){const n=t.unitId+"",r=(e.labelsByUnit||{})[n]||[];return r.includes(t.label)?Object.assign(Object.assign({},e),{labelsByUnit:Object.assign(Object.assign({},e.labelsByUnit),{[n]:r.filter((e=>e!==t.label))})}):e}return"MERGE_UNITS"===t.type?Object.assign(Object.assign({},e),{mergeGroups:s([...e.mergeGroups||[],t.unitIds])}):"UNMERGE_UNITS"===t.type?Object.assign(Object.assign({},e),{mergeGroups:s((e.mergeGroups||[]).map((e=>e.filter((e=>!t.unitIds.includes(e))))))}):e},i=(e,t)=>e.filter((e=>t.includes(e))),o=(e,t)=>[...e,...t.filter((t=>!e.includes(t)))].sort(),s=e=>{const t=e.map((e=>[...e]));let n=!0;for(;n;){n=!1;for(let e=0;e<t.length;e++){const r=t[e];for(let s=e+1;s<t.length;s++){const l=t[s];i(r,l).length>0&&(t[e]=o(r,l),t[s]=[],n=!0)}}}return t.filter((e=>e.length>=2))},l=(e,t)=>{switch(t.type){case"ADD_RECORDING":return Object.assign(Object.assign({},e),{recordings:[...e.recordings.filter((e=>e.recordingId!==t.recording.recordingId)),t.recording]});case"DELETE_RECORDINGS":return Object.assign(Object.assign({},e),{recordings:e.recordings.filter((e=>!t.recordingIds.includes(e.recordingId)))});case"ADD_SORTING":return Object.assign(Object.assign({},e),{sortings:[...e.sortings.filter((e=>e.sortingId!==t.sorting.sortingId)),t.sorting]});case"DELETE_SORTINGS":return Object.assign(Object.assign({},e),{sortings:e.sortings.filter((e=>!t.sortingIds.includes(e.sortingId)))});case"DELETE_SORTINGS_FOR_RECORDINGS":return Object.assign(Object.assign({},e),{sortings:e.sortings.filter((e=>!t.recordingIds.includes(e.recordingId)))});case"SET_UNIT_METRICS_FOR_SORTING":return Object.assign(Object.assign({},e),{sortings:e.sortings.map((e=>e.sortingId===t.unitMetricsForSorting.sortingId?Object.assign(Object.assign({},e),{unitMetricsUri:t.unitMetricsForSorting.metricsUri}):e))});default:return e}}},36486:(e,t,n)=>{"use strict";n.r(t),n.d(t,{activate:()=>ee});var r=n(69297),i=n.n(r),o=n(5443),s=n(20864),l=n(15743),c=n(10051),a=n(95849),d=n(46470),g=n(6425);const u=(0,o.zy)({maxSimultaneous:6}),m=e=>{(0,r.useContext)(o.Zo);const{workspaceRoute:t,readOnly:n,sorting:m,recording:p,workspaceRouteDispatch:b}=e,[h,E]=(0,r.useReducer)(a.SF,{}),_=(0,c.D)(m?m.sortingObject:null,m?m.recordingObject:null),f=(0,l.F0)(p.recordingObject),y=m?m.sortingId:null,{feedUri:k}=(0,d.x)(t.workspaceUri),[w,x]=(0,r.useReducer)(g.j,(0,r.useMemo)((()=>({})),[])),I=(0,r.useCallback)((e=>{e.forEach((e=>x(e)))}),[]),R=(0,r.useMemo)((()=>({name:"sortingCuration",sortingId:y})),[y]),{appendMessages:v}=(0,o.Rs)({feedUri:k,subfeedName:R,onMessages:I}),j=(0,r.useCallback)((e=>{v([e])}),[v]);(0,r.useEffect)((()=>{!h.timeRange&&f&&E({type:"SetTimeRange",timeRange:{min:0,max:Math.min(f.num_frames,f.sampling_frequency/10)}})}),[h,f]);const O=e.width||800,S=e.height||800,C=(0,r.useMemo)((()=>({position:"absolute",left:0,top:S-20,width:O,height:20,overflow:"hidden"})),[O,S,20]),Z=O,U=S-20,D=(0,r.useMemo)((()=>({position:"absolute",left:0,top:0,width:Z,height:U})),[Z,U]),M=(0,o._m)(),T=(0,a.Sd)(M).filter((e=>"MVSortingView"===e.name))[0];if(!T)throw Error("Missing sorting view: MVSortingView");const L=(0,r.useMemo)((()=>T.props||{}),[T.props]),N=(0,r.useCallback)((()=>{b({type:"gotoRecordingPage",recordingId:p.recordingId})}),[b,p.recordingId]),F=(0,r.useMemo)((()=>({sortingId:"",sortingLabel:"",sortingPath:"",sortingObject:null,recordingId:"",recordingPath:"",recordingObject:null})),[]),P=(0,r.useMemo)((()=>({unit_ids:[],samplerate:0})),[]);return!p&&m?i().createElement("h3",null,`Recording not found: ${m.recordingId}`):f?!_&&m?i().createElement("h3",null,"Loading sorting info..."):i().createElement("div",null,i().createElement("div",{style:D},i().createElement(T.component,Object.assign({},L,{sorting:m||F,recording:p,sortingInfo:_||P,recordingInfo:f,selection:h,selectionDispatch:E,curation:w,curationDispatch:j,readOnly:n,calculationPool:u,width:Z,height:U}))),i().createElement("div",{style:C},m?i().createElement("span",null,"Sorting: ",m.sortingLabel," | Recording: ",i().createElement(s.Z,{onClick:N},p.recordingLabel)):i().createElement("span",null,"Recording: ",i().createElement(s.Z,{onClick:N},p.recordingLabel)))):i().createElement("h3",null,"Loading recording info...")};var p=n(95898),b=n(3527),h=n(6750),E=n(93055);const _="import spikeextractors as se\nimport numpy as np\nimport labbox_ephys as le\nimport kachery_p2p as kp\n\n# adjust these values\nworkspace_uri = '{workspaceUri}'\nrecording_label = 'simulated_recording'\nduration_sec = 50 # duration of simulated recording\nnum_channels = 8 # num. channels in simulated recording\nnum_units = 5 # num units\nseed = 1 # random number generator seed\n\ndef prepare_recording_sorting():\n    # Simulate a recording (toy example)\n    recording, sorting = se.example_datasets.toy_example(duration=duration_sec, num_channels=num_channels, K=num_units, seed=seed)\n    R = le.LabboxEphysRecordingExtractor.from_memory(recording, serialize=True, serialize_dtype=np.int16)\n    S = le.LabboxEphysSortingExtractor.from_memory(sorting, serialize=True)\n    return R, S\n\nrecording, sorting_true = prepare_recording_sorting()\nsorting_label = 'true'\nworkspace = le.load_workspace(workspace_uri)\nprint(f'Workspace URI: {workspace.get_uri()}')\nR_id = workspace.add_recording(recording=recording, label=recording_label)\nS_id = workspace.add_sorting(sorting=sorting_true, recording_id=R_id, label=sorting_label)",f="import spikeextractors as se\nimport numpy as np\nimport labbox_ephys as le\nimport kachery_p2p as kp\n\n\n# Adjust these values\nrecording_label = 'despy_tet3'\nsorting_label = 'sorting'\nrecording_nwb_path = '<path or URI of nwb recording>'\nsorting_nwb_path = '<path or URI of nwb sorting>'\nworkspace_uri = '{workspaceUri}'\n\nrecording_uri = kp.store_object({\n    'recording_format': 'nwb',\n    'data': {\n        'path': recording_nwb_path\n    }\n})\nsorting_uri = kp.store_object({\n    'sorting_format': 'nwb',\n    'data': {\n        'path': sorting_nwb_path\n    }\n})\n\nsorting = le.LabboxEphysSortingExtractor(sorting_uri, samplerate=30000)\nrecording = le.LabboxEphysRecordingExtractor(recording_uri, download=True)\n\nworkspace = le.load_workspace(workspace_uri)\nprint(f'Workspace URI: {workspace.get_uri()}')\nR_id = workspace.add_recording(recording=recording, label=recording_label)\nS_id = workspace.add_sorting(sorting=sorting, recording_id=R_id, label=sorting_label)",y='import spikeextractors as se\nimport numpy as np\nimport labbox_ephys as le\nimport kachery_p2p as kp\n\n# Here are some examples to select from\nX1 = {\n    "label": "SF/synth_magland_noise10_K10_C4/001_synth",\n    "recording_uri": "sha1://f060669aadaa0f8ebe296bf72895df3899f8cf45/SF/synth_magland_noise10_K10_C4/001_synth.json",\n    "sorting_true_uri": "sha1://5b07e41bf62c045a549242c0caa866d272a33ab8/firings_true.mda"\n}\nX2 = {\n    "label": "SF/PAIRED_BOYDEN/paired_boyden32c/419_1_7",\n    "recording_uri": "sha1://759c81e6e20d3c352eaff6ce5d4dc7f948c45f25/SF/PAIRED_BOYDEN/paired_boyden32c/419_1_7.json",\n    "sorting_true_uri": "sha1://a5b7de64d7a2a96c0e1af70cdb2d4ae927e4949d/firings_true.mda"\n}\nX3 = {\n    "label": "SF/PAIRED_KAMPFF/paired_kampff/2014_11_25_Pair_3_0",\n    "recording_uri": "sha1://a205f87cef8b7f86df7a09cddbc79a1fbe5df60f/SF/PAIRED_KAMPFF/paired_kampff/2014_11_25_Pair_3_0.json",\n    "sorting_true_uri": "sha1://1cd517687aeca7ecdfaa9695680038d142a75031/firings_true.mda"\n}\n# To find more examples, see: https://github.com/flatironinstitute/spikeforest_recordings\n# However: note that some processing needs to be done to the files in this repo (to add the manifests to the raw data). This is WIP\n\n# Adjust these values ###########################\nX = X1 # Select example from above\nworkspace_uri = \'{workspaceUri}\'\n#################################################\n\nrecording_label = X[\'label\']\nrecording_uri = X[\'recording_uri\']\nsorting_true_uri = X[\'sorting_true_uri\']\nrecording = le.LabboxEphysRecordingExtractor(recording_uri, download=True)\nsorting_true = le.LabboxEphysSortingExtractor(sorting_true_uri, samplerate=30000)\n\nsorting_label = \'true\'\nworkspace = le.load_workspace(workspace_uri)\nprint(f\'Workspace URI: {workspace.get_uri()}\')\nR_id = workspace.add_recording(recording=recording, label=recording_label)\nS_id = workspace.add_sorting(sorting=sorting_true, recording_id=R_id, label=sorting_label)',k=e=>"```python\n"+e+"\n```",w=({text:e})=>{const[t,n]=(0,r.useState)(!1),o=(0,r.useCallback)((()=>{window.isSecureContext?(navigator.clipboard.writeText(e),n(!0),setTimeout((()=>{n(!1)}),3e3)):window.alert("Unable to copy to clipbard (not a secure context). This is probably because this site uses http rather than https.")}),[e]);return i().createElement("button",{onClick:o},t?"Copied":"Copy to clipboard")},x=({workspaceRoute:e})=>{const t=t=>((e,t)=>{let n=e;for(let e in t)n=n.split(`{${e}}`).join(t[e]||"");return n})(t,{workspaceUri:e.workspaceUri});return i().createElement("div",null,i().createElement(E.Z,{source:"## Importing recordings\n\nTo import a recording into labbox-ephys, you can run a Python script on the computer where labbox-ephys is installed, or from a kachery node that has the appropriate access. See the example scripts below."}),i().createElement(h.Z,{label:"Import example simulated recording"},i().createElement(w,{text:t(_)}),i().createElement(E.Z,{source:k(t(_))})),i().createElement(h.Z,{label:"Import SpikeForest recordings"},i().createElement(w,{text:t(y)}),i().createElement(E.Z,{source:k(t(y))})),i().createElement(h.Z,{label:"Import NWB recordings"},i().createElement(w,{text:t(f)}),i().createElement(E.Z,{source:k(t(f))})))};var I=n(53167),R=n(67539),v=n(93379),j=n.n(v),O=n(7756);j()(O.Z,{insert:"head",singleton:!1}),O.Z.locals;const S=e=>i().createElement("span",null,e.map((e=>{return t=e,i().createElement("span",{key:t.sortingId},t.sortingId," (","",")");var t}))),C=({recording:e,onClick:t})=>{const n=(0,r.useCallback)((()=>{t(e)}),[e,t]);return i().createElement(Z,{title:"View recording",onClick:n},e.recordingLabel)},Z=({title:e,children:t,onClick:n})=>i().createElement("button",{type:"button",className:"link-button",onClick:n},t),U=({recordings:e,sortings:t,onDeleteRecordings:n,readOnly:o,workspaceRouteDispatch:s})=>{const c=(0,r.useMemo)((()=>{const n={};return e.forEach((e=>{n[e.recordingId]=t.filter((t=>t.recordingId===e.recordingId))})),n}),[e,t]);var a;a="recordingLabel",e=e.sort((function(e,t){var n=e[a],r=t[a];return n<r?-1:n>r?1:0}));const d=(0,r.useCallback)((e=>{s({type:"gotoRecordingPage",recordingId:e.recordingId})}),[s]),g=(0,l.ZL)(e),u=(0,r.useMemo)((()=>e.map((e=>{const t=g[e.recordingId];return{key:e.recordingId,columnValues:{recording:e,recordingLabel:{text:e.recordingLabel,element:i().createElement(C,{onClick:d,recording:e})},numChannels:t?t.channel_ids.length:{element:i().createElement(I.Z,null)},samplingFrequency:t?t.sampling_frequency:"",durationMinutes:t?t.num_frames/t.sampling_frequency/60:"",sortings:{element:S(c[e.recordingId])}}}}))),[e,c,d,g]),m=(0,r.useCallback)((e=>{n&&n([e])}),[n]);return i().createElement("div",null,i().createElement(R.Z,{rows:u,columns:[{key:"recordingLabel",label:"Recording"},{key:"numChannels",label:"Num. channels"},{key:"samplingFrequency",label:"Samp. freq. (Hz)"},{key:"durationMinutes",label:"Duration (min)"},{key:"sortings",label:"Sortings"}],deleteRowLabel:"Remove this recording",onDeleteRow:o?void 0:m}))},D=({width:e,height:t,sortings:n,recordings:o,onDeleteRecordings:s,workspaceRoute:l,workspaceRouteDispatch:c})=>{const[a,d]=(0,r.useState)(!1),g=(0,r.useCallback)((()=>{d(!0)}),[]);return i().createElement(b.Z,Object.assign({},{width:e,height:t},{initialPosition:300,positionFromRight:!0}),i().createElement("div",null,!a&&i().createElement("div",null,i().createElement(p.Z,{onClick:g},"Import recordings")),i().createElement(U,Object.assign({},{sortings:n,recordings:o,onDeleteRecordings:s,readOnly:!1,workspaceRouteDispatch:c}))),a&&i().createElement(x,{workspaceRoute:l}))};var M=n(81459),T=n(22682),L=n(37450),N=n(62198),F=n(2197),P=n(92378),G=n(13344);const A=({sampling_frequency:e,channel_ids:t,channel_groups:n,num_frames:r,noise_level:o})=>i().createElement(T.Z,{className:"NiceTable"},i().createElement(L.Z,null),i().createElement(N.Z,null,i().createElement(F.Z,null,i().createElement(P.Z,null,"Sampling frequency"),i().createElement(P.Z,null,e)),i().createElement(F.Z,null,i().createElement(P.Z,null,"Num. frames"),i().createElement(P.Z,null,r)),i().createElement(F.Z,null,i().createElement(P.Z,null,"Duration (min)"),i().createElement(P.Z,null,r/e/60)),i().createElement(F.Z,null,i().createElement(P.Z,null,"Num. channels"),i().createElement(P.Z,null,t.length)),i().createElement(F.Z,null,i().createElement(P.Z,null,"Channel IDs"),i().createElement(P.Z,null,t.length<20?B(t):B(t.slice(0,20))+" ...")),i().createElement(F.Z,null,i().createElement(P.Z,null,"Channel groups"),i().createElement(P.Z,null,n.length<20?B(n):B(n.slice(0,20))+" ...")),i().createElement(F.Z,null,i().createElement(P.Z,null,"Noise level"),i().createElement(P.Z,null,o))));function B(e){return e.map((e=>e+"")).join(", ")}const V=({recordingInfo:e,hideElectrodeGeometry:t})=>{const n=e,o=(0,r.useMemo)((()=>n?((e,t)=>{if(e&&t&&t.length!==e.length)throw Error("Electrode ID count does not match location count.");return t.map(((t,n)=>{const r=e[n];return{label:t+"",x:r[0],y:r[1],id:t}}))})(n.geom,n.channel_ids):[]),[n]),[s,l]=(0,r.useReducer)(a.Zl,{});return n?i().createElement(i().Fragment,null,i().createElement("div",{style:{width:600}},i().createElement(A,{sampling_frequency:n.sampling_frequency,num_frames:n.num_frames,channel_ids:n.channel_ids,channel_groups:n.channel_groups,noise_level:n.noise_level})),!t&&i().createElement(G.Z,{electrodes:o,selection:s,selectionDispatch:l,width:350,height:150})):i().createElement("div",null,"No recording info found for recording.")},z="# Prerequisites:\n#    SpikeInterface/spikesorters: `pip install spikesorters`\n#    SpyKING CIRCUS: `pip install spyking-circus`\n#    On Ubuntu, the following are required for spyking circus:\n#        pip install pyqt5\n#        apt install qt5-default\n#    For more information: https://spyking-circus.readthedocs.io/en/latest/introduction/install.html\n\nimport spikeextractors as se\nimport numpy as np\nimport labbox_ephys as le\nfrom labbox_ephys import sorters\nimport kachery_p2p as kp\n\nif __name__ == '__main__':\n    # adjust these values\n    workspace_uri = '{workspaceUri}'\n    recording_id = '{recordingId}' # {recordingLabel}\n\n    workspace = le.load_workspace(workspace_uri)\n    le_recording = workspace.get_recording(recording_id)\n    recording_object = le_recording['recordingObject']\n\n    sorting_object = sorters.spykingcircus(\n        recording_object=recording_object,\n        detect_sign=-1,\n        adjacency_radius=100,\n        detect_threshold=6,\n        template_width_ms=3,\n        filter=True,\n        merge_spikes=True,\n        auto_merge=0.75,\n        num_workers=None,\n        whitening_max_elts=1000,\n        clustering_max_elts=10000\n    )\n    sorting = le.LabboxEphysSortingExtractor(sorting_object)\n\n    S_id = workspace.add_sorting(\n        sorting=sorting,\n        recording_id=recording_id,\n        label='spykingcircus'\n    )",K=({text:e})=>{const[t,n]=(0,r.useState)(!1),o=(0,r.useCallback)((()=>{window.isSecureContext?(navigator.clipboard.writeText(e),n(!0),setTimeout((()=>{n(!1)}),3e3)):window.alert("Unable to copy to clipbard (not a secure context). This is probably because this site uses http rather than https.")}),[e]);return i().createElement("button",{onClick:o},t?"Copied":"Copy to clipboard")},q=({workspaceRoute:e,recordingId:t,recordingLabel:n})=>{const r=r=>((e,t)=>{let n=e;for(let e in t)n=n.split(`{${e}}`).join(t[e]||"");return n})(r,{workspaceUri:e.workspaceUri,recordingId:t,recordingLabel:n});return i().createElement("div",null,i().createElement(E.Z,{source:"## Spike sorting\n\nUse one of the following scripts to run spike sorting and import the result into this workspace. You must\nrun the script on the computer where labbox-ephys is installed, or from a kachery node that has the appropriate access."}),i().createElement(h.Z,{label:"SpyKING CIRCUS"},i().createElement(K,{text:r(z)}),i().createElement(E.Z,{source:(o=r(z),"```python\n"+o+"\n```")})));var o};var X=n(1845);const H=({sorting:e,onClick:t})=>{const n=(0,r.useCallback)((()=>{t(e)}),[e,t]);return i().createElement(W,{title:"View recording",onClick:n},e.sortingLabel)},W=({title:e,children:t,onClick:n})=>i().createElement("button",{type:"button",className:"link-button",onClick:n},t),$=({sortings:e,onDeleteSortings:t,readOnly:n,workspaceRouteDispatch:o})=>{const s=(0,r.useCallback)((e=>{o({type:"gotoSortingPage",recordingId:e.recordingId,sortingId:e.sortingId})}),[o]),l=(0,c.h)(e),a=(0,r.useMemo)((()=>{return t="sortingLabel",e.sort((function(e,n){var r=e[t],i=n[t];return r<i?-1:r>i?1:0}));var t}),[e]),d=(0,r.useMemo)((()=>a.map((e=>{const t=l[e.sortingId];return{key:e.sortingId,columnValues:{sorting:e,sortingLabel:{text:e.sortingLabel,element:i().createElement(H,{sorting:e,onClick:s})},numUnits:t?t.unit_ids.length:{element:i().createElement(I.Z,null)}}}}))),[a,s,l]),g=(0,r.useCallback)((e=>{t&&t([e])}),[t]);return i().createElement("div",null,i().createElement(R.Z,{rows:d,columns:[{key:"sortingLabel",label:"Sorting"},{key:"numUnits",label:"Num. units"}],deleteRowLabel:"Remove this sorting",onDeleteRow:n?void 0:g}))},Y=({sortings:e,workspaceRouteDispatch:t,workspaceRoute:n,onDeleteSortings:r})=>i().createElement(X.Z,null,i().createElement("h3",null,`${e.length} sorting${1!==e.length?"s":""}`),i().createElement($,{sortings:e,workspaceRouteDispatch:t,readOnly:!1,onDeleteSortings:r})),J=((0,o.zy)({maxSimultaneous:6}),({recording:e,sortings:t,workspaceRoute:n,workspaceRouteDispatch:c,onDeleteSortings:d,width:g,height:u})=>{const m=(0,l.F0)(e.recordingObject),[h,E]=(0,r.useState)(!1),[_,f]=(0,r.useReducer)(a.Zl,{});(0,r.useEffect)((()=>{!_.timeRange&&m&&f({type:"SetTimeRange",timeRange:{min:0,max:Math.min(m.num_frames,m.sampling_frequency/10)}})}),[_,m]);const y=(0,r.useCallback)((()=>{c({type:"gotoRecordingsPage"})}),[c]),k=(0,r.useCallback)((()=>{c({type:"gotoSortingPage",recordingId:e.recordingId,sortingId:"-"})}),[c]),w=(0,o._m)();if((0,r.useMemo)((()=>(0,a._S)(w)),[w]),!m)return i().createElement("div",null,"Loading recording info");const x=i().createElement("div",{style:{margin:20}},i().createElement(M.Z,{container:!0,spacing:3},i().createElement(M.Z,{item:!0,xs:12,xl:6},i().createElement(p.Z,{onClick:y},"Back to recordings"),i().createElement("h2",null,e.recordingLabel),i().createElement("div",null,e.recordingPath),i().createElement(V,{recordingInfo:m,hideElectrodeGeometry:!0})),i().createElement(M.Z,{item:!0,xs:12,xl:6},i().createElement(s.Z,{onClick:k},"Explore recording")),i().createElement(M.Z,{item:!0,xs:12,xl:6},i().createElement(Y,{sortings:t,workspaceRouteDispatch:c,workspaceRoute:n,onDeleteSortings:d}))));return i().createElement(b.Z,Object.assign({},{width:g,height:u},{initialPosition:300,positionFromRight:!0}),i().createElement("div",null,!h&&i().createElement("div",null,i().createElement(p.Z,{onClick:()=>{E(!0)}},"Spike sorting")),x),h&&i().createElement(q,{workspaceRoute:n,recordingId:e.recordingId,recordingLabel:e.recordingLabel}))}),Q=({workspace:e,workspaceDispatch:t,workspaceRoute:n,workspaceRouteDispatch:o,width:s=500,height:l=500})=>{const c=(0,r.useCallback)((e=>{t({type:"DELETE_RECORDINGS",recordingIds:e})}),[t]),a=(0,r.useCallback)((e=>{t({type:"DELETE_SORTINGS",sortingIds:e})}),[t]);switch(n.page){case"recordings":return i().createElement(D,Object.assign({onDeleteRecordings:c},{width:s,height:l,recordings:e.recordings,sortings:e.sortings,workspaceRoute:n,workspaceRouteDispatch:o}));case"recording":{const t=n.recordingId,r=e.recordings.filter((e=>e.recordingId===t))[0];return r?i().createElement(J,Object.assign({onDeleteSortings:a},{width:s,height:l,recording:r,workspaceRouteDispatch:o,workspaceRoute:n},{sortings:e.sortings.filter((e=>e.recordingId===t))})):i().createElement("div",null,"Recording not found: ",t)}case"sorting":{const t=n.recordingId,r=e.recordings.filter((e=>e.recordingId===t))[0];if(!r)return i().createElement("div",null,"Recording not found: ",t);const c=n.sortingId;if("-"!==c){const a=e.sortings.filter((e=>e.recordingId===t&&e.sortingId===c))[0];return a?i().createElement(m,{sorting:a,recording:r,width:s,height:l,readOnly:!1,workspaceRoute:n,workspaceRouteDispatch:o}):i().createElement("div",null,"Sorting not found: ",t,"/",c)}return i().createElement(m,{sorting:null,recording:r,width:s,height:l,readOnly:!1,workspaceRoute:n,workspaceRouteDispatch:o})}}};function ee(e){e.registerPlugin({type:"WorkspaceView",name:"WorkspaceView",label:"Workspace View",component:Q})}}}]);