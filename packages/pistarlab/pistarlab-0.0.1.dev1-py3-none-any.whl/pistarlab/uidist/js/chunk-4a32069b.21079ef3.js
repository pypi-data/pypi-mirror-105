(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a32069b"],{"321f":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.editorMode||!t.$apollo.queries.componentSpecs||t.$apollo.queries.componentSpecs.loading?a("div",[a("b-button-toolbar",[a("b-button",{staticClass:"ml-auto",attrs:{pill:"",size:"sm",variant:"outline-secondary"},on:{click:function(e){return t.enableFormMode()}}},[t._v("View in Form")])],1),a("div",{staticClass:"mt-4"}),a("b-textarea",{attrs:{cols:"200",rows:"40"},model:{value:t.paramValuesEditor,callback:function(e){t.paramValuesEditor=e},expression:"paramValuesEditor"}})],1):a("div",[a("b-button-toolbar",[a("b-form-checkbox",{attrs:{switch:""},model:{value:t.advancedMode,callback:function(e){t.advancedMode=e},expression:"advancedMode"}},[t._v(" Show All (Advanced)")]),a("b-button",{staticClass:"ml-auto",attrs:{pill:"",size:"sm",variant:"outline-secondary"},on:{click:function(e){return t.enableEditor()}}},[t._v("View in Editor")])],1),a("div",{staticClass:"mt-4"}),a("div",t._l(t.paramList,(function(e,n){return a("div",{key:n},[t.skipEntry(e)?a("div",[a("div",{staticClass:"d-flex flex-row"},[t._l(e.depth,(function(t){return a("div",{key:t,staticClass:"ml-2 ",staticStyle:{width:"50px"}})})),a("div",{staticClass:"flex-column"},[a("div",[a("label",{attrs:{for:"item_"+e.full_path}},["component"==e.data_type?a("span",[a("i",{staticClass:"fas fa-caret-square-right"}),t._v(" "+t._s(e.displayed_name)+": ")]):a("span",[t._v(" "+t._s(e.displayed_name)+": ")])])]),a("div",{staticClass:"ml-3 row"},["component"==e.data_type?a("div",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.paramValues[e.full_path],expression:"paramValues[data.full_path]"}],attrs:{id:"item_"+e.full_path},on:{change:[function(a){var n=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.paramValues,e.full_path,a.target.multiple?n:n[0])},function(e){return t.updateParamList()}]}},[a("option",{attrs:{value:""}},[t._v("-select-")]),t._l(e.options,(function(e,n){return a("option",{key:n,domProps:{value:n}},[t._v(" "+t._s(n)+" ")])}))],2)]):"list"==e.data_type?a("div",[t._v(" "+t._s(t.displayList(t.paramValues[e.full_path]))+" "),a("b-modal",{attrs:{id:"modal_"+e.full_path}},[a("b-textarea",{model:{value:t.paramValues[e.full_path],callback:function(a){t.$set(t.paramValues,e.full_path,a)},expression:"paramValues[data.full_path]"}})],1),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"modal_"+e.full_path,expression:"'modal_'+data.full_path"}],attrs:{variant:"white",size:"sm"}},[a("i",{staticClass:"fa fa-edit"})])],1):"dict"==e.data_type?a("div",[t._v(" "+t._s(t.paramValues[e.full_path])+" "),a("b-modal",{attrs:{id:"modal_"+e.full_path}},[a("b-textarea",{model:{value:t.paramValues[e.full_path],callback:function(a){t.$set(t.paramValues,e.full_path,a)},expression:"paramValues[data.full_path]"}})],1),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"modal_"+e.full_path,expression:"'modal_'+data.full_path"}],attrs:{variant:"white",size:"sm"}},[a("i",{staticClass:"fa fa-edit"})])],1):"category"==e.data_type?a("div",t._l(e.type_info.options,(function(n,s){return a("span",{key:s,staticClass:"mr-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.paramValues[e.full_path],expression:"paramValues[data.full_path]"}],attrs:{type:"radio"},domProps:{value:n,checked:t._q(t.paramValues[e.full_path],n)},on:{change:function(a){return t.$set(t.paramValues,e.full_path,n)}}}),a("label",{staticClass:"ml-1"},[t._v(" "+t._s(n))])])})),0):"bool"==e.data_type?a("div",[a("span",{staticClass:"mr-2"},[a("b-form-checkbox",{attrs:{switch:""},model:{value:t.paramValues[e.full_path],callback:function(a){t.$set(t.paramValues,e.full_path,a)},expression:"paramValues[data.full_path]"}},[t._v(" "+t._s(t.paramValues[e.full_path]))])],1)]):"float"==e.data_type?a("div",{staticClass:"col-xs-4"},[a("b-input",{model:{value:t.paramValues[e.full_path],callback:function(a){t.$set(t.paramValues,e.full_path,t._n(a))},expression:"paramValues[data.full_path]"}}),e.type_info.use_range?a("span",[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.paramValues[e.full_path],expression:"paramValues[data.full_path]",modifiers:{number:!0}}],staticClass:"form-control-range mt-2",attrs:{type:"range",step:(e.type_info.max-e.type_info.min)/1e4,min:e.type_info.min,max:e.type_info.max},domProps:{value:t.paramValues[e.full_path]},on:{__r:function(a){t.$set(t.paramValues,e.full_path,t._n(a.target.value))},blur:function(e){return t.$forceUpdate()}}})]):t._e()],1):"int"==e.data_type?a("div",{staticClass:"col-xs-4"},[a("b-input",{attrs:{type:"number",value:parseInt(t.paramValues[e.full_path])},model:{value:t.paramValues[e.full_path],callback:function(a){t.$set(t.paramValues,e.full_path,t._n(a))},expression:"paramValues[data.full_path]"}}),e.type_info.use_range?a("span",[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.paramValues[e.full_path],expression:"paramValues[data.full_path]",modifiers:{number:!0}}],staticClass:"form-control-range mt-2",attrs:{type:"range",step:Math.round((e.type_info.max-e.type_info.min)/1e3),min:e.type_info.min,max:e.type_info.max},domProps:{value:t.paramValues[e.full_path]},on:{__r:function(a){t.$set(t.paramValues,e.full_path,t._n(a.target.value))},blur:function(e){return t.$forceUpdate()}}})]):t._e()],1):a("div",[a("b-input",{model:{value:t.paramValues[e.full_path],callback:function(a){t.$set(t.paramValues,e.full_path,a)},expression:"paramValues[data.full_path]"}})],1)]),e.description?a("div",{staticClass:"ml-3 form-text text-muted small"},[t._v(" "+t._s(e.description)+" ")]):t._e()])],2),a("hr")]):t._e()])})),0)],1)])},s=[],i=(a("99af"),a("4160"),a("caad"),a("a15b"),a("d81d"),a("fb6a"),a("b64b"),a("d3b7"),a("ac1f"),a("6062"),a("8a79"),a("2532"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("8785")),r=a("53ca"),o=a("9530"),c=a.n(o);function l(){var t=Object(i["a"])(["query\n{\n  componentSpecs: allComponentSpecs {\n    edges {\n      node {\n        ident\n        created\n        category\n        parentClassEntryPoint\n        pluginId\n        config\n        params\n      }\n    }\n  }\n}\n"]);return l=function(){return t},t}var u=function t(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=i;if(n&&(o=n+"."+i),"object"==Object(r["a"])(e[i]))if(a.has(o)){var c=t(e[i],a,o);for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(s[i+"."+l]=c[l])}else s[i]=JSON.stringify(e[i],null,2);else s[i]=e[i]}return s};function d(t,e,a){for(var n=e.length-1,s=0;s<n;++s){var i=e[s];i in t||(t[i]={}),t=t[i]}t[e[n]]=a}var p=c()(l()),m={components:{},apollo:{componentSpecs:{query:p,result:function(t){t.data,t.loading,t.networkStatus;console.log(this.componentGroups),this.updateParamList(!0)}}},data:function(){return{editorMode:!1,componentSpecs:null,advancedMode:!1,paramValues:{},paramValuesEditor:"{}",paramList:[]}},watch:{paramValues:{handler:function(t,e){this.paramValues=t,this.save()},deep:!0},paramValuesEditor:function(t){this.editorMode&&(this.paramValuesEditor=t,this.save())}},props:{params:Object,values:Object,buttonText:String,interfaceFilter:String},computed:{componentGroups:function(){if(console.log("--ERE"),null==this.componentSpecs)return{};var t={};return this.componentSpecs.edges.forEach((function(e){var a=e.node;a.parentClassEntryPoint in t||(t[a.parentClassEntryPoint]={});try{JSON.parse(a.config)}catch(s){console.log("error parsing ".concat(a.specId))}var n=JSON.parse(a.params);console.log(JSON.stringify(n,null,2)),t[a.parentClassEntryPoint][a.ident]={params:n}})),t}},methods:{skipEntry:function(t){if(this.advancedMode)return!0;if("default"==t.mode){if(!this.interfaceFilter||""==this.interfaceFilter)return!0;if(t.interfaces.includes(this.interfaceFilter))return!0}return!1},enableEditor:function(){this.updateParamList();var t=this.getTypedParamValues();this.paramValuesEditor=JSON.stringify(t,null,2),this.editorMode=!0},enableFormMode:function(){this.loadParams(JSON.parse(this.paramValuesEditor)),this.editorMode=!1},displayList:function(t){try{return JSON.parse(t).join(", ")}catch(e){return console.log("error parsing ".concat(t,", error =  ").concat(e)),""}},loadParams:function(t){var e=new Set;this.paramList.forEach((function(t){for(var a=t.full_path,n=a.split("."),s=0;s<n.length;s++){var i=n.slice(0,s).join(".");e.add(i)}})),this.paramValues={};var a=u(t,e,null);this.paramValues=a},getParamListForComponent:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;console.log("Step:"+a);var s=JSON.parse(JSON.stringify(t)),i=[];return Object.keys(s).forEach((function(t){var r=s[t];if(r.full_path=null!=a?a+"."+r.path:r.path,r.depth=n,"component"==r.data_type&&r.component_type in e.componentGroups&&r.full_path.endsWith("__component_id")){if(r.options=JSON.parse(JSON.stringify(e.componentGroups[r.component_type])),i.push(r),r.full_path in e.paramValues){var o=e.paramValues[r.full_path];if(o in e.componentGroups[r.component_type]){var c=JSON.parse(JSON.stringify(e.componentGroups[r.component_type][o].params)),l=r.full_path.split("."),u=l.slice(0,l.length-1).join("."),d=e.getParamListForComponent(c,u,n+1);d.forEach((function(t){i.push(t)}))}}}else i.push(r)})),i},updateParamList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];console.log("Updating"),this.paramList=[];var a=[],n=!1,s=new Set;while(!n)n=!0,a=this.getParamListForComponent(this.params),s=new Set(a.map((function(e){return e.full_path in t.paramValues||(t.$set(t.paramValues,e.full_path,e.default),"component"==e.data_type&&e.default&&(n=!1)),e.full_path})));this.paramList=a,Object.keys(this.paramValues).forEach((function(e){s.has(e)||delete t.paramValues[e]})),e&&Object.keys(this.values).length>0&&this.loadParams(this.values)},getTypedParamValues:function(){var t=this,e={};return this.paramList.forEach((function(a){var n=a.full_path.split("."),s=t.paramValues[a.full_path],i=null;if("list"==a.data_type||"dict"==a.data_type)try{i=JSON.parse(s)}catch(r){i=null}else i="int"==a.data_type?parseInt(s):"float"==a.data_type?parseFloat(s):s;d(e,n,i)})),e},save:function(){if(this.editorMode){this.updateParamList();var t=JSON.parse(this.paramValuesEditor);this.paramValuesEditor="{}",this.$emit("update",t)}else{this.updateParamList();var e=this.getTypedParamValues();this.$emit("update",e)}},cancel:function(){},onError:function(){}},created:function(){}},f=m,h=(a("39fd"),a("2877")),g=Object(h["a"])(f,n,s,!1,null,"e6d836dc",null);e["a"]=g.exports},"39fd":function(t,e,a){"use strict";var n=a("81dd"),s=a.n(n);s.a},"3fc0":function(t,e,a){"use strict";var n=a("cb77"),s=a.n(n);s.a},4198:function(t,e,a){},"53ca":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("a4d3"),a("e01a"),a("d28b"),a("d3b7"),a("3ca3"),a("ddb0");function n(t){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}},5530:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("a4d3"),a("4de4"),a("4160"),a("e439"),a("dbb4"),a("b64b"),a("159b");function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){n(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}},"81dd":function(t,e,a){},"878d":function(t,e,a){"use strict";var n=a("bac3"),s=a.n(n);s.a},"89be":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),t.item&&t.item.ident?a("div",[a("b-modal",{attrs:{id:"edit-modal",size:"xl","hide-footer":!0,title:"Edit Agent"}},[a("AgentEdit",{attrs:{uid:t.uid},on:{updated:function(e){return t.configUpdated()}}})],1),a("b-modal",{attrs:{id:"meta-modal",size:"lg"}},[t.item&&t.item.meta?a("pre",[t._v(t._s(JSON.parse(t.item.meta)))]):t._e()]),a("b-modal",{attrs:{id:"modal-publish-snapshot",title:"Publish Snapshot",size:"lg"},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var n=e.ok;return[a("b-button",{attrs:{variant:"primary"},on:{click:function(t){return n()}}},[t._v("Close")])]}}],null,!1,894244931)},[a("label",{attrs:{for:"snapshot_description"}},[t._v("Description:")]),a("b-form-input",{attrs:{id:"snapshot_description",placeholder:"Enter the snapshot description",trim:""},model:{value:t.snapshot_description,callback:function(e){t.snapshot_description=e},expression:"snapshot_description"}}),a("div",{staticClass:"mt-1"}),a("label",{attrs:{for:"snapshot_version"}},[t._v("Version:")]),a("b-form-input",{attrs:{id:"snapshot_version",placeholder:"Enter the snapshot version.",trim:""},model:{value:t.snapshot_version,callback:function(e){t.snapshot_version=e},expression:"snapshot_version"}}),a("b-button",{staticClass:"mt-2",attrs:{variant:"secondary",size:"sm"},on:{click:function(e){return t.publish()}}},[t._v("Publish")]),a("hr"),a("div",{staticClass:"mt-2"}),a("h3",[t._v("Published Snapshots")]),a("div",{staticClass:"mt-2"}),a("b-table",{attrs:{items:t.snapshots,fields:t.pubfields}})],1),a("div",{staticClass:"mt-4"}),a("b-button",{attrs:{variant:"secondary",to:"/data_browser/?path=agent/"+t.item.ident,size:"sm"}},[t._v("Browse Data")]),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"edit-modal",expression:"'edit-modal'"}],staticClass:"ml-1",attrs:{variant:"secondary",size:"sm"}},[t._v("Configuration")]),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"meta-modal",expression:"'meta-modal'"}],staticClass:"ml-1",attrs:{variant:"secondary",size:"sm"}},[t._v("Metadata")]),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"modal-publish-snapshot",expression:"'modal-publish-snapshot'"}],staticClass:"ml-1",attrs:{variant:"secondary",size:"sm"},on:{click:function(e){return t.loadSnapshotList()}}},[t._v("Publish")]),a("b-button",{staticClass:"ml-1",attrs:{variant:"primary",to:"/task/new/agenttask/?agentUid="+t.uid,size:"sm"}},[t._v("Assign Task")]),t.item.job_data&&"RUNNING"==t.item.job_data.state?a("b-button",{attrs:{variant:"warning",size:"sm"},on:{click:function(e){return t.agentControl("SHUTDOWN")}}},[t._v("Shutdown")]):t._e(),t.item.job_data&&"RUNNING"==t.item.job_data.state?a("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:function(e){return t.agentControl("KILL")}}},[t._v("Kill")]):t._e(),a("div",{staticClass:"mt-4"}),t.item?a("AgentCard",{attrs:{agent:t.item},on:{update:function(e){return t.refetch()}}}):t._e(),a("b-card",{attrs:{title:"Session History"}},[a("div",{staticStyle:{display:"block",position:"relative",height:"280px",overflow:"auto"}},[a("b-table",{attrs:{"show-empty":"","empty-text":"No Sessions Found",hover:"","table-busy":"",items:t.rowData,fields:t.fields,dark:!1,small:!1,borderless:!1,sortBy:"created",sortDesc:!0},scopedSlots:t._u([{key:"cell(tasklink)",fn:function(e){return[a("router-link",{attrs:{to:"/task/view/"+e.item.task.ident}},[t._v(t._s(e.item.task.ident))])]}},{key:"cell(link)",fn:function(e){return[a("router-link",{attrs:{to:"/session/view/"+e.item.ident}},[t._v(t._s(e.item.ident))])]}},{key:"cell(status)",fn:function(e){return[a("span",[t._v(t._s(e.item.status))]),e.item.status&&"RUNNING"==e.item.status?a("b-button",{staticClass:"ml-1",attrs:{variant:"danger",size:"sm"},on:{click:function(a){return t.stopSession(e.item.task.ident)}}},[t._v("Abort")]):t._e()]}}],null,!1,3393554162)})],1),a("div",{staticClass:"mt-2"})]),a("b-card",{attrs:{title:"Statistics"}},[a("b-container",{attrs:{fluid:""}},[a("b-row",[t._l(t.graphList,(function(e){return a("b-col",{key:e.key,attrs:{cols:"3"}},[e.data&&e.layout&&e.data.length>0&&e.data[0]&&e.data[0].x.length>0?a("div",[a("PlotlyVue",{attrs:{bgcolor:"#000",data:e.data,layout:e.layout,"display-mode-bar":!1}})],1):t._e()])})),0==t.graphList.length?a("b-col",[t._v(" No log data found ")]):t._e()],2)],1)],1)],1):t._e()])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",[a("i",{staticClass:"fas fa-robot"}),t._v(" Agent Details")])}],i=(a("99af"),a("4160"),a("b64b"),a("ac1f"),a("1276"),a("159b"),a("b85c")),r=a("8785"),o=a("bc3a"),c=a.n(o),l=a("4023"),u=a("bbd0"),d=a("9530"),p=a.n(d),m=a("04d1"),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-card",{attrs:{"no-body":"","header-bg-variant":"info","header-text-variant":"white"},scopedSlots:t._u([{key:"header",fn:function(){return[a("div",{staticClass:"custom-card-header mb-2"},[t._v(t._s(t.agent.ident))])]},proxy:!0}])},[a("b-card-text",{staticClass:"h-100 mt-4 mb-4"},[a("b-row",[a("b-col",[a("div",[a("b-card-img",{staticClass:"svgagent",staticStyle:{"max-height":"200px"},attrs:{src:"/img/agent_cons/"+t.getImageId(t.agent.ident)+".SVG",alt:"Image"}})],1),a("div",{staticClass:"ml-4 mt-2"},[a("div",[a("b-modal",{attrs:{id:"edit-tags",title:"edit tags","hide-footer":!0}},[a("b-input-group",[a("b-input",{staticStyle:{width:"50px"},attrs:{placeholder:"Enter a tag"},model:{value:t.newTag,callback:function(e){t.newTag=e},expression:"newTag"}}),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal:edit-tags",arg:"edit-tags"}],staticClass:"ml-2",attrs:{variant:"primary",size:"sm"},on:{click:function(e){return t.modifyTag("add",t.newTag)}}},[t._v("Add")])],1),a("div",{staticClass:"mt-2"},t._l(t.tagList,(function(e,n){return a("span",{key:n,staticClass:"mr-2",attrs:{variant:"tag"}},[t._v(" "+t._s(e)+" ("),a("b-link",{on:{click:function(a){return t.modifyTag("remove",e)}}},[t._v("remove")]),t._v(") "),n!=t.tagList.length-1?a("span",[t._v(", ")]):t._e()],1)})),0)],1),t._v(" Tags: "),t._l(t.tagList,(function(e,n){return a("b-badge",{key:n,staticClass:"mr-1",attrs:{pill:"",variant:"tag"}},[t._v(t._s(e))])})),a("b-link",{directives:[{name:"b-modal",rawName:"v-b-modal:edit-tags",arg:"edit-tags"}],attrs:{variant:"white",size:"sm"}},[a("i",{staticClass:"fa fa-edit"})])],2),a("div",{staticClass:"mt-2"},[a("b-modal",{attrs:{id:"edit-notes",title:"edit notes"},on:{ok:function(e){return t.updateNotes()}}},[a("b-input-group",[a("b-textarea",{attrs:{placeholder:"Notes"},model:{value:t.notes,callback:function(e){t.notes=e},expression:"notes"}})],1)],1),t._v(" Notes: "),a("b-link",{directives:[{name:"b-modal",rawName:"v-b-modal:edit-notes",arg:"edit-notes"}],attrs:{variant:"white",size:"sm"},on:{click:function(e){return t.loadNotes()}}},[a("i",{staticClass:"fa fa-edit"})]),t._v(" "),a("p",[t._v(t._s(t.agent.notes))])],1),a("div",{staticClass:"mt-2"},[t.agent&&!t.agent.archived?a("b-button",{attrs:{variant:"warning",pill:"",size:"sm"},on:{click:function(e){return t.updateArchive(!0)}}},[a("i",{staticClass:"fa fa-eye"}),t._v(" Move to Archive")]):t._e(),t.agent&&t.agent.archived?a("b-button",{attrs:{variant:"secondary",pill:"",size:"sm"},on:{click:function(e){return t.updateArchive(!1)}}},[a("i",{staticClass:"fa fa-eye"}),t._v(" Unarchive")]):t._e()],1)])]),a("b-col",[a("div",[a("div",{staticClass:"data_label mt-2"},[t._v("Spec Id: ")]),a("b-link",{attrs:{target:"_blank",to:"/agent_spec/"+t.agent.specId}},[t._v(t._s(t.agent.specId))]),a("div",{staticClass:"data_label mt-2"},[t._v("Seed: ")]),t._v(" "+t._s(t.agent.seed)+" "),a("div",{staticClass:"data_label mt-2"},[t._v("Created: ")]),t._v(t._s(t.agent.created)+" "),a("div",{staticClass:"data_label mt-2"},[t._v("Last Checkpoint Id: ")]),t._v(t._s(t.lastCheckpoint)+" ")],1)]),a("b-col",[a("h3",[t._v("Interfaces")]),t._l(t.config.interfaces,(function(e,n){return a("div",{key:n},[a("div",[t._v(" Id: "+t._s(n)+", Type: "+t._s(e.interface_type)+" ")]),a("div",{staticClass:"ml-2"},[a("div",{staticClass:"data_label mt-1"},[t._v("Observation Space: ")]),e&&e.observation_space?a("div",{staticClass:"ml-1"},[t._v(" "+t._s(e.observation_space.class_name)+" (args="+t._s(e.observation_space.args)+","+t._s(e.observation_space.kwargs)+") ")]):a("div",[t._v("Undefined")]),a("div",{staticClass:"data_label mt-1"},[t._v("Action Space: ")]),e&&e.action_space?a("div",{staticClass:"ml-1"},[t._v(" "+t._s(e.action_space.class_name)+" (args="+t._s(e.action_space.args)+","+t._s(e.action_space.kargs)+") ")]):a("div",[t._v("Undefined")])])])}))],2),a("b-col",[a("h3",[t._v("Components")]),t._l(t.components,(function(e,n){return a("div",{key:n},[t._v(" - "+t._s(e)+" ")])})),0==t.components.length?a("div",[t._v(" No components used ")]):t._e()],2)],1)],1)],1)],1)},h=[];a("d81d");function g(){var t=Object(r["a"])(["mutation noteMutation($id:String!,$notes:String!) \n                {\n                    agentSetNotes(id:$id, notes:$notes){\n                        success\n                        }\n                }"]);return g=function(){return t},t}function b(){var t=Object(r["a"])(["mutation archiveMutation($id:String!,$archive:Boolean!) \n                {\n                    agentSetArchive(id:$id, archive:$archive){\n                        success\n                        }\n                }"]);return b=function(){return t},t}var v={props:{agent:Object},data:function(){return{componentFields:[{key:"name",label:"Name"},{key:"specId",label:"Spec Id"},{key:"spec.category",label:"Type"}],newTag:"",notes:""}},mounted:function(){},methods:{updateArchive:function(t){var e=this;this.$apollo.mutate({mutation:p()(b()),variables:{id:this.agent.id,archive:t}}).then((function(t){e.$emit("update")})).catch((function(t){console.error(t)}))},loadNotes:function(){this.notes=this.agent.notes},updateNotes:function(){var t=this;this.$apollo.mutate({mutation:p()(g()),variables:{id:this.agent.id,notes:this.notes}}).then((function(e){t.$emit("update")})).catch((function(t){console.error(t)}))},getImageId:function(t){var e=parseInt(t.split("-")[1]);return e%19},modifyTag:function(t,e){var a=this;c.a.get("".concat(l["a"].API_URL,"/api/agent/").concat(t,"/tag/").concat(this.agent.ident,"/").concat(e)).then((function(t){console.log("Here we are"),a.$emit("update")})).catch((function(t){console.log(t),a.error=t}))}},computed:{tagList:function(){return null==this.agent?[]:this.agent.tags.edges.map((function(t){return t.node.tagId}))},lastCheckpoint:function(){return this.agent&&this.agent.lastCheckpoint?JSON.parse(this.agent.lastCheckpoint).id:"NA"},components:function(){var t=[];if(null==this.agent.components)return t;var e,a=Object(i["a"])(this.agent.components.edges);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push(n.node)}}catch(s){a.e(s)}finally{a.f()}return t},config:function(){return JSON.parse(this.agent.config)},meta:function(){return JSON.parse(this.agent.meta)}},created:function(){},beforeDestroy:function(){}},_=v,y=(a("878d"),a("2877")),k=Object(y["a"])(_,f,h,!1,null,"1e4f0161",null),S=k.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.agentSpec?a("div",[t.$apollo.queries.agent.loading?t._e():a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",[a("div",[a("b-tabs",{attrs:{"content-class":"mt-3",justified:""}},[a("b-tab",{attrs:{title:"Edit with Agent Builder"}},[t.params?a("div",[a("div",{staticClass:"ml-3"},[a("ParamEditor",{attrs:{params:t.params,values:t.initParamValues},on:{update:function(e){t.paramValues=e}}})],1)]):a("div",[t._v(" Agent Builder not supported by this Agent Spec ")])]),a("b-tab",{attrs:{title:"Edit raw config"}},[t.config?a("editor",{attrs:{lang:"json",width:"100%",theme:"chrome",height:"600"},on:{init:t.editorInit},model:{value:t.config,callback:function(e){t.config=e},expression:"config"}}):t._e(),a("div",{staticClass:"mt-4"})],1)],1)],1)])],1),a("div",{staticClass:"mt-4"})],1),a("b-button-toolbar",[t.submitting?a("b-button",{staticClass:"ml-auto",attrs:{size:"sm",variant:"primary",disabled:""}},[a("b-spinner",{attrs:{small:"",type:"grow"}}),t._v("Processing... ")],1):a("b-button",{staticClass:"ml-auto",attrs:{size:"sm",variant:"primary"},on:{click:t.submit}},[t._v("Save")])],1),a("div",{staticClass:"mt-4"}),t.errorMessage?a("b-alert",{attrs:{show:"",variant:"danger"}},[t._v(t._s(t.errorMessage)+": "),a("pre",{staticStyle:{"background-color":"inherit"}},[t._v(t._s(t.traceback))])]):t._e()],1):t._e()},w=[],O=a("5530"),V=a("321f");function x(){var t=Object(r["a"])(["mutation agentConfigMutation($id:String!,$config:String!) \n                {\n                    agentSetConfig(id:$id, config:$config){\n                        success\n                        }\n                }"]);return x=function(){return t},t}function N(){var t=Object(r["a"])(["\n  query GetAgent($ident: String!) {\n    agent(ident: $ident) {\n      id\n      ident\n      config\n      spec{\n        id\n        ident\n        description\n        pluginId\n        version\n        config\n        params\n      }\n    }\n  }\n"]);return N=function(){return t},t}function A(){var t=Object(r["a"])(["\n  query GetAgentSpec($ident: String!) {\n    agentSpec(ident: $ident) {\n      id\n      ident\n      description\n      pluginId\n      version\n      config\n      params\n    }\n  }\n"]);return A=function(){return t},t}p()(A());var E=p()(N()),P={name:"EditAgent",components:{editor:a("7c9e"),ParamEditor:V["a"]},apollo:{agent:{query:E,variables:function(){return{ident:this.uid}}}},data:function(){return{agent:{},options:{},config:"",code:"",paramValues:{},submitting:!1,snapshotId:null,snapshot_version:"0",snapshot_description:"",errorMessage:null}},props:{uid:String},computed:{agentSpec:function(){return this.agent.spec?this.agent.spec:null},params:function(){return this.agentSpec?JSON.parse(this.agentSpec.params):null},initParamValues:function(){return this.config&&""!=this.config?JSON.parse(this.config):{}}},methods:{editorInit:function(){a("2099"),a("be9d"),a("818b"),a("0329"),a("95b8"),a("79fb"),a("6a21")},cancel:function(){},onError:function(){},selectSnapshot:function(t){this.$bvModal.hide("modal-selectsnapshot"),this.snapshotId=t},submit:function(){var t=this;this.submitting=!0,this.config=JSON.stringify(Object(O["a"])(Object(O["a"])({},JSON.parse(this.config)),this.paramValues),null,2),this.$apollo.mutate({mutation:p()(x()),variables:{id:this.agent.id,config:this.config}}).then((function(e){console.log("Submitted"),t.submitting=!1,t.$emit("updated")})).catch((function(e){t.submitting=!1,console.error(e)}))}},watch:{agent:function(t){this.agent=t,this.agent.config&&(this.config=JSON.stringify(JSON.parse(this.agent.config),null,2))}},created:function(){}},I=P,$=(a("9103"),Object(y["a"])(I,C,w,!1,null,"578c8566",null)),j=$.exports;function L(){var t=Object(r["a"])(["\n  query GetAgent($ident: String!) {\n    item: agent(ident: $ident) {\n      id\n      ident\n      seed\n      specId\n      config\n      meta\n      created\n      notes\n      archived\n      tags{\n          edges{\n              node{\n                  id\n                  tagId\n              }\n          }\n      }\n      lastCheckpoint\n      components{\n        edges{\n          node{\n            ident\n            name\n            specId\n            spec{\n              ident\n              category\n            }\n          }\n        }\n      }\n      sessions(first: 100) {\n        pageInfo {\n          startCursor\n          endCursor\n        }\n        edges {\n          node {\n            ident\n            envSpecId\n            task {\n              ident\n            }\n            sessionType\n            created\n            status\n            archived\n            summary \n          }\n        }\n      }\n    }\n  }\n"]);return L=function(){return t},t}var J=[{key:"link",label:"Session",sortable:!0},{key:"tasklink",label:"Task",sortable:!0},{key:"envSpecId",label:"Environment"},{key:"created",label:"Created",sortable:!0},{key:"sessionType",label:"Session Type"},{key:"status",label:"Status",sortable:!0}],M=[{key:"snapshot_version",label:"Version"},{key:"creation_time",label:"Created"},{key:"submitter_id",label:"Submitter Id"},{key:"snapshot_description",label:"Description"}],T=p()(L()),z={name:"Agent",components:{AgentCard:S,AgentEdit:j,PlotlyVue:m["Plotly"]},apollo:{item:{query:T,variables:function(){return{ident:this.uid}},pollInterval:4e3}},data:function(){return{taskDetailsList:[],fields:J,pubfields:M,snapshot_description:"",snapshot_version:"0-dev",snapshots:[],componentFields:[{key:"name",label:"Name"},{key:"specId",label:"Spec Id"},{key:"spec.category",label:"Type"}],graphList:[],error:"",item:{},timer:null}},props:{uid:String},computed:{config:function(){return JSON.parse(this.item.config)},meta:function(){return JSON.parse(this.item.meta)},rowData:function(){var t=[];if(null==this.item.sessions)return t;var e,a=Object(i["a"])(this.item.sessions.edges);try{for(a.s();!(e=a.n()).done;){var n=e.value;1!=n.node.archived&&t.push(n.node)}}catch(s){a.e(s)}finally{a.f()}return t}},methods:{timepretty:u["f"],refetch:function(){this.$apollo.queries.item.refetch()},configUpdated:function(){console.log("ConfigUPdate"),this.refetch(),this.$bvModal.hide("edit-modal")},stopSession:function(t){var e=this;c.a.get("".concat(l["a"].API_URL,"/api/admin/task/stop/").concat(t)).then((function(t){e.message=t.data["message"],console.log("TASK ABORT REQUEST ".concat(e.message)),e.refreshData()})).catch((function(t){e.error=t,e.message=e.error}))},getImageId:function(t){var e=parseInt(t.split("-")[1]);return e%19},agentControl:function(t){var e=this;c.a.get("".concat(l["a"].API_URL,"/api/agent_control/").concat(t,"?uid=").concat(this.uid)).then((function(t){e.message=t.data["message"]})).catch((function(t){e.error=t,e.message=e.error}))},loadSnapshotList:function(){var t=this;this.item&&this.item.seed&&c.a.get("".concat(l["a"].API_URL,"/api/snapshots/agent/list/").concat(this.item.seed)).then((function(e){t.snapshots=e.data["items"]})).catch((function(e){t.error=e,console.log(e)}))},loadGraphs:function(){var t=this;c.a.get("".concat(l["a"].API_URL,"/api/agent_plots_json/").concat(this.uid)).then((function(e){var a=e.data;t.graphList=[],Object.keys(a).forEach((function(e){var n={},s=a[e];if(s.data){if(n.data=[s.data],!s.layout)return;n.layout=s.layout,n.layout.autosize=!0,n.layout.margin={t:25,l:25,r:25,b:25},n.layout.font={color:"rgba(200,200,200,1)"},n.layout.plot_bgcolor="rgba(0,0,0,0.1)",n.layout.paper_bgcolor="rgba(0,0,0,0.1)",n.layout.yaxis={gridcolor:"rgba(200,200,200,0.25)",gridwidth:1},n.layout.xaxis={gridcolor:"rgba(200,200,200,0.25)",gridwidth:1},n.layout.height=250,t.graphList.push(n)}}))})).catch((function(e){console.log(e),t.error=e}))},publish:function(){var t=this,e={snapshot_version:this.snapshot_version,snapshot_description:this.snapshot_description,agent_id:this.uid};console.log(JSON.stringify(e,null,2)),c.a.post("".concat(l["a"].API_URL,"/api/snapshot/publish"),e).then((function(e){var a=e.data["item"];"snapshot_data"in a?console.log("Snapshot Result: "+JSON.stringify(a["snapshot_data"])):(console.log("ERROR in response "+JSON.stringify(a)),t.errorMessage=JSON.stringify(a["error"])),t.traceback=a["traceback"],t.submitting=!1,t.loadSnapshotList()})).catch((function(t){this.errorMessage=t,this.submitting=!1}))}},created:function(){console.log(this.uid),this.loadSnapshotList(),this.timer=setInterval(this.loadGraphs,2e3),this.loadGraphs()},beforeDestroy:function(){clearInterval(this.timer)}},U=z,F=(a("3fc0"),Object(y["a"])(U,n,s,!1,null,null,null));e["default"]=F.exports},"8a79":function(t,e,a){"use strict";var n=a("23e7"),s=a("06cf").f,i=a("50c4"),r=a("5a34"),o=a("1d80"),c=a("ab13"),l=a("c430"),u="".endsWith,d=Math.min,p=c("endsWith"),m=!l&&!p&&!!function(){var t=s(String.prototype,"endsWith");return t&&!t.writable}();n({target:"String",proto:!0,forced:!m&&!p},{endsWith:function(t){var e=String(o(this));r(t);var a=arguments.length>1?arguments[1]:void 0,n=i(e.length),s=void 0===a?n:d(i(a),n),c=String(t);return u?u.call(e,c,s):e.slice(s-c.length,s)===c}})},9103:function(t,e,a){"use strict";var n=a("4198"),s=a.n(n);s.a},"95b8":function(t,e){ace.define("ace/theme/chrome",["require","exports","module","ace/lib/dom"],(function(t,e,a){e.isDark=!1,e.cssClass="ace-chrome",e.cssText='.ace-chrome .ace_gutter {background: #ebebeb;color: #333;overflow : hidden;}.ace-chrome .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-chrome {background-color: #FFFFFF;color: black;}.ace-chrome .ace_cursor {color: black;}.ace-chrome .ace_invisible {color: rgb(191, 191, 191);}.ace-chrome .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-chrome .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-chrome .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-chrome .ace_invalid {background-color: rgb(153, 0, 0);color: white;}.ace-chrome .ace_fold {}.ace-chrome .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-chrome .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-chrome .ace_support.ace_type,.ace-chrome .ace_support.ace_class.ace-chrome .ace_support.ace_other {color: rgb(109, 121, 222);}.ace-chrome .ace_variable.ace_parameter {font-style:italic;color:#FD971F;}.ace-chrome .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-chrome .ace_comment {color: #236e24;}.ace-chrome .ace_comment.ace_doc {color: #236e24;}.ace-chrome .ace_comment.ace_doc.ace_tag {color: #236e24;}.ace-chrome .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-chrome .ace_variable {color: rgb(49, 132, 149);}.ace-chrome .ace_xml-pe {color: rgb(104, 104, 91);}.ace-chrome .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-chrome .ace_heading {color: rgb(12, 7, 255);}.ace-chrome .ace_list {color:rgb(185, 6, 144);}.ace-chrome .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-chrome .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-chrome .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-chrome .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-chrome .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-chrome .ace_gutter-active-line {background-color : #dcdcdc;}.ace-chrome .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-chrome .ace_storage,.ace-chrome .ace_keyword,.ace-chrome .ace_meta.ace_tag {color: rgb(147, 15, 128);}.ace-chrome .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-chrome .ace_string {color: #1A1AA6;}.ace-chrome .ace_entity.ace_other.ace_attribute-name {color: #994409;}.ace-chrome .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}';var n=t("../lib/dom");n.importCssString(e.cssText,e.cssClass)}))},bac3:function(t,e,a){},cb77:function(t,e,a){},dbb4:function(t,e,a){var n=a("23e7"),s=a("83ab"),i=a("56ef"),r=a("fc6a"),o=a("06cf"),c=a("8418");n({target:"Object",stat:!0,sham:!s},{getOwnPropertyDescriptors:function(t){var e,a,n=r(t),s=o.f,l=i(n),u={},d=0;while(l.length>d)a=s(n,e=l[d++]),void 0!==a&&c(u,e,a);return u}})},e439:function(t,e,a){var n=a("23e7"),s=a("d039"),i=a("fc6a"),r=a("06cf").f,o=a("83ab"),c=s((function(){r(1)})),l=!o||c;n({target:"Object",stat:!0,forced:l,sham:!o},{getOwnPropertyDescriptor:function(t,e){return r(i(t),e)}})}}]);
//# sourceMappingURL=chunk-4a32069b.21079ef3.js.map