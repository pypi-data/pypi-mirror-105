{"version":3,"sources":["webpack:///./src/views/TaskNew.vue?4575","webpack:///src/views/TaskNew.vue","webpack:///./src/views/TaskNew.vue?53bb","webpack:///./src/views/TaskNew.vue?49c2","webpack:///./src/views/TaskNew.vue?a0eb"],"names":["render","_vm","this","_h","$createElement","_c","_self","_m","staticClass","attrs","_v","_s","spec","ident","pluginId","version","description","on","editorInit","model","value","callback","$$v","config","expression","submitting","submit","_e","staticRenderFns","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACJ,EAAIM,GAAG,GAAGF,EAAG,MAAM,CAACG,YAAY,SAASH,EAAG,cAAc,CAACI,MAAM,CAAC,MAAQ,KAAK,CAACJ,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACA,EAAG,MAAM,CAACG,YAAY,QAAQ,CAACH,EAAG,MAAM,CAACG,YAAY,cAAc,CAACP,EAAIS,GAAG,eAAeL,EAAG,OAAO,CAACJ,EAAIS,GAAGT,EAAIU,GAAGV,EAAIW,KAAKC,YAAYR,EAAG,MAAM,CAACG,YAAY,QAAQ,CAACH,EAAG,MAAM,CAACG,YAAY,cAAc,CAACP,EAAIS,GAAG,eAAeL,EAAG,OAAO,CAACJ,EAAIS,GAAGT,EAAIU,GAAGV,EAAIW,KAAKE,eAAeT,EAAG,MAAM,CAACG,YAAY,QAAQ,CAACH,EAAG,MAAM,CAACG,YAAY,cAAc,CAACP,EAAIS,GAAG,aAAaL,EAAG,OAAO,CAACJ,EAAIS,GAAGT,EAAIU,GAAGV,EAAIW,KAAKG,cAAcV,EAAG,MAAM,CAACG,YAAY,QAAQ,CAACH,EAAG,MAAM,CAACG,YAAY,cAAc,CAACP,EAAIS,GAAG,iBAAiBL,EAAG,OAAO,CAACJ,EAAIS,GAAGT,EAAIU,GAAGV,EAAIW,KAAKI,qBAAqB,GAAGX,EAAG,MAAM,CAACG,YAAY,SAASH,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACA,EAAG,MAAM,CAACG,YAAY,cAAc,CAACP,EAAIS,GAAG,YAAYL,EAAG,MAAM,CAACA,EAAG,SAAS,CAACI,MAAM,CAAC,KAAO,OAAO,MAAQ,WAAW,MAAQ,OAAO,OAAS,OAAOQ,GAAG,CAAC,KAAOhB,EAAIiB,YAAYC,MAAM,CAACC,MAAOnB,EAAU,OAAEoB,SAAS,SAAUC,GAAMrB,EAAIsB,OAAOD,GAAKE,WAAW,aAAa,MAAM,GAAGnB,EAAG,MAAM,CAACG,YAAY,SAASH,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACA,EAAG,MAAM,CAAGJ,EAAIwB,WAA4IpB,EAAG,WAAW,CAACG,YAAY,OAAOC,MAAM,CAAC,KAAO,KAAK,QAAU,UAAU,SAAW,KAAK,CAACJ,EAAG,YAAY,CAACI,MAAM,CAAC,MAAQ,GAAG,KAAO,UAAUR,EAAIS,GAAG,mBAAmB,GAAvSL,EAAG,WAAW,CAACG,YAAY,OAAOC,MAAM,CAAC,KAAO,KAAK,QAAU,WAAWQ,GAAG,CAAC,MAAQhB,EAAIyB,SAAS,CAACzB,EAAIS,GAAG,qBAAiMT,EAAIwB,WAA8GxB,EAAI0B,KAAtGtB,EAAG,WAAW,CAACI,MAAM,CAAC,QAAU,YAAY,KAAO,KAAK,GAAK,iBAAiB,CAACR,EAAIS,GAAG,aAAsB,MAAM,IAAI,IAAI,IACplDkB,EAAkB,CAAC,WAAa,IAAI3B,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,KAAK,CAACA,EAAG,IAAI,CAACG,YAAY,kBAAkBP,EAAIS,GAAG,iB,uUCgEhK,eAaA,GACE,KAAF,UACE,WAAF,CACI,OAAJ,WAEE,OAAF,CACI,KAAJ,CACM,MAAN,EACM,UAFN,WAGQ,MAAR,CACU,MAAV,gBAKE,KAfF,WAgBI,MAAJ,CACM,KAAN,GACM,QAAN,GACM,OAAN,GACM,KAAN,GACM,YAAN,IAGE,MAAF,CACI,OAAJ,QAEE,QAAF,CACI,WAAJ,WACM,EAAN,QACM,EAAN,QACM,EAAN,QACM,EAAN,QACM,EAAN,QACM,EAAN,SAEI,OATJ,aAYI,QAZJ,aAeI,OAfJ,WAeM,IAAN,OACA,GACQ,OAAR,wBACQ,OAAR,aAGM,EAAN,EACA,KADA,UACA,eADA,wBACA,GACA,kBACQ,IAAR,iBACA,UACU,EAAV,cACY,KAAZ,+BAGU,QAAV,4CACU,EAAV,yCAEQ,EAAR,yBAEQ,EAAR,iBAEA,mBACQ,KAAR,eACQ,KAAR,mBAIE,MAAF,CACI,KAAJ,YACM,KAAN,OACA,mBACQ,KAAR,8DAKE,QA/EF,cC9EiV,I,wBCQ7UmB,EAAY,eACd,EACA7B,EACA4B,GACA,EACA,KACA,WACA,MAIa,aAAAC,E,kECnBf,yBAAse,EAAG","file":"js/chunk-76da0f04.72124ca1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._m(0),_c('div',{staticClass:\"mt-4\"}),_c('b-container',{attrs:{\"fluid\":\"\"}},[_c('b-row',[_c('b-col',[_c('div',{staticClass:\"pt-2\"},[_c('div',{staticClass:\"data_label\"},[_vm._v(\"Task Spec\")]),_c('span',[_vm._v(_vm._s(_vm.spec.ident))])]),_c('div',{staticClass:\"pt-2\"},[_c('div',{staticClass:\"data_label\"},[_vm._v(\"Plugin ID\")]),_c('span',[_vm._v(_vm._s(_vm.spec.pluginId))])]),_c('div',{staticClass:\"pt-2\"},[_c('div',{staticClass:\"data_label\"},[_vm._v(\"Version\")]),_c('span',[_vm._v(_vm._s(_vm.spec.version))])]),_c('div',{staticClass:\"pt-2\"},[_c('div',{staticClass:\"data_label\"},[_vm._v(\"Description\")]),_c('span',[_vm._v(_vm._s(_vm.spec.description))])])])],1),_c('div',{staticClass:\"mt-4\"}),_c('b-row',[_c('b-col',[_c('div',{staticClass:\"data_label\"},[_vm._v(\"Config\")]),_c('div',[_c('editor',{attrs:{\"lang\":\"json\",\"theme\":\"twilight\",\"width\":\"100%\",\"height\":\"600\"},on:{\"init\":_vm.editorInit},model:{value:(_vm.config),callback:function ($$v) {_vm.config=$$v},expression:\"config\"}})],1)])],1),_c('div',{staticClass:\"mt-4\"}),_c('b-row',[_c('b-col',[_c('div',[(!_vm.submitting)?_c('b-button',{staticClass:\"mr-4\",attrs:{\"size\":\"sm\",\"variant\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\"Create Instance\")]):_c('b-button',{staticClass:\"mr-4\",attrs:{\"size\":\"sm\",\"variant\":\"primary\",\"disabled\":\"\"}},[_c('b-spinner',{attrs:{\"small\":\"\",\"type\":\"grow\"}}),_vm._v(\"Processing... \")],1),(!_vm.submitting)?_c('b-button',{attrs:{\"variant\":\"secondary\",\"size\":\"sm\",\"to\":\"/task/specs/\"}},[_vm._v(\"Cancel\")]):_vm._e()],1)])],1)],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',[_c('i',{staticClass:\"fas fa-stream\"}),_vm._v(\" New Task\")])}]\n\nexport { render, staticRenderFns }","<template lang=\"html\">\n<div>\n    <h2><i class=\"fas fa-stream\"></i> New Task</h2>\n    <div class=\"mt-4\"></div>\n\n    <b-container fluid>\n        <b-row>\n            <b-col>\n                <div class=\"pt-2\">\n                    <div class=\"data_label\">Task Spec</div>\n                    <span>{{ spec.ident }}</span>\n                </div>\n                <div class=\"pt-2\">\n                    <div class=\"data_label\">Plugin ID</div>\n                    <span>{{ spec.pluginId }}</span>\n                </div>\n                <div class=\"pt-2\">\n                    <div class=\"data_label\">Version</div>\n                    <span>{{ spec.version }}</span>\n                </div>\n                <div class=\"pt-2\">\n                    <div class=\"data_label\">Description</div>\n                    <span>{{ spec.description }}</span>\n                </div>\n            </b-col>\n        </b-row>\n        <div class=\"mt-4\"></div>\n\n        <b-row>\n            <b-col>\n                <div class=\"data_label\">Config</div>\n                <div>\n                    <editor v-model=\"config\" @init=\"editorInit\" lang=\"json\" theme=\"twilight\" width=\"100%\" height=\"600\"></editor>\n                </div>\n            </b-col>\n        </b-row>\n        <div class=\"mt-4\"></div>\n\n        <b-row>\n            <b-col>\n                <div>\n                    <b-button size=\"sm\" class=\"mr-4\" v-if=\"!submitting\" variant=\"primary\" v-on:click=\"submit\">Create Instance</b-button>\n                    <b-button size=\"sm\" class=\"mr-4\" v-else variant=\"primary\" disabled>\n                        <b-spinner small type=\"grow\"></b-spinner>Processing...\n                    </b-button>\n                    <b-button v-if=\"!submitting\" variant=\"secondary\" size=\"sm\" :to=\"`/task/specs/`\">Cancel</b-button>\n                </div>\n            </b-col>\n        </b-row>\n    </b-container>\n</div>\n</template>\n\n<script>\n//USING https://github.com/chairuosen/vue2-ace-editor\nimport axios from \"axios\";\nimport {\n    appConfig\n} from \"../app.config\";\nimport {\n    timedelta,\n    timepretty\n} from \"../funcs\";\nimport gql from \"graphql-tag\";\n\nconst GET_TASK_SPEC = gql `\n  query GetTaskSpec($ident: String!) {\n    spec:taskSpec(ident: $ident) {\n      id\n      ident\n      description\n      pluginId\n      version\n      config\n    }\n  }\n`;\n\nexport default {\n    name: \"NewTask\",\n    components: {\n        editor: require('vue2-ace-editor'),\n    },\n    apollo: {\n        spec: {\n            query: GET_TASK_SPEC,\n            variables() {\n                return {\n                    ident: this.specId,\n                };\n            },\n        },\n    },\n    data() {\n        return {\n            spec: {},\n            options: {},\n            config: \"\",\n            code: '',\n            submitting: false,\n        };\n    },\n    props: {\n        specId: String\n    },\n    methods: {\n        editorInit: function () {\n            require('brace/ext/language_tools') //language extension prerequsite...\n            require('brace/mode/html')\n            require('brace/mode/json') //language\n            require('brace/mode/less')\n            require('brace/theme/twilight')\n            require('brace/snippets/javascript') //snippet\n        },\n        cancel() {\n            //          \n        },\n        onError() {\n            //\n        },\n        submit() {\n            const outgoingData={\n                config:JSON.parse(this.config),\n                specId:this.specId\n\n            }\n             axios\n            .post(`${appConfig.API_URL}/api/new_task_submit`, outgoingData)\n            .then((response) => {\n                const data = response.data[\"item\"];\n                if (\"uid\" in data) {\n                    this.$router.push({\n                        path: `/task/view/${data.uid}`,\n                    });\n                } else {\n                    console.log(\"ERROR in response \" + JSON.stringify(data));\n                    this.errorMessage = JSON.stringify(data[\"error\"]);\n                }\n                this.traceback = data[\"traceback\"];\n\n                this.submitting = false;\n            })\n            .catch(function (error) {\n                this.errorMessage = error;\n                this.submitting = false;\n            });\n        }\n    },\n    watch: {\n        spec: function (val) {\n            this.spec = val;\n            if (this.spec.config) {\n                this.config = JSON.stringify(JSON.parse(this.spec.config),null,2)\n                //\n            }\n        },\n    },\n    created() {\n\n        //\n    },\n};\n</script>\n\n<style scoped>\n.ace_editor {\n    font-size: 16px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskNew.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskNew.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TaskNew.vue?vue&type=template&id=47f1749a&scoped=true&lang=html&\"\nimport script from \"./TaskNew.vue?vue&type=script&lang=js&\"\nexport * from \"./TaskNew.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TaskNew.vue?vue&type=style&index=0&id=47f1749a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"47f1749a\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskNew.vue?vue&type=style&index=0&id=47f1749a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskNew.vue?vue&type=style&index=0&id=47f1749a&scoped=true&lang=css&\""],"sourceRoot":""}