{"version":3,"sources":["webpack:///./src/views/EpisodeView.vue?f445","webpack:///./src/views/EpisodeView.vue?ad2c","webpack:///src/views/EpisodeView.vue","webpack:///./src/views/EpisodeView.vue?512c","webpack:///./src/views/EpisodeView.vue?9666"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","item","ident","selectedEpisodeId","attrs","message","_e","episodeList","on","$event","updateEpisode","model","value","callback","$$v","expression","videoURL","episode","fields","perPage","currentPage","scopedSlots","_u","key","fn","data","appConfig","pad","episode_step_count","rows","staticRenderFns","formatNum","num","prec","n","width","z","component"],"mappings":"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","file":"js/chunk-b07faa6c.b72aa3dc.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EpisodeView.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EpisodeView.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.item)?_c('div',[_c('h2',[_c('i',{staticClass:\"fa fa-cube\"}),_vm._v(\" Session: \"+_vm._s(_vm.item.ident)+\", Episode: \"+_vm._s(_vm.selectedEpisodeId))]),_c('b-container',{attrs:{\"fluid\":\"\"}},[_c('b-row',[_c('b-col',[(_vm.message)?_c('b-alert',{attrs:{\"show\":\"\",\"variant\":\"warning\"}},[_vm._v(_vm._s(_vm.message))]):_vm._e()],1)],1),_c('b-row',[_c('b-col',[_c('b-navbar',{attrs:{\"toggleable\":\"lg\",\"type\":\"light\"}},[_c('b-button-toolbar',{attrs:{\"aria-label\":\"Toolbar with button groups and input groups\"}},[_c('b-button-group',{staticClass:\"mr-1\"},[_c('b-button',{attrs:{\"to\":(\"/session/view/\" + (_vm.item.ident))}},[_c('i',{staticClass:\"fas fa-arrow-up\"}),_vm._v(\" Session \")])],1)],1)],1),_c('b-row',[_c('b-col',[_c('b-form-group',{attrs:{\"label\":\"Episode\"}},[_c('b-form-select',{attrs:{\"options\":_vm.episodeList},on:{\"change\":function($event){return _vm.updateEpisode()}},model:{value:(_vm.selectedEpisodeId),callback:function ($$v) {_vm.selectedEpisodeId=$$v},expression:\"selectedEpisodeId\"}})],1)],1)],1)],1)],1),_c('div',{staticClass:\"mt-2\"}),_c('b-row',[_c('b-col',[_c('embed',{attrs:{\"src\":_vm.videoURL,\"type\":\"video/mp4\",\"height\":\"300px\"}})])],1),_c('b-row',[_c('b-col',[_c('b-card',[_c('b-card-text',[_c('b-table',{attrs:{\"striped\":\"\",\"hover\":\"\",\"table-busy\":\"\",\"items\":_vm.episode,\"fields\":_vm.fields,\"dark\":false,\"small\":false,\"bordered\":false,\"outlined\":false,\"borderless\":false,\"no-provider-paging\":true,\"per-page\":_vm.perPage,\"current-page\":_vm.currentPage},scopedSlots:_vm._u([{key:\"cell(preview)\",fn:function(data){return [_c('img',{attrs:{\"height\":\"80\",\"src\":((_vm.appConfig.API_URL) + \"/api/download/session/\" + (_vm.item.ident) + \"/episode/\" + _vm.selectedEpisodeId + \"/images/\" + (_vm.pad(data.item.episode_step_count,5)) + \".jpg\")}})]}},{key:\"cell(test)\",fn:function(data){return [_vm._v(\" \"+_vm._s(data.item)+\" \")]}}],null,false,3150783779)}),_c('b-pagination',{attrs:{\"total-rows\":_vm.rows,\"per-page\":_vm.perPage,\"aria-controls\":\"datatable\"},model:{value:(_vm.currentPage),callback:function ($$v) {_vm.currentPage=$$v},expression:\"currentPage\"}})],1)],1)],1)],1)],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div v-if=\"item\">\n    <h2><i class=\"fa fa-cube\"></i> Session: {{item.ident}}, Episode: {{selectedEpisodeId}}</h2>\n    <b-container fluid>\n        <b-row>\n            <b-col>\n                <b-alert v-if=\"message\" show variant=\"warning\">{{ message }}</b-alert>\n            </b-col>\n        </b-row>\n        <b-row>\n            <b-col>\n                <b-navbar toggleable=\"lg\" type=\"light\">\n                    <b-button-toolbar aria-label=\"Toolbar with button groups and input groups\">\n                        <b-button-group class=\"mr-1\">\n                            <b-button :to=\"`/session/view/${item.ident}`\">\n                                <i class=\"fas fa-arrow-up\"></i> Session\n                            </b-button>\n                        </b-button-group>\n\n                    </b-button-toolbar>\n                </b-navbar>\n                <b-row>\n                    <b-col>\n                        <b-form-group label=\"Episode\">\n                            <b-form-select :options=\"episodeList\" @change=\"updateEpisode()\" v-model=\"selectedEpisodeId\">\n                            </b-form-select>\n                        </b-form-group>\n                    </b-col>\n                </b-row>\n            </b-col>\n        </b-row>\n        <div class=\"mt-2\"></div>\n        <b-row>\n            <b-col>\n                <embed :src=\"videoURL\" type=\"video/mp4\" height=\"300px\">\n            </b-col>\n        </b-row>\n\n        <b-row>\n            <b-col>\n                <b-card>\n                    <b-card-text>\n                        <b-table striped hover table-busy :items=\"episode\" :fields=\"fields\" :dark=\"false\" :small=\"false\" :bordered=\"false\" :outlined=\"false\" :borderless=\"false\" :no-provider-paging=\"true\" :per-page=\"perPage\" :current-page=\"currentPage\">\n                            <template v-slot:cell(preview)=\"data\">\n                                <img height=\"80\" :src=\"`${appConfig.API_URL}/api/download/session/${item.ident}/episode/${selectedEpisodeId}/images/${pad(data.item.episode_step_count,5)}.jpg`\" />\n                            </template>\n                            <template v-slot:cell(test)=\"data\">\n                                {{data.item}}\n\n                            </template>\n                        </b-table>\n                        <b-pagination v-model=\"currentPage\" :total-rows=\"rows\" :per-page=\"perPage\" aria-controls=\"datatable\"></b-pagination>\n                    </b-card-text>\n                </b-card>\n            </b-col>\n        </b-row>\n    </b-container>\n</div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport axios from \"axios\";\nimport gql from \"graphql-tag\";\nimport {\n    timelength,\n    timedelta,\n    timepretty\n} from \"../funcs\";\nimport {\n    appConfig\n} from \"../app.config\"\n\nfunction formatNum(num, prec) {\n    if (num == null) {\n        return \"\";\n    } else if (isNaN(num)) {\n        return \"NaN\";\n    } else {\n        return num.toPrecision(prec);\n    }\n}\n\nfunction pad(n, width, z) {\n    z = z || '0';\n    n = n + '';\n    return n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;\n}\nconst fields = [{\n        key: \"episode_step_count\",\n        label: \"Step\",\n    },\n    {\n        key: \"reward\",\n        label: \"Reward\",\n        formatter: (v) => {\n            return formatNum(v, 3)\n        }\n    },\n    {\n        key: \"observation\",\n        label: \"Observation\"\n    },\n    {\n        key: \"preview\",\n        label: \"Preview\",\n        formatter: (v) => {\n            if (v == null || v.includes(\"ENCODE_FAILED\")) {\n                return \"NA\"\n            } else {\n                return v\n            }\n        }\n\n    },\n    {\n        key: \"done\",\n        label: \"Done\"\n\n    },\n    {\n        key: \"action\",\n        label: \"Action (after observation)\"\n    },\n\n];\n\nconst GET_SESSION = gql `\n  query GetSession($ident: String!) {\n    session(ident: $ident) {\n        id\n      ident\n      envSpecId\n      created\n      config\n      runInfo\n      status\n      createdTimestamp\n    }\n  }\n`;\n\nexport default {\n    name: \"Session\",\n    components: {},\n    apollo: {\n        // Simple query that will update the 'hello' vue property\n        session: {\n            query: GET_SESSION,\n            variables() {\n                return {\n                    ident: this.uid,\n                };\n            },\n        },\n    },\n    data() {\n        return {\n            appConfig,\n            perPage: 10,\n            currentPage: 1,\n            session: {},\n            fields,\n            selectedEpisodeId: null,\n\n            episodes: [],\n            episode: [],\n            maxEpisode: \"\",\n            message: \"\",\n            imageURL: \"placeholder.jpg\",\n            videoURL: \"\"\n\n        };\n    },\n    props: {\n        uid: String,\n        episodeId: String\n    },\n    computed: {\n        episodeList() {\n\n            if (this.episodes.length == 0)\n                return []\n            else\n                return this.episodes.map(v => {\n                    return {\n                        text: v,\n                        value: v\n                    }\n                })\n\n        },\n        item() {\n            return this.session;\n        },\n        rows() {\n            return this.episode.length;\n        },\n    },\n    mounted() {\n        //\n    },\n    methods: {\n        pad,\n        updateEpisode() {\n            this.$router.push({\n                path: `/episode/view/${this.uid}`,\n                query: {\n                    episodeId: this.selectedEpisodeId\n                }\n            });\n            this.loadData()\n\n        },\n        timedelta,\n        timelength,\n        getImageId(uid) {\n            let id = parseInt(uid.split(\"-\")[1]);\n            return id % 19;\n        },\n        formatNum,\n        imageError(event) {\n            console.log(event);\n            this.imageURL = \"placeholder.jpg\";\n        },\n\n        loadData() {\n            console.log(this.uid);\n            // ${appConfig.API_URL}/api/session_episode_mp4/${this.uid}/${this.maxEpisode}\n            axios\n                .get(`${appConfig.API_URL}/api/session_episodes/${this.uid}`)\n                .then((response) => {\n                    // JSON responses are automatically parsed.\n                    const data = response.data[\"items\"]\n                    if (data)\n                        this.episodes = data; // flattenObject(response.data['sessions'])\n\n                })\n                .catch((e) => {\n                    this.error = e;\n                });\n\n            axios\n                .get(`${appConfig.API_URL}/api/session_episode_by_id/${this.uid}/${this.selectedEpisodeId}`)\n                .then((response) => {\n                    console.log(JSON.stringify(response, null, 2))\n                    const data = response.data[\"item\"]\n                    const result = []\n\n                    if (data != null) {\n                        const keys = Object.keys(data)\n                        const size = data[keys[0]].length\n\n                        for (let i = 0; i < size; i++) {\n                            const container = {};\n                            keys.forEach(k => {\n                                container[k] = data[k][i]\n\n                            })\n                            result.push(container)\n                        }\n                    }\n\n                    // JSON resonses are automatically parsed.\n                    this.episode = result\n                    this.videoURL = `${appConfig.API_URL}/api/session_episode_mp4/${this.uid}/${this.selectedEpisodeId}`;\n\n                })\n                .catch((e) => {\n                    this.error = e;\n                    console.log(this.error)\n                });\n\n        },\n    },\n    // Fetches posts when the component is created.\n    created() {\n        this.selectedEpisodeId = this.episodeId\n\n        this.loadData();\n    },\n    beforeDestroy() {\n        //\n    },\n};\n</script>\n\n<style>\n/* a.page-link{\n   color: black;\n } */\n.plot {\n    height: 350px;\n}\n\n.plotcontainer {\n    border-style: solid;\n    border-width: 1px;\n    border-color: #ccc;\n    /* padding: 10px; */\n    margin: 4px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EpisodeView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EpisodeView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EpisodeView.vue?vue&type=template&id=ef63da74&\"\nimport script from \"./EpisodeView.vue?vue&type=script&lang=js&\"\nexport * from \"./EpisodeView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EpisodeView.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}