{"version":3,"sources":["webpack:///./src/views/TaskView.vue?3dd2","webpack:///src/views/TaskView.vue","webpack:///./src/views/TaskView.vue?21c2","webpack:///./src/views/TaskView.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","attrs","_s","taskConfig","task","summary","_e","staticClass","uid","directives","name","rawName","modifiers","status","on","$event","taskControl","appConfig","created","statusMsg","parentTaskId","parentTask","specId","primarySessionId","sessionData","length","fields","scopedSlots","_u","key","fn","data","item","ident","subtaskData","subtaskfields","staticRenderFns","component"],"mappings":"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","file":"js/chunk-2d20f914.103a6736.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',[_vm._v(\"Task Details\")]),_c('b-modal',{attrs:{\"id\":\"modal-config\",\"title\":\"View config\"}},[_c('div',[_c('pre',[_vm._v(_vm._s(_vm.taskConfig))])])]),_c('b-modal',{attrs:{\"id\":\"modal-summary\",\"title\":\"View Summary\"}},[(_vm.task && _vm.task.summary)?_c('pre',[_vm._v(\"        \"+_vm._s(_vm.task.summary)+\"\\n        \")]):_vm._e()]),_c('b-modal',{attrs:{\"id\":\"modal-modify-source\",\"title\":\"TODO\"}},[_vm._v(\" TODO \")]),_c('b-button-toolbar',{staticClass:\"mr-1\",attrs:{\"size\":\"sm\"}},[_c('b-button',{attrs:{\"size\":\"sm\",\"to\":(\"/data_browser/?path=task/\" + _vm.uid)}},[_vm._v(\"Browse Data\")]),_c('b-button',{staticClass:\"ml-1\",attrs:{\"size\":\"sm\",\"to\":(\"/task/new/agenttask/\" + (_vm.task.ident))}},[_vm._v(\"Duplicate\")]),_c('b-button',{directives:[{name:\"b-modal\",rawName:\"v-b-modal.modal-config\",modifiers:{\"modal-config\":true}}],staticClass:\"ml-1\",attrs:{\"size\":\"sm\"}},[_vm._v(\"View Config\")]),_c('b-button',{directives:[{name:\"b-modal\",rawName:\"v-b-modal.modal-summary\",modifiers:{\"modal-summary\":true}}],staticClass:\"ml-1\",attrs:{\"size\":\"sm\"}},[_vm._v(\"View Summary\")]),_c('b-button',{directives:[{name:\"b-toggle\",rawName:\"v-b-toggle.logs\",modifiers:{\"logs\":true}}],staticClass:\"ml-1\",attrs:{\"size\":\"sm\",\"variant\":\"info\"}},[_vm._v(\"Log\")]),(_vm.task.status && _vm.task.status == 'RUNNING')?_c('b-button',{staticClass:\"ml-1\",attrs:{\"size\":\"sm\",\"variant\":\"danger\"},on:{\"click\":function($event){return _vm.taskControl('STOP')}}},[_vm._v(\"Abort\")]):_vm._e(),(_vm.task.status && (_vm.task.status == 'ABORTED' || _vm.task.status == 'TERMINATED'))?_c('b-button',{staticClass:\"ml-1\",attrs:{\"size\":\"sm\",\"variant\":\"success\"},on:{\"click\":function($event){return _vm.taskControl('RUN')}}},[_vm._v(\"Run\")]):_vm._e(),_c('b-button',{directives:[{name:\"b-modal\",rawName:\"v-b-modal.modal-modify-source\",modifiers:{\"modal-modify-source\":true}}],staticClass:\"ml-1\",attrs:{\"size\":\"sm\"}},[_vm._v(\"Run in debug mode (TODO)\")]),_c('b-button',{directives:[{name:\"b-modal\",rawName:\"v-b-modal.modal-modify-source\",modifiers:{\"modal-modify-source\":true}}],staticClass:\"ml-1\",attrs:{\"size\":\"sm\"}},[_vm._v(\"Modify Source Code (TODO)\")])],1),_c('div',{staticClass:\"mt-4\"}),_c('b-collapse',{staticClass:\"mt-2\",attrs:{\"id\":\"logs\"}},[_c('LogViewer',{attrs:{\"logStreamUrl\":((_vm.appConfig.API_URL) + \"/api/stream/entity_logs/task/\" + _vm.uid)}})],1),_c('b-container',{attrs:{\"fluid\":\"\"}},[_c('b-row',[_c('b-col',[_c('b-card',{staticClass:\"h-100\"},[_c('b-card-text',{staticClass:\"pl-2\"},[_c('div',{staticClass:\"pt-2\"},[_c('div',{staticClass:\"data_label\"},[_vm._v(\"UID\")]),_c('span',[_vm._v(_vm._s(_vm.uid))])]),_c('div',{staticClass:\"pt-2\"},[_c('div',{staticClass:\"data_label\"},[_vm._v(\"Creation Time\")]),_c('span',[_vm._v(_vm._s(_vm.task.created))])]),_c('div',{staticClass:\"pt-2\"},[_c('div',{staticClass:\"data_label\"},[_vm._v(\"Status\")]),(_vm.task.status)?_c('div',[_vm._v(\" \"+_vm._s(_vm.task.status)+\" \"),(_vm.task.status && _vm.task.statusMsg)?_c('span',{},[_vm._v(\"(\"+_vm._s(_vm.task.statusMsg)+\")\")]):_vm._e()]):_vm._e()])])],1)],1),_c('b-col',[_c('b-card',{staticClass:\"h-100\"},[_c('b-card-text',[_c('div',{staticClass:\"pt-2\"},[_c('div',{staticClass:\"data_label\"},[_vm._v(\"Parent Task\")]),(_vm.task.parentTask)?_c('div',[_c('router-link',{attrs:{\"to\":(\"/task/view/\" + (_vm.task.parentTaskId))}},[_vm._v(_vm._s(_vm.task.parentTaskId))]),_vm._v(\" (\"+_vm._s(_vm.task.parentTask.specId)+\") \")],1):_c('div',[_vm._v(\"No Parent\")])]),_c('div',{staticClass:\"pt-2\"},[_c('div',{staticClass:\"data_label\"},[_vm._v(\"Primary Session\")]),(_vm.task.primarySessionId)?_c('div',[_c('router-link',{attrs:{\"to\":(\"/session/view/\" + (_vm.task.primarySessionId))}},[_vm._v(_vm._s(_vm.task.primarySessionId))])],1):_c('div',[_vm._v(\"No Primary Session\")])])])],1)],1)],1),_c('div',{staticClass:\"mt-4\"}),_c('b-row',[_c('b-col',[(_vm.sessionData.length>0)?_c('div',[_c('b-card',{staticClass:\"mt-3\",attrs:{\"title\":\"Sessions\"}},[_c('b-table',{attrs:{\"striped\":\"\",\"hover\":\"\",\"table-busy\":\"\",\"items\":_vm.sessionData,\"fields\":_vm.fields,\"dark\":false,\"small\":false},scopedSlots:_vm._u([{key:\"cell(link)\",fn:function(data){return [_c('router-link',{attrs:{\"to\":(\"/session/view/\" + (data.item.ident))}},[_vm._v(_vm._s(data.item.ident))])]}}],null,false,3670971571)})],1)],1):_vm._e()])],1),_c('div',{staticClass:\"mt-4\"}),_c('b-row',[_c('b-col',[(_vm.subtaskData.length > 0)?_c('b-card',{attrs:{\"title\":\"Sub Tasks\"}},[_c('b-table',{attrs:{\"hover\":\"\",\"table-busy\":\"\",\"items\":_vm.subtaskData,\"fields\":_vm.subtaskfields,\"dark\":false,\"small\":false},scopedSlots:_vm._u([{key:\"cell(link)\",fn:function(data){return [_c('router-link',{attrs:{\"to\":(\"/task/view/\" + (data.item.ident))}},[_vm._v(_vm._s(data.item.ident))])]}}],null,false,2816067904)})],1):_vm._e()],1)],1)],1),_c('div',{staticClass:\"mt-4\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div>\n    <h1>Task Details</h1>\n\n    <b-modal id=\"modal-config\" title=\"View config\">\n        <div>\n            <pre>{{ taskConfig }}</pre>\n        </div>\n    </b-modal>\n\n    <b-modal id=\"modal-summary\" title=\"View Summary\">\n        <pre v-if=\"task && task.summary\">\n        {{task.summary}}\n        </pre>\n    </b-modal>\n\n\n    <b-modal id=\"modal-modify-source\" title=\"TODO\">\n        TODO    \n    </b-modal>\n\n\n    <b-button-toolbar size=\"sm\" class=\"mr-1\">\n\n        <b-button size=\"sm\" :to=\"`/data_browser/?path=task/${uid}`\">Browse Data</b-button>\n        <b-button size=\"sm\" class=\"ml-1\" :to=\"`/task/new/agenttask/${task.ident}`\">Duplicate</b-button>\n        <b-button size=\"sm\" class=\"ml-1\" v-b-modal.modal-config>View Config</b-button>\n        <b-button size=\"sm\" class=\"ml-1\" v-b-modal.modal-summary>View Summary</b-button>\n        <b-button size=\"sm\" class=\"ml-1\" v-b-toggle.logs variant=\"info\">Log</b-button>\n        <b-button size=\"sm\" class=\"ml-1\" v-if=\"task.status && task.status == 'RUNNING'\" variant=\"danger\" v-on:click=\"taskControl('STOP')\">Abort</b-button>\n        <b-button size=\"sm\" class=\"ml-1\" v-if=\"task.status && (task.status == 'ABORTED' || task.status == 'TERMINATED')\" variant=\"success\" v-on:click=\"taskControl('RUN')\">Run</b-button>\n        <b-button size=\"sm\" class=\"ml-1\"  v-b-modal.modal-modify-source >Run in debug mode (TODO)</b-button>\n        <b-button size=\"sm\" class=\"ml-1\"  v-b-modal.modal-modify-source >Modify Source Code (TODO)</b-button>\n\n    </b-button-toolbar>\n\n    <div class=\"mt-4\"></div>\n    <b-collapse id=\"logs\" class=\"mt-2\">\n        <LogViewer :logStreamUrl=\"`${appConfig.API_URL}/api/stream/entity_logs/task/${uid}`\"> </LogViewer>\n    </b-collapse>\n    <b-container fluid>\n\n        <b-row>\n            <b-col>\n                <b-card class=\"h-100\">\n                    <b-card-text class=\"pl-2\">\n                        <div class=\"pt-2\">\n                            <div class=\"data_label\">UID</div>\n                            <span>{{ uid }}</span>\n                        </div>\n\n                        <div class=\"pt-2\">\n                            <div class=\"data_label\">Creation Time</div>\n                            <span>{{ task.created }}</span>\n                        </div>\n\n                        <div class=\"pt-2\">\n                            <div class=\"data_label\">Status</div>\n                            <div v-if=\"task.status\">\n                                {{ task.status }}\n                                <span class=\"\" v-if=\"task.status && task.statusMsg\">({{ task.statusMsg }})</span>\n                            </div>\n                        </div>\n\n                    </b-card-text>\n                </b-card>\n            </b-col>\n            <b-col>\n                <b-card class=\"h-100\">\n                    <b-card-text>\n                        <div class=\"pt-2\">\n                            <div class=\"data_label\">Parent Task</div>\n                            <div v-if=\"task.parentTask\">\n                                <router-link :to=\"`/task/view/${task.parentTaskId}`\">{{task.parentTaskId}}</router-link>\n                                ({{ task.parentTask.specId }})\n                            </div>\n                            <div v-else>No Parent</div>\n                        </div>\n                        <div class=\"pt-2\">\n                            <div class=\"data_label\">Primary Session</div>\n                            <div v-if=\"task.primarySessionId\">\n                                <router-link :to=\"`/session/view/${task.primarySessionId}`\">{{task.primarySessionId}}</router-link>\n                            </div>\n                            <div v-else>No Primary Session</div>\n                        </div>\n                    </b-card-text>\n                </b-card>\n            </b-col>\n        </b-row>\n\n        <div class=\"mt-4\"></div>\n        <b-row>\n            <b-col>\n                <div v-if=\"sessionData.length>0\">\n                    <b-card class=\"mt-3\" title=\"Sessions\">\n\n                        <b-table striped hover table-busy :items=\"sessionData\" :fields=\"fields\" :dark=\"false\" :small=\"false\">\n                            <template v-slot:cell(link)=\"data\">\n                                <!-- `data.value` is the value after formatted by the Formatter -->\n                                <router-link :to=\"`/session/view/${data.item.ident}`\">{{ data.item.ident }}</router-link>\n                            </template>\n                        </b-table>\n                    </b-card>\n                </div>\n            </b-col>\n        </b-row>\n\n        <div class=\"mt-4\"></div>\n        <b-row>\n            <b-col>\n                <b-card v-if=\"subtaskData.length > 0\" title=\"Sub Tasks\">\n                    <b-table hover table-busy :items=\"subtaskData\" :fields=\"subtaskfields\" :dark=\"false\" :small=\"false\">\n                        <template v-slot:cell(link)=\"data\">\n                            <!-- `data.value` is the value after formatted by the Formatter -->\n                            <router-link :to=\"`/task/view/${data.item.ident}`\">{{\n                  data.item.ident\n                }}</router-link>\n                        </template>\n                    </b-table>\n                </b-card>\n            </b-col>\n        </b-row>\n    </b-container>\n\n    <div class=\"mt-4\"></div>\n</div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport axios from \"axios\";\nimport {\n    appConfig\n} from \"../app.config\";\nimport {\n    timedelta,\n    timepretty\n} from \"../funcs\";\nimport gql from \"graphql-tag\";\nimport LogViewer from \"../components/LogViewer.vue\";\n\nconst fields = [{\n        key: \"link\",\n        label: \"Session\",\n        sortable: true,\n    },\n    {\n        key: \"envSpecId\",\n        label: \"Environment\",\n    },\n    {\n        key: \"created\",\n        label: \"Created\",\n        sortable: true,\n        // formatter: timepretty,\n    },\n    {\n        key: \"status\",\n        label: \"State\",\n    }\n];\n\nconst subtaskfields = [{\n        key: \"link\",\n        label: \"Task\",\n        sortable: true,\n    },\n\n    {\n        key: \"specId\",\n        label: \"Spec Id\",\n        sortable: true,\n    },\n\n    {\n        key: \"created\",\n        label: \"Created\",\n        sortable: true,\n    },\n    {\n        key: \"status\",\n        label: \"State\",\n    },\n];\n\nconst GET_TASK = gql `\n  query GetTask($ident: String!) {\n    task(ident: $ident) {\n      id\n      ident\n      status\n      statusMsg\n\n      config\n      created\n      summary\n\n      primarySessionId\n      parentTaskId\n      parentTask {\n        specId\n      }\n      sessions {\n        pageInfo {\n          startCursor\n          endCursor\n        }\n        edges {\n          node {\n              id\n            ident\n            envSpecId\n            agentId\n            created\n            status\n            summary\n          }\n        }\n      }\n      childTasks {\n        pageInfo {\n          startCursor\n          endCursor\n        }\n        edges {\n          node {\n              id\n            ident\n            created\n            specId\n            status\n            summary\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport default {\n    name: \"Task\",\n    components: {\n        LogViewer\n    },\n    apollo: {\n        // Simple query that will update the 'hello' vue property\n        task: {\n            query: GET_TASK,\n            variables() {\n                return {\n                    ident: this.uid,\n                };\n            },\n            pollInterval: 2000\n        },\n    },\n    data() {\n        return {\n            appConfig,\n            fields,\n            subtaskfields,\n            task: {},\n            taskLogData: [],\n            error: \"\",\n            intervalTimer: null,\n        };\n    },\n    props: {\n        uid: String,\n    },\n    computed: {\n        taskConfig() {\n            if (!this.task.config) {\n                return \"\";\n            }\n            return JSON.parse(this.task.config);\n        },\n        taskSummary() {\n            if (!this.task || !this.task.summary) {\n                return \"{}\";\n            }\n            return JSON.stringify(this.task.summary)\n        },\n        sessionData() {\n            const rows = [];\n            if (this.task.sessions == null || this.task.sessions.edges.length == 0) {\n                return [];\n            }\n            for (const session of this.task.sessions.edges) {\n                rows.push(session.node);\n            }\n            return rows;\n        },\n\n        subtaskData() {\n            const rows = [];\n            if (this.task.childTasks == null || this.task.childTasks.edges.length == 0) {\n                return [];\n            }\n            for (const childTask of this.task.childTasks.edges) {\n                rows.push(childTask.node);\n                //\n            }\n\n            return rows;\n        },\n    },\n    methods: {\n        timepretty,\n        taskControl(action) {\n            if (action == \"STOP\") {\n                axios\n                    .get(`${appConfig.API_URL}/api/admin/task/stop/${this.uid}`)\n                    .then((response) => {\n                        // JSON responses are automatically parsed.\n                        this.message = response.data[\"message\"];\n                    })\n                    .catch((e) => {\n                        this.error = e;\n                        this.message = this.error;\n                    });\n            } else if (action == \"RUN\") {\n                console.log(\"RUN\")\n                axios\n                    .get(`${appConfig.API_URL}/api/admin/task/run/${this.uid}`)\n                    .then((response) => {\n                        // JSON responses are automatically parsed.\n                        this.message = response.data[\"message\"];\n                        console.log(this.message)\n                    })\n                    .catch((e) => {\n                        this.error = e;\n                        this.message = this.error;\n                        console.log(this.error)\n                    })\n            }\n        },\n    },\n    // Fetches posts when the component is created.\n    created() {\n        console.log(this.uid);\n        this.intervalTimer = setInterval(() => {\n            if (!this.$apollo.queries.task.loading) {\n                if (this.task.status && (this.task.status == \"RUNNING\" || this.task.status == \"CREATED\"))\n                    this.$apollo.queries.task.refetch();\n                else {\n                    clearInterval(this.intervalTimer);\n                }\n            }\n        }, 1000);\n    },\n    beforeDestroy() {\n        if (this.intervalTimer) clearInterval(this.intervalTimer);\n    },\n};\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TaskView.vue?vue&type=template&id=2af86818&\"\nimport script from \"./TaskView.vue?vue&type=script&lang=js&\"\nexport * from \"./TaskView.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}