(self.webpackChunkttgtcanvas=self.webpackChunkttgtcanvas||[]).push([[261,568],{1568:(e,t,n)=>{e.exports=n(1367),e.exports.version=n(306).version},6261:(e,t,n)=>{var o=n(1568),s=n(1337);e.exports={id:"ttgtcanvas:plugin",requires:[s.IJupyterWidgetRegistry],activate:function(e,t){t.registerWidget({name:"ttgtcanvas",version:o.version,exports:o})},autoStart:!0}},6454:(e,t,n)=>{var o=n(1337),s=n(5431),i=o.DOMWidgetModel.extend({defaults:s.extend(o.DOMWidgetModel.prototype.defaults(),{_model_name:"BaseModel",_view_name:"BaseView",_model_module:"ttgtcanvas",_view_module:"ttgtcanvas",_model_module_version:"0.2.0",_view_module_version:"0.2.0",current_call:"{}",method_return:"{}"})}),a=o.DOMWidgetView.extend({init:function(){this.model.on("change:current_call",this.method_changed,this)},method_changed:function(){console.log("current_call");let e=JSON.parse(this.model.get("current_call"));console.log("current_call",this);let t="function"==typeof this[e.method_name]?this[e.method_name].apply(this,e.params):null;console.log("current_call",e);let n=this;return Promise.resolve(t).then((function(t){console.log("reached in promise");let o=JSON.stringify({value:t,cb:+new Date,params:e.params,method:e.method_name});return console.log("setting return",o),n.model.set("method_return",o),n.model.save_changes(),o}))}});e.exports={BaseModel:i,BaseView:a}},7795:(e,t,n)=>{var o=n(6454),s=n(4827),i=o.BaseModel.extend({defaults:_.extend(o.BaseModel.defaults,{_model_name:"MazeModel",_view_name:"MazeView"})});class a{constructor(e){Object.assign(this,e),this.points=[],this.trace_enabled=!0,this.pending_moves=[],this.delay=.2;let t=this;new s.Image.fromURL(this.src,(function(e){t.set_node(e),e.setAttrs({x:100,y:100}),t.layer.add(e),t.layer.batchDraw()}))}set_node(e){for(this.node=e;this.pending_moves.length>0;){let[e,t]=this.pending_moves.shift();console.log("ðŸš€ ~ file: maze.js ~ line 92 ~ Robot ~ set_node ~ this.pending_moves",this.pending_moves,e,t),this.move_to(e,t)}}add_point(e,t){this.points.concat([e,t]),console.log(this.points)}move_to(e,t){if(!this.node)return void this.pending_moves.push([e,t]);let n=this;var o=new s.Animation((function(o){n.node.x(e),n.node.y(t)}),this.layer);o.start();let i=this.node.position();i.x===e&&i.y===t&&o.stop()}}var r=o.BaseView.extend({render:function(){this.init(),this._elem=document.createElement("div"),this._elem.id="container",this.el.append(this._elem),this.robots=[]},add_robot:function(e,t,n,o,s,i){this.robots[e]=new a({layer,avenue:n,street:o,orientation:s,beepers:i,src:t})},move_to:function(e,t,n){this.robots[e].move_to(t,n)},add_point:function(e,t,n){this.robots[e].add_point(t,n)},remove_trace:function(e){let t=this.robots[e];t.trace_enabled=!1,t.clear_trace()},set_pause:function(e,t){this.robots[e].delay=t},set_trace:function(e,t,n,o="blue"){let s=this.robots[e];s.trace_enabled=!0,s.traceColor=o,s.add_point(t,n)},draw_grid:function(e,t,n,o,i,a,r){return new Promise((function(r,d){this.stage=new s.Stage({container:"container",width:e,height:t}),console.log(this.stage),this.layer=new s.Layer,this.stage.add(layer),this.ts=i;let l=2*i,c=l+2*i*n,h=t-2*i,_=h-2*i*o;!function(e,t,n,o,i,a){for(let r=0;r<t;r++){let t=o+n*(2*r+1);console.log(t);let d=new s.Line({stroke:"gray",points:[t,a,t,i]}),l=new s.Text({text:r+1,x:t-2,y:i+n-10});e.add(d),e.add(l)}}(layer,n,i,l,h,_),function(e,t,n,o,i,a){for(let r=0;r<t;r++){let t=i-n*(2*r+1),d=new s.Line({stroke:"gray",points:[o,t,a,t]}),l=new s.Text({text:r+1,y:t-2,x:o-n+5});e.add(d),e.add(l)}}(layer,o,i,l,h,c);let u=new s.Line({stroke:"darkred",points:[l,h,c,h,c,_,l,_],strokeWidth:10,closed:!0});layer.add(u),function(e,t,n,o,i){const a=function(e,t){return[n+i*e,o-i*t]};t.map((function([t,n]){let o=[];o=t%2==0?[...a(t,n-1),...a(t,n+1)]:[...a(t-1,n),...a(t+1,n)];let i=new s.Line({stroke:"darkred",strokeWidth:10,closed:!0,points:o});e.add(i)}))}(layer,a,l,h,i),layer.draw(),r("done drawing")}))}});e.exports={MazeModel:i,MazeView:r}},1367:(e,t,n)=>{var o=n(6454),s=n(7795);e.exports={...o,...s}},306:e=>{"use strict";e.exports={version:"0.2.0"}}}]);