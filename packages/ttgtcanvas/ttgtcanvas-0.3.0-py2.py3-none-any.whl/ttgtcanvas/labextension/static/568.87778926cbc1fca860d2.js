(self.webpackChunkttgtcanvas=self.webpackChunkttgtcanvas||[]).push([[568],{1568:(e,t,n)=>{e.exports=n(1367),e.exports.version=n(306).version},6454:(e,t,n)=>{var i=n(1337),s=n(5431),o=i.DOMWidgetModel.extend({defaults:s.extend(i.DOMWidgetModel.prototype.defaults(),{_model_name:"BaseModel",_view_name:"BaseView",_model_module:"ttgtcanvas",_view_module:"ttgtcanvas",_model_module_version:"0.2.2",_view_module_version:"0.2.2",current_call:"{}",method_return:"{}"})}),r=i.DOMWidgetView.extend({init:function(){this.model.on("change:current_call",this.method_changed,this)},method_changed:function(){console.log("current_call");let e=JSON.parse(this.model.get("current_call"));console.log("current_call",this);let t="function"==typeof this[e.method_name]?this[e.method_name].apply(this,e.params):null;console.log("current_call",e);let n=this;return Promise.resolve(t).then((function(t){console.log("reached in promise");let i=JSON.stringify({value:t,cb:+new Date,params:e.params,method:e.method_name});return console.log("setting return",i),n.model.set("method_return",i),n.model.save_changes(),i}))}});e.exports={BaseModel:o,BaseView:r}},7795:(e,t,n)=>{var i=n(6454),s=n(4827),o=i.BaseModel.extend({defaults:_.extend(i.BaseModel.defaults,{_model_name:"MazeModel",_view_name:"MazeView"})});const r=function(e,t,n,i,o,r,a){let l=.6*r,d=new s.Circle({radius:l,x:i,y:o,fill:"yellow",stroke:"orange",strokeWidth:5,name:`beeper-${t}-${n}-circle`}),h=new s.Text({text:a,x:i-5,y:o-7,fontSize:18,name:`beeper-${t}-${n}-text`});e.add(d,h)};class a{constructor(e){Object.assign(this,e),this.points=[],this.trace_enabled=!1,this.traceColor="black",this.trace=null,this.pending_moves=[],this.delay=.2;let t=this;new s.Image.fromURL(this.src,(function(e){t.set_node(e),e.setAttrs({x:100,y:100}),t.layer.add(e),t.layer.batchDraw()}))}set_node(e){for(this.node=e;this.pending_moves.length>0;){let[e,t]=this.pending_moves.shift();this.move_to(e,t)}}add_point(e,t){this.points=this.points.concat([e,t]),console.log(this.points)}clear_trace(){this.points=[],this.line_layer.destroyChildren(),this.line_layer.draw()}enable_trace(){this.trace_enabled=!0}draw_trace(){let e=new s.Line({points:this.points.slice(Math.max(this.points.length-4,0)),stroke:this.traceColor});this.line_layer.add(e),this.line_layer.draw()}move_to(e,t){if(!this.node)return void this.pending_moves.push([e,t]);let n=this;var i=new s.Animation((function(i){n.node.x(e-15),n.node.y(t-15)}),this.layer);i.start();let o=this.node.position();o.x===e&&o.y===t&&i.stop()}}var l=i.BaseView.extend({render:function(){this.init(),console.log("ðŸš€ ~ file: maze.js ~ line 167 ~ this.el",this.el),this._elem=document.createElement("div"),this._elem.setAttribute("id","container"),this.layer=new s.Layer,this.line_layer=new s.Layer,this.el.appendChild(this._elem),this.robots=[]},add_robot:function(e,t,n,i,s,o){this.robots[e]=this.robots[e]||new a({layer:this.layer,line_layer:this.line_layer,avenue:n,street:i,orientation:s,beepers:o,src:t})},move_to:function(e,t,n){this.robots[e].move_to(t,n)},add_point:function(e,t,n){let i=this.robots[e];i.add_point(t,n),i.draw_trace()},remove_trace:function(e){let t=this.robots[e];t.trace_enabled=!1,t.clear_trace()},set_pause:function(e,t){this.robots[e].delay=t},set_trace:function(e,t,n,i="blue"){let s=this.robots[e];s.enable_trace(),s.traceColor=i,s.add_point(t,n)},init_robot:function(e){this.robots[e].clear_trace()},add_beeper:function(e,t,n,i,s){r(this.layer,e,t,n,i,this.ts,s)},update_beeper:function(e,t,n){this.layer.find(`.beeper-${e}-${t}-text`).text(n),this.layer.draw()},remove_beeper:function(e,t){let n=this.layer.find(`.beeper-${e}-${t}-circle`),i=this.layer.find(`.beeper-${e}-${t}-text`);n&&n.destroy(),i&&i.destroy(),this.layer.draw()},draw_grid:function(e,t,n,i,o,a,l){this.stage=new s.Stage({container:"container",width:e,height:t}),console.log(this.stage),this.stage.add(this.layer),this.stage.add(this.line_layer),this.ts=o;let d=2*o,h=d+2*o*n,c=t-2*o,_=c-2*o*i;!function(e,t,n,i,o,r){for(let a=1;a<t;a++){let t=i+n*(2*a);console.log(t);let l=new s.Line({stroke:"gray",points:[t,r,t,o]}),d=new s.Text({text:a,x:t-2,y:o+n-10});e.add(l),e.add(d)}}(this.layer,n,o,d,c,_),function(e,t,n,i,o,r){for(let a=1;a<t;a++){let t=o-n*(2*a),l=new s.Line({stroke:"gray",points:[i,t,r,t]}),d=new s.Text({text:a,y:t-2,x:i-n+5});e.add(l),e.add(d)}}(this.layer,i,o,d,c,h);let u=new s.Line({stroke:"darkred",points:[d,c,h,c,h,_,d,_],strokeWidth:10,closed:!0});this.layer.add(u),function(e,t,n,i,o){const r=function(e,t){return[n+o*e,i-o*t]};t.map((function([t,n]){let i=[];i=t%2==0?[...r(t,n-1),...r(t,n+1)]:[...r(t-1,n),...r(t+1,n)];let o=new s.Line({stroke:"darkred",strokeWidth:10,closed:!0,points:i});e.add(o)}))}(this.layer,a,d,c,o),function(e,t,n,i,s){t.map((function(t){let o=t.key[0],a=t.key[1];const[l,d]=[n+s*(2*o-1),i-s*(2*a-1)];let h=t.value;r(e,o,a,l,d,s,h)}))}(this.layer,l,d,c,o),this.layer.draw()}});e.exports={MazeModel:o,MazeView:l}},1367:(e,t,n)=>{var i=n(6454),s=n(7795);e.exports={...i,...s}},306:e=>{"use strict";e.exports={version:"0.2.2"}}}]);