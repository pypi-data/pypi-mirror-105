(self.webpackChunkttgtcanvas=self.webpackChunkttgtcanvas||[]).push([[568],{1568:(e,t,o)=>{e.exports=o(1367),e.exports.version=o(306).version},6454:(e,t,o)=>{var n=o(1337),s=o(5431),i=n.DOMWidgetModel.extend({defaults:s.extend(n.DOMWidgetModel.prototype.defaults(),{_model_name:"BaseModel",_view_name:"BaseView",_model_module:"ttgtcanvas",_view_module:"ttgtcanvas",_model_module_version:"0.2.0",_view_module_version:"0.2.0",current_call:"{}",method_return:"{}"})}),a=n.DOMWidgetView.extend({init:function(){this.model.on("change:current_call",this.method_changed,this)},method_changed:function(){console.log("current_call");let e=JSON.parse(this.model.get("current_call"));console.log("current_call",this);let t="function"==typeof this[e.method_name]?this[e.method_name].apply(this,e.params):null;console.log("current_call",e);let o=this;return Promise.resolve(t).then((function(t){console.log("reached in promise");let n=JSON.stringify({value:t,cb:+new Date,params:e.params,method:e.method_name});return console.log("setting return",n),o.model.set("method_return",n),o.model.save_changes(),n}))}});e.exports={BaseModel:i,BaseView:a}},7795:(e,t,o)=>{var n=o(6454),s=o(4827),i=n.BaseModel.extend({defaults:_.extend(n.BaseModel.defaults,{_model_name:"MazeModel",_view_name:"MazeView"})});class a{constructor(e){Object.assign(this,e),this.points=[],this.trace_enabled=!0,this.pending_moves=[],this.delay=.2;let t=this;new s.Image.fromURL(this.src,(function(e){t.set_node(e),e.setAttrs({x:100,y:100}),t.layer.add(e),t.layer.batchDraw()}))}set_node(e){for(this.node=e;this.pending_moves.length>0;){let[e,t]=this.pending_moves.shift();console.log("ðŸš€ ~ file: maze.js ~ line 92 ~ Robot ~ set_node ~ this.pending_moves",this.pending_moves,e,t),this.move_to(e,t)}}add_point(e,t){this.points.concat([e,t]),console.log(this.points)}move_to(e,t){if(!this.node)return void this.pending_moves.push([e,t]);let o=this;var n=new s.Animation((function(n){o.node.x(e),o.node.y(t)}),this.layer);n.start();let i=this.node.position();i.x===e&&i.y===t&&n.stop()}}var r=n.BaseView.extend({render:function(){this.init(),this._elem=document.createElement("div"),this._elem.id="container",this.el.append(this._elem),this.robots=[]},add_robot:function(e,t,o,n,s,i){this.robots[e]=new a({layer,avenue:o,street:n,orientation:s,beepers:i,src:t})},move_to:function(e,t,o){this.robots[e].move_to(t,o)},add_point:function(e,t,o){this.robots[e].add_point(t,o)},remove_trace:function(e){let t=this.robots[e];t.trace_enabled=!1,t.clear_trace()},set_pause:function(e,t){this.robots[e].delay=t},set_trace:function(e,t,o,n="blue"){let s=this.robots[e];s.trace_enabled=!0,s.traceColor=n,s.add_point(t,o)},draw_grid:function(e,t,o,n,i,a,r){return new Promise((function(r,l){this.stage=new s.Stage({container:"container",width:e,height:t}),console.log(this.stage),this.layer=new s.Layer,this.stage.add(layer),this.ts=i;let d=2*i,c=d+2*i*o,h=t-2*i,_=h-2*i*n;!function(e,t,o,n,i,a){for(let r=0;r<t;r++){let t=n+o*(2*r+1);console.log(t);let l=new s.Line({stroke:"gray",points:[t,a,t,i]}),d=new s.Text({text:r+1,x:t-2,y:i+o-10});e.add(l),e.add(d)}}(layer,o,i,d,h,_),function(e,t,o,n,i,a){for(let r=0;r<t;r++){let t=i-o*(2*r+1),l=new s.Line({stroke:"gray",points:[n,t,a,t]}),d=new s.Text({text:r+1,y:t-2,x:n-o+5});e.add(l),e.add(d)}}(layer,n,i,d,h,c);let m=new s.Line({stroke:"darkred",points:[d,h,c,h,c,_,d,_],strokeWidth:10,closed:!0});layer.add(m),function(e,t,o,n,i){const a=function(e,t){return[o+i*e,n-i*t]};t.map((function([t,o]){let n=[];n=t%2==0?[...a(t,o-1),...a(t,o+1)]:[...a(t-1,o),...a(t+1,o)];let i=new s.Line({stroke:"darkred",strokeWidth:10,closed:!0,points:n});e.add(i)}))}(layer,a,d,h,i),layer.draw(),r("done drawing")}))}});e.exports={MazeModel:i,MazeView:r}},1367:(e,t,o)=>{var n=o(6454),s=o(7795);e.exports={...n,...s}},306:e=>{"use strict";e.exports={version:"0.2.0"}}}]);