(self.webpackChunkatoti_jupyterlab=self.webpackChunkatoti_jupyterlab||[]).push([[1331],{44354:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Xt});const n="default",i="Content-Type",o="application/json",r=(e,{requestInit:t={}}={})=>async(s,{body:n,contentType:r=o,method:a}={})=>{const d=`${e}${s.startsWith("/")?s:`/${s}`}`,l=await fetch(d,{...t,body:n,headers:{...t.headers,...r?{[i]:r}:{}},method:a});if(![200,201].includes(l.status)){const e=await l.json();throw console.error(e),new Error(`Unexpected response status: ${l.status}`)}const c=l.headers.get(i)===o,u=await(c?l.json():l.text());if(c){const{data:e}=u;return void 0===e?u:e}return u},a="ROLE_ADMIN",d="ROLE_USER",l="anonymousUser";var c=s(97030),u=s.n(c);const h=e=>void 0!==e,g=(...e)=>{if(!window.__UNSTABLE_DATA_TEST_IDS_ENABLED__)return;const t=e[e.length-1];if(u()(t)){const s=t["data-testid"],n=e.slice(0,-1).filter(h);if(s){const e=s.replace("atoti:","");return`atoti:${[...n.filter(h),e].join(":")}`}return`atoti:${n.join(":")}`}return`atoti:${e.filter(h).join(":")}`};var p=s(3265);const m=JSON.parse('{"version":1,"serverVersion":"5.10.2-20210331","apis":{"jwt":{"versions":[{"id":"1","restPath":"/jwt/rest/v1"}]},"pivot":{"versions":[{"id":"5","restPath":"/pivot/rest/v5","wsPath":"/pivot/ws/v5"}]},"atoti":{"versions":[{"id":"1","restPath":"/atoti/rest/v1"}]},"content":{"versions":[{"id":"5","restPath":"/content/rest/v5","wsPath":"/content/ws/v5"}]}}}'),y=p.i8,w=m,f="0.5.5";var x=s(68960),C=s(63343),v=s(57777),S=s(26227),b=s(21671),j=s(39030),k=s(9724),M=s(85762);const T=e=>"mapping"in e;var E=s(6168),_=s(88306),I=s.n(_),R=s(56271),D=s(50308),$=s.n(D),L=s(93100);const P=(e,{getCurrentValue:t})=>{const s=(0,R.useCallback)((t=>e?(e.connect(t),()=>{e.disconnect(t)}):$()),[e]);return(0,L.useSubscription)({getCurrentValue:t,subscribe:s})},N=(e,{property:t,sender:s})=>{const n=(0,R.useCallback)((()=>{if(s)return s[t]}),[t,s]);return P(e,{getCurrentValue:n})};class U{constructor(e,t){this.isUndoingOrRedoing=!1,this.index=0,this.states=[e],this.onChange=()=>{this.isUndoingOrRedoing=!0;try{t(this.states[this.index])}finally{this.isUndoingOrRedoing=!1}}}get canRedo(){return this.index<this.states.length-1}get canUndo(){return this.index>0}set(e){this.isUndoingOrRedoing||(this.index++,this.states.length=this.index,this.states.push(e))}redo(){if(!this.canRedo)throw new Error("Cannot redo");this.index++,this.onChange()}undo(){if(!this.canUndo)throw new Error("Cannot undo");this.index--,this.onChange()}}const O="atoti",A="widget",W=360,q=e=>e.get(O)||void 0,B=({code:e,state:t})=>({cell_type:"code",metadata:{[O]:{[A]:(0,b.hNS)(t)}},source:e}),z=e=>{var t;return(null===(t=q(e))||void 0===t?void 0:t.height)||W};class F{constructor(e,{widgetPlugins:t}){this._changed=new E.Signal(this),this._isDeferredChanged=new E.Signal(this),this._isDeferred=!1,this._isDisposed=!1,this.cellMetadata=e,this.undoableState=new U(this.current,(e=>{this.current=e}));const s=(e,{key:t,newValue:s})=>{t===O&&(this.undoableState.set(s),this._changed.emit())};this.cellMetadata.changed.connect(s),this.disconnectFromCellMetadataChangedSignal=()=>{this.cellMetadata.changed.disconnect(s)},this.memoizedDeserializeWidgetState=I()((e=>{if(e)return(0,b.mh8)(e)})),this.widgetPlugins=t}get defaultWidgetState(){return this.widgetPlugins[0].initialState}get canRedo(){return this.undoableState.canRedo}get canUndo(){return this.undoableState.canUndo}get changed(){return this._changed}get current(){return q(this.cellMetadata)}set current(e){e?this.cellMetadata.set(O,e):this.cellMetadata.delete(O)}dispose(){this.isDisposed||(this._isDisposed=!0,this.disconnectFromCellMetadataChangedSignal(),E.Signal.clearData(this))}get isDeferred(){return this._isDeferred}set isDeferred(e){this._isDeferred=e,this._isDeferredChanged.emit()}get isDeferredChanged(){return this._isDeferredChanged}get isDisposed(){return this._isDisposed}setHeight(e){this.setMetadataProperty("height",e)}setMetadataProperty(e,t){const{current:s}=this;this.current={...s,[e]:t}}setSerializedWidgetState(e){this.setMetadataProperty(A,e)}setWidgetState(e){this.setSerializedWidgetState((0,b.hNS)(e))}redo(){this.undoableState.redo()}undo(){this.undoableState.undo()}}const Q=e=>({isDeferred:N(e.isDeferredChanged,{property:"isDeferred",sender:e}),setIsDeferred:(0,R.useCallback)((t=>{e.isDeferred=t}),[e])}),V=e=>{const t=(0,R.useCallback)((t=>{e.setWidgetState(t)}),[e]),{[A]:s}=N(e.changed,{property:"current",sender:e})||{};return{setWidgetState:t,widgetState:e.memoizedDeserializeWidgetState(s)}};var H=s(29383),K=s(61162);const J=({children:e,icon:t,id:s})=>{const{formatMessage:n}=(0,M.useIntl)();return(0,H.jsx)("div",{css:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"}},(0,H.jsx)(K.default,{description:(0,H.jsx)("span",{css:{color:"var(--jp-ui-font-color1)"}},(0,H.jsx)("span",{css:{fontSize:"var(--jp-ui-font-size2)"}},n({id:`${s}.title`})),(0,H.jsx)("br",null),(0,H.jsx)("span",{css:{color:"var(--jp-ui-font-color2)",fontSize:"var(--jp-ui-font-size1)"}},n({id:`${s}.description`}))),image:t,imageStyle:{fontSize:42,height:60}},e))};var Y=s(6810);const X=({hasSnapshot:e})=>e?(0,H.jsx)(J,{icon:(0,H.jsx)(Y.PictureOutlined,null),id:"widget.snapshotSelected"}):(0,H.jsx)(J,{icon:(0,H.jsx)(Y.ApiOutlined,null),id:"widget.waitingForConnection"}),Z=(0,R.createContext)(void 0),G=()=>(0,R.useContext)(Z),ee=(0,R.createContext)(void 0),te=({cellMetadata:e,children:t,hasSnapshot:s})=>{const n=G(),i=(0,R.useCallback)((()=>n.get(e)),[e,n]),o=P(n.created,{getCurrentValue:i});return o?(0,H.jsx)(ee.Provider,{value:o},t):(0,H.jsx)(X,{hasSnapshot:s})},se=()=>(0,R.useContext)(ee);class ne{constructor({widgetPlugins:e}){this._created=new E.Signal(this),this.widgetStateTrackers=new WeakMap,this.widgetPlugins=e}get created(){return this._created}get(e){return this.widgetStateTrackers.get(e)}getOrCreate(e){return this.widgetStateTrackers.has(e)||(this.widgetStateTrackers.set(e,new F(e,{widgetPlugins:this.widgetPlugins})),this._created.emit()),this.get(e)}}const ie=async({code:e,notebookTracker:t,state:s})=>{const n=t.currentWidget;if(!n)throw new Error("Notebook has no current panel.");const i=n.model;if(!i)throw new Error("Current notebook panel has no model.");const o=i.contentFactory.createCodeCell({cell:B({code:e,state:s})}),r=n.content;i.cells.insert(r.activeCellIndex+1,o),r.activeCellIndex++;const a=r.activeCell;return await v.NotebookActions.run(r,n.sessionContext),a},oe=e=>{const t=N(e.activeCellChanged,{property:"activeCell",sender:e});if(t&&(0,k.isCodeCellModel)(t.model))return t.model},re=(e,t)=>{for(let s=0;s<e.length;s++){const n=e.get(s);if(t(n))return n}},ae="text/html",de=`application/vnd.atoti.widget.v${f.split(".",1).pop()}+json`,le=`application/vnd.atoti.convert-query-result-to-widget.v${f.split(".",1).pop()}+json`,ce="atoti-sidebar",ue=({jupyterLab:e})=>{e.shell.activateById(ce)};var he=s(66510);const ge="ant-root",pe=(0,R.forwardRef)((({children:e,height:t,...s},n)=>(0,H.jsx)("div",Object.assign({},s,{ref:n,className:ge,css:{height:t}}),e)));var me=s(64992),ye=s(19758),we=s(91725);const fe=()=>{const e=document.querySelector(`#${b.pt}`);if(!e)throw new Error("Missing overlay root DOM node.");return e};class xe{constructor({activePivotClient:e,contentClient:t,dataModel:s,fetch:n,isQuerySession:i,unproxiedUrl:o,url:r}){this._dataModelChanged=new E.Signal(this),this._disposed=new E.Signal(this),this._isDisposed=!1,this._dataModel=s,this.activePivotClient=e,this.appUrl=""===new URL(r).pathname?r:`${r}/`,this.contentClient=t,this.fetch=n,this.unsubscribeToDataModel=i?()=>{}:(({onChange:e,onDisconnect:t=(()=>{}),url:s})=>{let n=!1;const i=s.replace(/^(http)(s)?:\/\//,"ws$2://"),o=`${i.endsWith("/")?i:`${i}/`}atoti/discovery`,r=new WebSocket(o);return r.addEventListener("message",(({data:t})=>{const s=JSON.parse(t);e(s)})),r.addEventListener("close",(async()=>{n||(n=!0,t())})),()=>{n||(n=!0,r.close())}})({onChange:e=>{this._dataModel=e,this._dataModelChanged.emit()},onDisconnect:()=>{this.dispose()},url:r}),this.isQuerySession=i,this.unproxiedUrl=o}static async create({headers:e,isQuerySession:t,serverVersions:s,unproxiedUrl:n,url:i}){const o=null===e?void 0:{credentials:"include",headers:e,mode:"cors"},a=s.apis.pivot.versions[0],d=(0,b.Vse)({requestInit:o,url:i,version:a}),l=(0,b.u$l)({requestInit:o,url:i,version:s.apis.content.versions[0]}),c=await d.fetchDataModel(),u=r(i,{requestInit:o});return new xe({activePivotClient:d,contentClient:l,dataModel:c,fetch:u,isQuerySession:t,unproxiedUrl:n,url:i})}get dataModel(){return this._dataModel}get dataModelChanged(){return this._dataModelChanged}dispose(){this.isDisposed||(this._isDisposed=!0,this._disposed.emit(),this.activePivotClient.closeWebSocket(),this.unsubscribeToDataModel(),E.Signal.clearData(this))}get disposed(){return this._disposed}get isDisposed(){return this._isDisposed}isSameQuerySession({isQuerySession:e,url:t}){return this.isQuerySession&&e&&this.unproxiedUrl===t}}const Ce=(0,R.createContext)(void 0),ve=()=>(0,R.useContext)(Ce),Se=(0,R.createContext)(void 0),be={username:l,userRoles:[a,d]},je=({children:e,jupyterSessionContext:t,sessionName:s})=>{const n=ve(),i=N(null==t?void 0:t.sessionChanged,{property:"session",sender:t}),o=(0,R.useCallback)((()=>{const e=null==i?void 0:i.id;return e?n.get({jupyterSessionId:e,sessionName:s}):void 0}),[i,n,s]),r=P(n.changed,{getCurrentValue:o}),a=N(null==r?void 0:r.dataModelChanged,{property:"dataModel",sender:r}),d=(0,R.useMemo)((()=>{const e={};return r&&(e.default=r.activePivotClient),e}),[r]),l=(0,R.useMemo)((()=>null==r?void 0:r.contentClient),[r]),c=(0,R.useMemo)((()=>{const e={};return a&&(e.default=a),e}),[a]);return r?(e=>Object.values(e).some((({catalogs:e})=>e.some((({cubes:e})=>e.length>0)))))(c)?(0,H.jsx)(b.drd,{value:be},(0,H.jsx)(b.u_E,{value:{activePivot:d,content:l}},(0,H.jsx)(b.JjR,{value:c},(0,H.jsx)(Se.Provider,{value:r},e)))):(0,H.jsx)(J,{icon:(0,H.jsx)(b.qEg,null),id:"widget.noCubesToVisualize"}):(0,H.jsx)(X,null)};var ke=s(80629);const Me=({jupyterSessionId:e,sessionName:t})=>JSON.stringify(`${e}:${t}`),Te=ke.URLExt.join(ke.PageConfig.getBaseUrl(),"proxy"),Ee=async e=>r(e)("versions/rest");class _e{constructor(){this._changed=new E.Signal(this),this.sessionClients={},this.sessionClientCreations={}}get changed(){return this._changed}async create({headers:e,isQuerySession:t,port:s,url:n}){let i,o=n;if(r=n,[new URL(ke.PageConfig.getBaseUrl()).hostname,"localhost","127.0.0.1","","0.0.0.0"].includes(new URL(r).hostname)){const{pathname:e}=new URL(n),t=ke.URLExt.join(Te,String(s),...e&&"/"!==e?[e]:[]);try{i=await Ee(t),o=t}catch(e){}}var r;return i||(i=await Ee(o)),xe.create({headers:e,isQuerySession:t,serverVersions:i,unproxiedUrl:n,url:o})}get({jupyterSessionId:e,sessionName:t}){const s=Me({jupyterSessionId:e,sessionName:t});return this.sessionClients[s]}async getOrCreate({jupyterSessionId:e,session:t,sessionName:s}){const n=this.get({jupyterSessionId:e,sessionName:s});if(n){if(!n.isSameQuerySession(t))return n;n.dispose()}const i=Me({jupyterSessionId:e,sessionName:s});return i in this.sessionClientCreations||(this.sessionClientCreations[i]=Promise.resolve().then((async()=>{const e=await this.create(t),s=()=>{Reflect.deleteProperty(this.sessionClients,i),this._changed.emit(),e.disposed.disconnect(s)};e.disposed.connect(s),this.sessionClients[i]=e,Reflect.deleteProperty(this.sessionClientCreations,i),this._changed.emit()}))),await this.sessionClientCreations[i],this.sessionClients[i]}}const Ie=(0,R.createContext)(void 0),Re=(0,R.createContext)(void 0),De=({children:e,value:{intlTracker:t,jupyterLab:s,notebookTracker:n,pluginRegistry:i,sessionClients:o,themeTracker:r,widgetStateTrackers:a}})=>{const{locale:d,messages:l}=N(t.changed,{property:"config",sender:t}),c=N(r.changed,{property:"theme",sender:r});return(0,H.jsx)(me.default,{getPopupContainer:fe},(0,H.jsx)(ye.DndProvider,{backend:we.HTML5Backend},(0,H.jsx)(M.IntlProvider,{locale:d,messages:l},(0,H.jsx)(b.f6W,{value:c},(0,H.jsx)(b.oPk,{value:i},(0,H.jsx)(Ie.Provider,{value:s},(0,H.jsx)(Re.Provider,{value:n},(0,H.jsx)(Ce.Provider,{value:o},(0,H.jsx)(Z.Provider,{value:a},e)))))))))},$e=()=>(0,R.useContext)(Ie),Le=()=>(0,R.useContext)(Re);var Pe=s(21469),Ne=s(94963);const Ue=()=>{const e=se(),{formatMessage:t}=(0,M.useIntl)();return(0,H.jsx)(J,{icon:(0,H.jsx)(Y.MehOutlined,null),id:"widget.errored"},(0,H.jsx)(Pe.default,{danger:!0,onClick:()=>{e.current=void 0}},(0,H.jsx)(Y.ClearOutlined,null)," ",t({id:"widget.reset"})),e.canUndo?(0,H.jsx)(Pe.default,{css:{marginLeft:"4px !important",marginTop:"4px !important"},onClick:()=>{e.undo()}},(0,H.jsx)(Y.UndoOutlined,null)," ",t({id:"aui.plugins.menu-item.undo.key"})):null)},Oe=({children:e,widgetLoadingTracker:t})=>{const s=(0,R.useCallback)((async e=>{t&&await t.handleError(e)}),[t]),n=se(),i=V(n);return(0,H.jsx)(Ne.ErrorBoundary,{FallbackComponent:Ue,resetKeys:[i],onError:s},e)};var Ae=s(93897),We=s(71249);const{OptGroup:qe,Option:Be}=Ae.Z,ze=({onChange:e,widgetState:t})=>{const{formatMessage:s}=(0,M.useIntl)(),n=(0,b.ANR)(),i=(0,b.h0_)(n).filter((e=>(0,j.vo)(e))),{mapping:o,widgetKey:r}=(0,b.jl5)(t),{attributes:a}=i.find((({key:e})=>e===r)),d=(0,R.useMemo)((()=>{const e={};for(const t of Object.values(i)){const n=t.subCategory||"misc";e[n]||(e[n]=[]);const i=t.Icon||Y.QuestionOutlined,{max:r,status:d}=(0,j.WS)(o,a,t.attributes);e[n].push((0,H.jsx)(Be,{key:t.key,disabled:"ok"!==d,value:t.key,title:"ok"===d?void 0:s({id:"sidebar.switchDisabled"},{max:r,status:d})},(0,H.jsx)(i,{css:{marginRight:4}})," ",s({id:`aui.plugins.widget.${t.key}.key`})))}return e}),[a,i,s,o]);return(0,H.jsx)(Ae.Z,{css:{height:28,marginBottom:"4px !important",width:"100%"},listHeight:30*Object.keys(i).length,value:r,onChange:s=>{e((0,We.produce)(t,(e=>{s===e.widgetKey?delete e.switchedTo:e.switchedTo=s})))}},Object.entries(d).map((([e,t])=>(0,H.jsx)(qe,{key:e,label:s({id:`aui.dataVisualization.category.${e}`})},t))))};var Fe=s(64994);const Qe=()=>{const e=se(),{isDeferred:t,setIsDeferred:s}=Q(e),{formatMessage:n}=(0,M.useIntl)();return(0,H.jsx)("div",{css:{alignItems:"center",display:"flex",flexDirection:"row",height:22,justifyContent:"flex-end"}},(0,H.jsx)(Fe.Z,{checked:t,onChange:e=>{s(e.target.checked)}},n({id:"sidebar.deferUpdates"})))},Ve=({cellId:e})=>{const t=se(),{setWidgetState:s,widgetState:n=t.defaultWidgetState}=V(t),{widgetKey:i}=(0,b.jl5)(n),[o]=(0,b.h0_)([i]),r=o.contentEditor;return(0,H.jsx)("div",{css:{display:"flex",flexDirection:"column",height:"100%"}},T(n)?(0,H.jsx)(ze,{widgetState:n,onChange:s}):null,(0,H.jsx)("div",{css:{height:`calc(100% - ${22+(T(n)?32:0)}px)`}},(0,H.jsx)(r,{widgetState:n,queryId:e,onWidgetChange:s})),(0,H.jsx)(Qe,null))},He=()=>{const e=Le(),t=oe(e),s=(e=>{const t=N(e.currentChanged,{property:"currentWidget",sender:e});return t?t.sessionContext:void 0})(e),n=(e=>{N(null==e?void 0:e.outputs.changed,{property:"length",sender:null==e?void 0:e.outputs});const t=e?re(e.outputs,(e=>void 0!==e.data[de])):void 0;if(!t)return;const{data:s}=t;return{hasSnapshot:ae in s,widgetOutput:s[de]}})(t);if(!t||!n)return(0,H.jsx)(J,{icon:(0,H.jsx)(b.Iwf,null),id:"sidebar.noWidgetSelected"});const{hasSnapshot:i,widgetOutput:{session:o}}=n;return(0,H.jsx)(te,{cellMetadata:t.metadata,hasSnapshot:i},(0,H.jsx)(je,{jupyterSessionContext:s,sessionName:o},(0,H.jsx)(Oe,null,(0,H.jsx)(Ve,{cellId:t.id}))))},Ke=".atoti-icon.jp-SideBar-tabIcon";class Je extends he.Widget{constructor(e){super(),this.id=ce,this.title.caption="atoti",this.title.iconClass="jp-SideBar-tabIcon atoti-icon";const t=C.ReactWidget.create((0,H.jsx)(R.Fragment,null,(0,H.jsx)(H.Global,{styles:{[Ke]:{backgroundColor:"var(--md-grey-700)",backgroundImage:"none",maskImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24'%3E%3Cg%3E%3Cpath d='M.24 11.88c0-4.43 2.74-7.82 7.05-7.82 1.9-.09 3.7.88 4.65 2.52V4.46h4.68V19.3h-4.68v-2.09c-.8 1.48-2.65 2.49-4.71 2.49-4.43 0-6.99-3.35-6.99-7.82m11.89 0c0-2.13-1.2-3.88-3.54-3.88-2.19 0-3.54 1.63-3.54 3.88s1.35 3.91 3.54 3.91c2.34 0 3.54-1.75 3.54-3.91' /%3E%3Cpath d='M17.91 16.81a2.917 2.917 0 012.96-2.88c1.58.02 2.86 1.3 2.89 2.88a2.947 2.947 0 01-2.97 2.89 2.929 2.929 0 01-2.88-2.89' /%3E%3C/g%3E%3C/svg%3E%0A\")",maskPosition:"center",maskRepeat:"no-repeat",maskSize:"contain"},[`[data-jp-theme-light="false"] ${Ke}`]:{backgroundColor:"var(--md-grey-300)"}}}),(0,H.jsx)(De,{value:e},(0,H.jsx)(He,null)))),{classList:s,style:n}=t.node;s.add(ge),n.padding="4px 4px 0 4px";const i=new he.PanelLayout;i.addWidget(t),this.layout=i}}const Ye="convert-query-result-to-widget",Xe=`atoti:${Ye}`,Ze=".jp-Notebook .jp-CodeCell .dataframe",Ge=e=>{const{activeCell:t}=e,s=t&&(0,k.isCodeCellModel)(t.model)&&re(t.model.outputs,(e=>void 0!==e.data[le]));return s?s.data[le]:void 0};var et=s(20391);const tt="en-US",st={en:"en-US"},nt=e=>{if(!e)return tt;const t=e.get("locale").composite,s=st[t];return void 0===s?(console.error(`atoti does not support JupyterLab's ${t} locale, falling back to en-US.`),tt):s},it=async(e,{pluginRegistry:t})=>{const[n,{default:i}]=await Promise.all([(0,b.pr1)(e),s(7147)(`./${e}`)]);return{...n,...(0,b.dUG)(t,e),...(0,et.treeToFlatMap)(i)}};class ot{constructor({initialConfig:e,pluginRegistry:t,translationSettings:s}){this._changed=new E.Signal(this),this._config=e,s&&s.changed.connect((async()=>{const e=nt(s),n=await it(e,{pluginRegistry:t});this._config={locale:e,messages:n},this._changed.emit()}))}static async create({pluginRegistry:e,settingRegistry:t}){const s=await(t?t.load("@jupyterlab/translation-extension:plugin"):void 0),n=nt(s),i=await it(n,{pluginRegistry:e});return new ot({initialConfig:{locale:n,messages:i},pluginRegistry:e,translationSettings:s})}get changed(){return this._changed}get config(){return this._config}}var rt=s(24350),at=s.n(rt),dt=s(95479),lt=s(36853),ct=s(22355),ut=s(19850);class ht{constructor({cellModels:e}){this._changed=new E.Signal(this),this.messages=new WeakMap,this.cellModels=e}get changed(){return this._changed}get(e){return this.messages.get(e)}register(e){this._changed.emit(),e.registerCommTarget("atoti-widget",((e,{content:{data:t}})=>{const s=t;try{const{cellId:e}=s;(({session:{headers:e,isQuerySession:t}})=>{if(!t){const t=new Headers(e).get("authorization");if(!t)throw new Error(`Missing Authorization header in ${JSON.stringify(e)}.`);const{username:s}=(e=>{const{authorities:t,sub:s}=JSON.parse(atob(e.split(".",2).pop())),n={roles:t,username:s},{roles:i,username:o}=n;if(!(o!==l||i.includes(d)&&i.includes(a)))throw new Error(`Anonymous user should have roles ROLE_USER and ROLE_ADMIN but had roles: ${i}.`);return n})(t.split(" ",2).pop());if(s!==l)throw new Error(`Expected username to be anonymousUser but was ${s}.`)}})(s);const t=(0,ut.toArray)(this.cellModels).find((({id:t})=>e===t));if(!t)throw new Error(`Missing model for cell #${e}`);if(!(0,k.isCodeCellModel)(t))throw new Error(`Expected cell #${e} to be a code cell`);const n=re(t.outputs,(e=>void 0!==e.data[de]));if(!n)throw new Error(`Expected cell #${e} to have a widget output`);this.messages.set(n,s),this._changed.emit()}catch(e){console.error(e)}}))}}const gt=(e,t)=>{const s=(0,R.useCallback)((()=>e.get(t)),[t,e]);return P(e.changed,{getCurrentValue:s})},pt=(0,R.createContext)(null),mt=pt.Provider,yt=()=>(0,R.useContext)(pt),wt="open-drillthrough",ft={Component:(0,j.r3)((e=>{const{cube:t,onClick:s,selection:i,widgetState:o}=e,{formatMessage:r}=(0,M.useIntl)(),a=$e(),d=Le(),{mimeModel:l,widgetComm:c}=yt(),u=gt(c,l),h=(0,R.useMemo)((()=>{if((0,lt.Yi)(i))return i.cells[0].tuple.filter((e=>"Measures"===e.dimensionName||!(0,dt.Eu)((0,b._yD)(e,t),e)))}),[t,i]),g=(0,R.useMemo)((()=>{if(!h)return;const e=h.filter((e=>"Measures"!==e.dimensionName));return r({id:`aui.plugins.menu-item.${wt}.openDrillthrough`},{member:e.length>0?(0,dt.eh)(e,{cube:t,hasOnlyCaptionForLeafLevels:!0,separator:", "}):void 0})}),[r,h,t]),p=(0,R.useCallback)((async e=>{if(s&&s(e),g&&h&&u&&o.query.mdx){const e=(0,lt.j6)({cube:t,sourceWidgetFilters:o.filters,tuple:h}),s={...b.oH_.initialState,filters:e,query:{...b.oH_.initialState.query,mdx:{elementType:"Drillthrough",select:{...o.query.mdx,axes:[],cellProps:void 0,slicerAxis:void 0}}},serverKey:n};ue({jupyterLab:a}),await ie({code:u.widgetCreationCode,notebookTracker:d,state:s})}}),[t,a,g,d,s,h,u,o]);return h&&u&&o.query.mdx?(0,H.jsx)(ct.Z.Item,Object.assign({},(0,b.IWr)(e),{onClick:p}),(0,H.jsx)(b.Al8,{css:{marginRight:8}}),g):null})),key:wt,translations:{"en-US":{openDrillthrough:"Drillthrough {member, select,\n           undefined {}\n           other {on {member}}\n          }"}}};var xt=s(35411),Ct=s(86973);const vt={Component:e=>{const{formatMessage:t,locale:s,messages:n}=(0,M.useIntl)(),{appUrl:i,contentClient:o,isQuerySession:r}=(0,R.useContext)(Se),{widgetName:d}=yt(),[l,c]=(0,R.useState)(!1),{widgetState:u}=e,h=(0,R.useCallback)((()=>{let e=!1;return(async()=>{if(!o)throw new Error("Missing content client on local sessions.");c(!0);const{name:r,widgetKey:l,...h}=(0,b.hNS)(u),g=()=>{e||c(!1)},p=[a];try{await o.createFile({content:h,metaData:{name:d||void 0,widgetKey:l},owners:p,pathToFolder:[],readers:p,type:"widget"}),Ct.default.success({description:(0,H.jsx)(M.IntlProvider,{locale:s,messages:n},(0,H.jsx)(M.FormattedMessage,{id:"aui.plugins.menu-item.publish-widget.successDescription",values:{a:e=>(0,H.jsx)("a",{href:i,target:"_blank",rel:"noopener noreferrer"},e)}})),getContainer:fe,message:t({id:"aui.plugins.menu-item.publish-widget.successMessage"}),onClose:g})}catch(e){console.error(e),Ct.default.error({description:String(e),message:t({id:"aui.plugins.menu-item.publish-widget.errorMessage"}),onClose:g})}})(),()=>{e=!0}}),[i,o,t,s,n,d,u]);return(0,H.jsx)(xt.default,Object.assign({},(0,b.IWr)(e),{disabled:r||l,title:r?t({id:"aui.plugins.menu-item.publish-widget.querySessionWidgetsCannotBePublished"}):void 0,onClick:h}),(0,H.jsx)(R.Fragment,null,(0,H.jsx)(Y.ShareAltOutlined,null),t({id:"aui.plugins.menu-item.publish-widget.publishWidgetInApp"})))},key:"publish-widget",translations:{"en-US":{errorMessage:"Widget could not be published",publishWidgetInApp:"Publish in app",querySessionWidgetsCannotBePublished:"Query session widgets cannot be published",successDescription:'Find it in the "Widgets" drawer of <a>the app</a>.',successMessage:"Widget published"}}},St=e=>at()(e,"key"),bt=["undo","redo"],jt=({undoRedoKey:e,...t})=>{const{formatMessage:s}=(0,M.useIntl)(),n=se();N(n.changed,{property:"current",sender:n});const i=(0,R.useCallback)((()=>{"undo"===e?n.undo():n.redo()}),[e,n]),o="undo"===e?!n.canUndo:!n.canRedo;return(0,H.jsx)(xt.default,Object.assign({},(0,b.IWr)(t),{disabled:!n||o,title:o?s({id:`aui.plugins.menu-item.${e}.nothingToUndoRedo`}):void 0,onClick:i}),"undo"===e?(0,H.jsx)(Y.UndoOutlined,null):(0,H.jsx)(Y.RedoOutlined,null),s({id:`aui.plugins.menu-item.${e}.key`}))},kt=(e,{notebookTracker:t,widgetStateTrackers:s})=>n=>{const i=oe(t);if(!i)throw new Error("Expected a notebook cell to be active");return(0,H.jsx)(Z.Provider,{value:s},(0,H.jsx)(te,{cellMetadata:i.metadata},(0,H.jsx)(jt,Object.assign({undoRedoKey:e},n))))},Mt=[b.TA$,b.a2P,b._dN,b.Uou,b.igv,b.W$X,b.$3o,b.GSY,b.Y8R,b.uVH,b.fO6,b.U_o,b.UiH,b.Y5x,b.EAR,b.M1w,b.Oj0,b.NWu,b.iph,b.wSQ,b.teE,b.C1v,b.oH_];b.oH_.cellStyle=b.iOR.key,b.oH_.contextMenuItems=[b._fi.key,b.A8w.key,b.Pmi.key];const Tt=Mt.filter((({key:e})=>e.startsWith("plotly")));for(const e of Tt)e.contextMenuItems=[...bt,ft.key,b.Uk4.key,b.QYw.key,b.f$L.key,b.XWS.key,b.lJ3.key,vt.key];b.TA$.cell=b.gRB.key,b.TA$.cellStyle=b.OT2.key,b.a2P.cell=b.BUk.key,b.a2P.cellStyle=b.OT2.key;for(const e of[b.TA$,b.a2P])e.contextMenuItems=[...bt,ft.key,b.Nn4.key,b.woi.key,b.f$L.key,b.XWS.key,b.oCn.key,b.lJ3.key,vt.key];b._dN.contextMenuItems=[...bt,b.XWS.key,vt.key];const Et="atoti-ant-style";class _t{constructor({initialTheme:e,syncTheme:t,themeManager:s}){this._changed=new E.Signal(this),this._theme=e,s.themeChanged.connect((async()=>{this._theme=await t(),this._changed.emit()}))}static async create(e){const t=document.createElement("style");t.id=Et,t.setAttribute("rel","stylesheet"),document.querySelector("head").append(t);const n=async()=>{const n=!e.theme||e.isLight(e.theme),i=n?await s.e(2155).then(s.t.bind(s,52155,17)):await s.e(2601).then(s.t.bind(s,82601,17));return t.innerHTML=i.default,n?b.xjl:b.MuJ},i=await n();return new _t({initialTheme:i,syncTheme:n,themeManager:e})}get changed(){return this._changed}get theme(){return this._theme}}var It=s(19129),Rt=s(14456),Dt=s.n(Rt);const $t=({children:e})=>{const[t,s]=(0,R.useState)(),n=(0,R.useRef)(null);return(0,R.useEffect)((()=>{const e=n.current;e&&void 0===t&&s(null!==e.closest(".jp-LinkedOutputView"))}),[t]),void 0===t?(0,H.jsx)("div",{ref:n}):e(t)},Lt=()=>{const{cellMetadata:e,jupyterSessionContext:t,mimeModel:s,queryId:n,sessionName:i}=yt(),o=se(),{isDeferred:r}=Q(o),{setWidgetState:a,widgetState:d=o.defaultWidgetState}=V(o);return(0,H.jsx)(pe,null,(0,H.jsx)(te,{cellMetadata:e,hasSnapshot:Boolean(s.data[ae])},(0,H.jsx)(je,{jupyterSessionContext:t,sessionName:i},(0,H.jsx)(b.$LY,{isDeferred:r,queryId:n,widgetState:d,onChange:a}))))};class Pt{constructor({sessionClient:e,widgetId:t}){this.toldLoadingDone=!1,this.toldLoadingStarted=!1,this.sessionClient=e,this.widgetId=t}async started({queriesTimeLimit:e}){this.toldLoadingStarted||this.sessionClient.isQuerySession||(this.toldLoadingStarted=!0,await this.sendLoadingState(!0,{queriesTimeLimit:e}))}async done(){this.toldLoadingDone||this.sessionClient.isQuerySession||(this.toldLoadingDone=!0,await this.sendLoadingState(!1))}async handleError(e){await this.done()}async sendLoadingState(e,{queriesTimeLimit:t}={}){const s=`${w.apis.atoti.versions[0].restPath}/widgets/${this.widgetId}/loading${e&&void 0!==t?`?queriesTimeLimit=${t}`:""}`;await this.sessionClient.fetch(s,{method:e?"POST":"DELETE"})}}const Nt="http://www.w3.org/2000/svg",Ut=(e,{elements:t,matchedSelectors:s,styles:n})=>{const i=e.selectorText,o=e.style;if(((e,{elements:t,matchedSelectors:s})=>{if(e in s)return s[e];const n=t.some((t=>t.matches(e)));return s[e]=n,s[e]})(i,{elements:t,matchedSelectors:s})){i in n||(n[i]={});const e=n[i];for(const t of o)"important"===o.getPropertyPriority(t)?e[t]=o[t]+" !important":e[t]=o[t]}},Ot={left:"scrollLeft",top:"scrollTop"},At=e=>{const{clientHeight:t,clientWidth:s}=e,n=document.createElementNS(Nt,"svg");n.setAttribute("xmlns",Nt);const i=document.createElementNS(Nt,"foreignObject");n.setAttribute("height",String(t)),n.setAttribute("width",String(s)),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("x","0"),i.setAttribute("y","0");const o=document.createElement("style");var r;const a=(e=>Object.entries(e).map((([e,t])=>`${e} {${Object.entries(t).map((([e,t])=>`${e}: ${t}`)).join("; ")}}`)).join("\n"))((r=(e=>{if(!document.getElementById(Et))throw new Error("The stylesheet #atoti-ant-style is missing");const t={},s={},n=[e,...e.querySelectorAll("*")],i=[...document.styleSheets];for(const e of i)try{const i=e.cssRules;for(const e of i)Ut(e,{elements:n,matchedSelectors:t,styles:s})}catch(e){}return s})(e),{...r,"*":{"-ms-overflow-style":"none","scrollbar-width":"none"},"*::-webkit-scrollbar":{display:"none"}}));o.setAttribute("type","text/css"),o.append(document.createTextNode(a)),n.append(i),i.append(o);const d=document.createElement("div");return d.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),d.setAttribute("style",`height: ${t}px; width: ${s}px;`),d.append((e=>{const t=[e,...e.querySelectorAll("*")],s=e.cloneNode(!0),n=[s,...s.querySelectorAll("*")];for(const[e,s]of n.entries()){const n=t[e];for(const[e,t]of Object.entries(Ot)){const i=e,o=n[t];if(0!==o)for(const e of s.children){const{style:s}=e;if(""!==s[i])throw new Error(`Expected child of element with ${t} property of ${o} to have no ${i} style property but has ${s[i]}.`);s[i]=-o+"px"}}}return s})(e)),i.append(d),n},Wt=e=>{const t=document.createElementNS(Nt,"svg");return t.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),t.setAttribute("height",String(e.clientHeight)),t.setAttribute("width",String(e.clientWidth)),((e,t)=>{const{height:s,width:n}=e[0].getBoundingClientRect();t.setAttribute("viewBox",`0 0 ${n} ${s}`);for(const s of e)for(const e of s.children)t.append(e.cloneNode(!0))})(e.querySelectorAll(".svg-container .main-svg"),t),t},qt=(e,{isPlotlyChart:t})=>(e=>{const t=(new XMLSerializer).serializeToString(e);return`<img src="data:image/svg+xml;charset=utf8,${encodeURIComponent(`<?xml version="1.0" standalone="no"?>${t}`)}">`})((t?Wt:At)(e)),Bt=({widgetLoadingTracker:e,widgetRef:t})=>{const{queryId:s}=yt(),i=se(),{isDeferred:o,setIsDeferred:r}=Q(i),{setWidgetState:a,widgetState:d}=V(i),l=d||i.defaultWidgetState;(e=>{const t=$e();(0,R.useEffect)((()=>{e&&ue({jupyterLab:t})}),[e,t])})(void 0===d);const c=((e,{query:t})=>{const s=(0,R.useRef)(t);return(0,R.useEffect)((()=>{(async()=>{var t;if(!(null===(t=s.current)||void 0===t?void 0:t.mdx))return;const{queriesTimeLimit:n}=s.current.context||{};if(void 0!==n&&"number"!=typeof n)throw new Error(`Expected queriesTimeLimit to be a number but was: ${JSON.stringify(n)}`);await e.started({queriesTimeLimit:n})})()}),[e]),(0,R.useEffect)((()=>()=>{(async()=>{await e.done()})()}),[e]),(0,R.useCallback)((async()=>{await e.done()}),[e])})(e,{query:l.query}),u=(({widgetRef:e,widgetState:t})=>{const{mimeModel:s,queryId:i,saveStateSignal:o}=yt(),{widgetKey:r}=(0,b.jl5)(t),a=(0,R.useRef)(!1),d=(0,R.useCallback)((e=>{const{[ae]:t,...n}=s.data;s.setData({data:void 0===e?n:{...n,[ae]:e}})}),[s]),{error:l}=(0,b.bAZ)({queryId:i,serverKey:n});return(0,R.useEffect)((()=>{const t=(t,s)=>{"started"===s&&d(a.current&&!l&&e.current?qt(e.current,{isPlotlyChart:/plotly-.+-chart/.test(r)}):void 0)};return o.connect(t),()=>{o.disconnect(t)}}),[l,o,d,e,r]),(0,R.useCallback)((()=>{a.current=!0}),[])})({widgetRef:t,widgetState:l}),h=(0,R.useCallback)((()=>{c(),u()}),[c,u]);return(e=>{(0,R.useEffect)((()=>()=>{e(!1)}),[e])})(r),(0,H.jsx)(b.$LY,{isDeferred:o,queryId:s,widgetState:l,onLoaded:h,onChange:a})};var zt=s(83609);const Ft="var(--jp-layout-color3)",Qt=(0,R.forwardRef)((({children:e},t)=>{const s=se(),{height:n,setHeight:i}=(e=>{const t=(0,R.useCallback)((t=>{e.setHeight(t)}),[e]),{height:s=W}=N(e.changed,{property:"current",sender:e})||{};return{height:s,setHeight:t}})(s),{widgetName:o}=yt();return(0,H.jsx)(H.ClassNames,null,(({css:s})=>(0,H.jsx)(zt.Resizable,{handleClasses:{bottom:`atoti-resize-handle ${s({backgroundClip:"content-box",backgroundColor:Ft,borderBottom:`1px solid ${Ft}`,borderTop:`1px solid ${Ft}`,boxSizing:"border-box",display:"none",height:"7px !important",marginBottom:5,marginLeft:"calc(50% - 20px)",paddingBottom:2,paddingTop:2,width:"40px !important"})}`},size:{height:n,width:"100%"},enable:{bottom:!0,bottomLeft:!1,bottomRight:!1,left:!1,right:!1,top:!1,topLeft:!1,topRight:!1},css:{"&:hover .atoti-resize-handle":{display:"inherit"},overflow:"hidden",paddingBottom:12},onResizeStop:(e,t,s,o)=>{i(n+o.height)}},(0,H.jsx)(pe,{ref:t,"data-testid":g("Widget",o)},e))))})),Vt=({html:e})=>{const t=(0,M.useIntl)(),{widgetName:s}=yt();return(0,H.jsx)("div",{dangerouslySetInnerHTML:{__html:e},css:{cursor:"help"},"data-testid":g("WidgetSnapshot",s),title:t.formatMessage({id:"widget.snapshotSelected.description"})})},Ht=()=>{const e=(0,R.useRef)(null),{cellMetadata:t,jupyterSessionContext:s,mimeModel:n,sessionName:i}=yt(),o=(()=>{const e=ve(),{cellMetadata:t,jupyterSessionContext:s,mimeModel:n,sessionName:i,widgetComm:o}=yt(),r=G(),a=gt(o,n),[d,l]=(0,R.useState)();return(0,R.useEffect)((()=>{let n=!1;return(async()=>{if(!s.session||!a||d)return;const{session:o,widgetId:c}=a,u=await e.getOrCreate({jupyterSessionId:s.session.id,session:o,sessionName:i});r.getOrCreate(t),n||d||l(new Pt({sessionClient:u,widgetId:c}))})(),()=>{n=!0}}),[t,s,e,i,a,d,r]),d})(),r=G().get(t);return o&&r?(0,H.jsx)(te,{cellMetadata:t},(0,H.jsx)(Qt,{ref:e},(0,H.jsx)(je,{jupyterSessionContext:s,sessionName:i},(0,H.jsx)(Oe,{widgetLoadingTracker:o},(0,H.jsx)(Bt,{widgetLoadingTracker:o,widgetRef:e}))))):n.data[ae]?(0,H.jsx)(Vt,{html:n.data[ae]}):(0,H.jsx)(pe,{height:z(t)},(0,H.jsx)(X,null))},Kt=()=>(0,H.jsx)($t,null,(e=>e?(0,H.jsx)(Lt,null):(0,H.jsx)(Ht,null)));class Jt extends v.NotebookTools{constructor({cellModels:e,notebookContext:t,options:s,sharedContext:n,widgetComm:i}){super(s),this.cleanUpFunctions=[],this.cellModels=e,this.notebookContext=t,this.sharedContext=n,this.widgetComm=i}getCorrespondingCellModel(e){const t=(0,ut.toArray)(this.cellModels).filter(k.isCodeCellModel).find((({outputs:t})=>re(t,(t=>t===e))));if(!t)throw new Error(`Could not find matching cell for model: ${JSON.stringify(e)}`);return t}async renderModel(e){const{id:t,metadata:s}=this.getCorrespondingCellModel(e),n=e.data[de],{name:i,session:o}=n;return new Promise((n=>{Dt().render((0,H.jsx)(De,{value:this.sharedContext},(0,H.jsx)(mt,{value:{cellMetadata:s,jupyterSessionContext:this.notebookContext.sessionContext,mimeModel:e,queryId:t,saveStateSignal:this.notebookContext.saveState,sessionName:o,widgetComm:this.widgetComm,widgetName:i}},(0,H.jsx)(Kt,null))),this.node,(()=>{this.cleanUpFunctions.push((()=>{Dt().unmountComponentAtNode(this.node)})),n()}))}))}onAfterAttach(){const e={capture:!0};this.node.addEventListener("contextmenu",this,e),this.cleanUpFunctions.push((()=>{this.node.removeEventListener("contextmenu",this,e)}))}onBeforeDetach(){for(const e of this.cleanUpFunctions)e()}handleEvent(e){if(e instanceof MouseEvent&&!e.shiftKey&&e.target){const t=new MouseEvent("contextmenu",{bubbles:!0,clientX:e.clientX,clientY:e.clientY,shiftKey:!0});e.stopPropagation(),e.preventDefault(),t.initEvent(t.type,!0,!0),e.target.dispatchEvent(t)}}}class Yt{constructor(e){this.sharedContext=e}createNew(e,t){const{content:s,model:n}=e;if(null===n)throw new Error("Session model should not be null at this time");const{cells:i}=n,o=new ht({cellModels:i});s.rendermime.addFactory({createRenderer:()=>new Jt({cellModels:i,notebookContext:t,options:{tracker:this.sharedContext.notebookTracker},sharedContext:this.sharedContext,widgetComm:o}),defaultRank:0,mimeTypes:[de],safe:!1});const{sessionContext:r}=t,a=(e,{newValue:t})=>{t&&o.register(t)};r.kernelChanged.connect(a);const d=((e,{cellModels:t})=>(s,n)=>{if("idle"===n)for(const s of(0,ut.toArray)(t).filter((t=>{const s=e.get(t.metadata);return s&&void 0!==s.current&&(0,k.isCodeCellModel)(t)&&t.outputs.length>0&&!re(t.outputs,(e=>"error"===e.type||void 0!==e.data[de]))})))e.get(s.metadata).current=void 0})(this.sharedContext.widgetStateTrackers,{cellModels:i});return r.statusChanged.connect(d),new It.DisposableDelegate((()=>{r.kernelChanged.disconnect(a),r.statusChanged.disconnect(d)}))}}window.Cypress&&(window.__UNSTABLE_DATA_TEST_IDS_ENABLED__=!0);const Xt={async activate(e,t,s,i,o,r){const a=e,{docRegistry:d,shell:l}=a;console.log(`Activating atoti extension version 0.5.5 (relying on ActiveUI SDK version ${y})`);const c=new ne({widgetPlugins:Mt}),u=(({undoRedoMenuItemPlugins:e,widgetPlugins:t})=>({cell:St([b.gRB,b.BUk]),"cell-style":St([b.iOR,b.OT2]),"menu-item":St([b.XWS,b.Pmi,b.lJ3,ft,vt,b.f$L,b.oCn,b._fi,b.A8w,b.Uk4,b.QYw,b.Nn4,b.woi,...e]),widget:St(t)}))({undoRedoMenuItemPlugins:(({notebookTracker:e,widgetStateTrackers:t})=>bt.map((s=>({Component:kt(s,{notebookTracker:e,widgetStateTrackers:t}),key:s,translations:{"en-US":{key:"undo"===s?"Undo":"Redo",nothingToUndoRedo:"Nothing to "+("undo"===s?"undo":"redo")}}}))))({notebookTracker:t,widgetStateTrackers:c}),widgetPlugins:Mt}),h=await ot.create({pluginRegistry:u,settingRegistry:r}),g=new _e,p={intlTracker:h,jupyterLab:a,notebookTracker:t,pluginRegistry:u,sessionClients:g,themeTracker:await _t.create(s),widgetStateTrackers:c},m=new Je(p);l.add(m,"left",{rank:700}),o&&o.add(m,"atoti-sidebar"),d.addWidgetExtension("Notebook",new Yt(p)),(()=>{const e=document.createElement("div");e.id=b.pt,e.classList.add(ge),document.body.append(e)})(),(({commandPalette:e,intlTracker:t,jupyterLab:s,notebookTracker:i,sessionClients:o,widgetStateTrackers:r})=>{s.commands.addCommand(Xe,{async execute(){const e=i.currentWidget.sessionContext.session.id,{mdx:t,sessionName:a,widgetCreationCode:d}=Ge(i),l={...b.TA$.initialState,serverKey:n},c=await ie({code:d,notebookTracker:i,state:l}),u=o.get({jupyterSessionId:e,sessionName:a});if(!u)throw new Error("The execution of the created cell should have created the corresponding SessionClient.");const h=r.get(c.model.metadata);if(!h)throw new Error("The execution of the created cell should have created the corresponding WidgetStateTracker.");const{widgetStateDerivedFromMdx:g}=(0,j.jf)({dataModels:{[n]:u.dataModel},mdx:(0,b.Qc3)(t),widgetPlugin:b.TA$,widgetState:l});h.setWidgetState(g),ue({jupyterLab:s})},isVisible(){var e,t;return void 0!==(null===(t=null===(e=i.currentWidget)||void 0===e?void 0:e.sessionContext.session)||void 0===t?void 0:t.id)&&void 0!==Ge(i)},label:()=>(0,M.createIntl)(t.config).formatMessage({id:`commands.${Ye}.caption`})}),s.contextMenu.addItem({command:Xe,selector:Ze}),s.contextMenu.addItem({selector:Ze,type:"separator"}),e&&e.addItem({category:"Notebook Cell Operations",command:Xe})})({commandPalette:i,intlTracker:h,jupyterLab:a,notebookTracker:t,sessionClients:g,widgetStateTrackers:c})},autoStart:!0,id:"atoti",optional:[C.ICommandPalette,x.ILayoutRestorer,S.ISettingRegistry],requires:[v.INotebookTracker,C.IThemeManager]}},7147:(e,t,s)=>{var n={"./en-US":[80761,761],"./en-US.js":[80761,761],"./en-US.js.map":[57918,7918]};function i(e){if(!s.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],i=t[0];return s.e(t[1]).then((()=>s(i)))}i.keys=()=>Object.keys(n),i.id=7147,e.exports=i}}]);